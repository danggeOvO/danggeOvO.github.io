<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"danggeovo.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="记录生活与学习!">
<meta property="og:type" content="website">
<meta property="og:title" content="dangge の 小小世界">
<meta property="og:url" content="https://danggeovo.github.io/sy/page/3/index.html">
<meta property="og:site_name" content="dangge の 小小世界">
<meta property="og:description" content="记录生活与学习!">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="danggeOvO">
<meta property="article:tag" content="安全,攻防,样本,漏洞,卫星互联网">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://danggeovo.github.io/sy/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"sy/page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>dangge の 小小世界</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">dangge の 小小世界</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">心之所向，无问西东</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/home" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="danggeOvO"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">danggeOvO</p>
  <div class="site-description" itemprop="description">记录生活与学习!</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">57</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/danggeOvO" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;danggeOvO" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:95239002@qq.com" title="E-Mail → mailto:95239002@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://danggeovo.github.io/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0--ch7%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="danggeOvO">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dangge の 小小世界">
      <meta itemprop="description" content="记录生活与学习!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | dangge の 小小世界">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0--ch7%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" class="post-title-link" itemprop="url">Python学习--ch7 面向对象程序设计</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-10 13:48:32" itemprop="dateCreated datePublished" datetime="2023-04-10T13:48:32+08:00">2023-04-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-08 18:16:24" itemprop="dateModified" datetime="2023-11-08T18:16:24+08:00">2023-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">【-基础知识-】编程语言学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/python%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">python学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>17k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>31 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>写在最前面：什么是面向对象程序设计？</p>
</blockquote>
<h1 id="7-1-类和对象"><a href="#7-1-类和对象" class="headerlink" title="7.1 类和对象"></a>7.1 类和对象</h1><blockquote>
<p>思维导图如下：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887132.png"></p>
<h2 id="7-1-1-定义类和创建对象"><a href="#7-1-1-定义类和创建对象" class="headerlink" title="7.1.1 定义类和创建对象"></a>7.1.1 定义类和创建对象</h2><blockquote>
<p>基本概念：</p>
</blockquote>
<ul>
<li><strong>类</strong>：抽象的概念，</li>
<li><strong>对象</strong>：具体的东西。</li>
</ul>
<p> 类是对象的<strong>蓝图和模板</strong>，而对象是<strong>类的示例</strong>。</p>
<p> <strong>举个例子</strong>：<br> 有一种描述：可以行走，可以吃饭，可以涩涩。对于这种描述，你看会在脑海里想到一些事物，比如猫等。<br> 这里我们的<strong>描述就是一个类</strong>，而<strong>猫就是对象</strong>。</p>
<hr>
<blockquote>
<p>类的定义</p>
<blockquote>
<p>通过<strong>class关键字</strong>进行类的定义</p>
</blockquote>
</blockquote>
<p><strong>语法格式</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">类名</span>:</span><br><span class="line">	<span class="comment"># 零个或多个方法（方法需要通过实例调用）</span></span><br><span class="line">	<span class="comment"># 零个或多个属性（属性是类的变量）</span></span><br></pre></td></tr></table></figure>
<p><strong>代码实例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line">s = Person(<span class="string">&#x27;xyq&#x27;</span>,<span class="number">21</span>)</span><br><span class="line"><span class="built_in">print</span>(s.name)</span><br><span class="line"><span class="built_in">print</span>(s.get_name())</span><br></pre></td></tr></table></figure>
<p><strong>结果演示</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887141.png"></p>
<p><strong>主要部分介绍</strong>：<br>1、<code>self参数</code>：<br>这里的<strong>self不是关键字</strong>，而是一个约定俗成的定名。其实这个<strong>self就是对象本身</strong>。</p>
<p>2、<code>__init__方法</code>：<br>是构造函数，实现了对象的<strong>初始化</strong>。也就是对上代码中的name,age<strong>赋初值</strong>。</p>
<h2 id="7-1-2-访问可见性"><a href="#7-1-2-访问可见性" class="headerlink" title="7.1.2 访问可见性"></a>7.1.2 访问可见性</h2><blockquote>
<p>引入介绍：</p>
</blockquote>
<p>面向对象的<strong>三大特征</strong>：<code>封装</code>、<code>继承</code>、<code>多态</code>。<br>而<strong>访问可见性</strong>就是封装的一种体现。所谓封装，就是将私有部分放在里面，不让别人去看，而公有部分可以直接进行访问。</p>
<blockquote>
<p>具体介绍：</p>
</blockquote>
<p><strong>先看两个定义</strong>：</p>
<ul>
<li>私有属性：<strong>类方法</strong>可以访问，<strong>对象</strong>不可直接访问。以<code>两个下划线开头</code>进行标识。</li>
<li>公有属性：可以直接进行访问。</li>
</ul>
<p><strong>来看一个例子</strong>：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887262.png"></p>
<p>在上例子里，我们将name属性进行了变化，将其变成<strong>私有属性</strong>，则在外部直接使用<strong>对象就无法访问</strong>这个属性。<br>而使用<code>print(s.get_name())</code>可以进行访问，这是因为<code>get_name</code>是<strong>类里定义</strong>的方法，可以访问私有属性。</p>
<blockquote>
<p>再进一步：如何访问私有属性呢？</p>
</blockquote>
<p>答案上面已经给出了：在类中定义特定的方法，进行私有属性的访问。<br>同时，利用类方法，我们还可以实现对私有属性的有条件赋值。具体见下图：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):</span><br><span class="line">        self.__name = name</span><br><span class="line">        self.age = age</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__name</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_name</span>(<span class="params">self,name1</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(name1)&gt;<span class="number">2</span>:</span><br><span class="line">            self.__name = name1</span><br><span class="line">s = Person(<span class="string">&quot;xyq&quot;</span>,<span class="number">21</span>)</span><br><span class="line"></span><br><span class="line">s.set_name(<span class="string">&quot;xyz&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(s.get_name())</span><br></pre></td></tr></table></figure>
<p><strong>运行结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887172.png"></p>
<p>我们在类中定义了一个新的方法：<code>set_name(self,name1)</code>,其中self为<strong>对象本身</strong>，用于对私有属性进行访问，name1是<strong>传递的参数</strong>。</p>
<p><strong>注意点</strong>：<br>在包含类和对象的代码里，<strong>外部调用类方法</strong>需要加上<strong>对象名前缀</strong>，内部方法<strong>访问属性</strong>，需要加上<strong>self前缀</strong>。</p>
<h2 id="7-1-3-类属性和实例属性"><a href="#7-1-3-类属性和实例属性" class="headerlink" title="7.1.3 类属性和实例属性"></a>7.1.3 类属性和实例属性</h2><blockquote>
<p>定义引入：</p>
</blockquote>
<ul>
<li>类属性：存储与类空间，所有实例对象共有的。</li>
<li>实例属性：存储在实例空间，是单个实例对象独有的。</li>
</ul>
<p><strong>注</strong>：实例对象和类有各自独立的存储空间。但是优先级：实例空间&gt;类空间&gt;基类空间。</p>
<blockquote>
<p>具体示例：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887256.png"><br>实例属性的查找优先级高于类属性。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887259.png"><br>删除了实例属性不会对类属性产生影响。</p>
<p><strong>注意点</strong>：<br>1、在<code>__init__函数</code>里定义的属性为<strong>实例属性</strong>，因为是根据传递的参数来进行赋值的。<br>2、要分清类和实例。可以将类看成一个很大的模具，<strong>单独占有空间</strong>；而实例是一个个通过模具制成的物品，这些物品也是有<strong>单独的存储空间</strong>。</p>
<h1 id="7-2-方法"><a href="#7-2-方法" class="headerlink" title="7.2 方法"></a>7.2 方法</h1><blockquote>
<p>先来思维导图：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887258.png"></p>
<h2 id="7-2-1-构造方法和析构方法"><a href="#7-2-1-构造方法和析构方法" class="headerlink" title="7.2.1 构造方法和析构方法"></a>7.2.1 构造方法和析构方法</h2><blockquote>
<p>定义引入：</p>
</blockquote>
<ul>
<li>构造方法：即<code>__init__方法</code>，负责对象的<strong>初始化</strong>，也就是对象状态的更新和属性的设置，<strong>无返回值</strong>。</li>
<li>析构方法：即<code>__del__方法</code>，负责对象的<strong>回收</strong>和内存空间的<strong>释放</strong>。</li>
</ul>
<blockquote>
<p>先来构造方法：<code>__init__</code></p>
</blockquote>
<p>这个方法是python的<strong>内置特殊方法</strong>。这个方法使用时需要<strong>注意以下几点</strong>：</p>
<ul>
<li>名字不可变，需为init。</li>
<li>不可以有返回值。</li>
<li>只会调用一次，进行对象的初始化</li>
</ul>
<p><strong>本质</strong>：就是<strong>一个函数</strong>，通过传递的参数实现对实例属性的赋值。（函数的<strong>参数相关内容</strong>可以适用）<br>下面我们通过几个例子来看一下构造函数的使用：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887260.png" alt="1"><br>使用了默认值参数进行函数的调用。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887279.png" alt="2"><br>这里使用了<strong>关键字参数</strong>，将传递的参数封装为一个<strong>字典</strong>。通过<code>kw.get(key)</code>进行属性的赋值。</p>
<blockquote>
<p>再来看一下析构函数：<code>__del__</code></p>
</blockquote>
<p>这个函数是程序<strong>自动执行的</strong>，不需要定义。其作用就是当程序结束后将对象的<strong>空间进行销毁</strong>。<br>当使用<code>del 对象名</code>删除一个实例时，也是使用了析构函数。</p>
<p><strong>注</strong>：当一个对象<strong>被引用时</strong>，使用del不会销毁此对象的存储空间。</p>
<h2 id="7-2-2-类方法和静态方法"><a href="#7-2-2-类方法和静态方法" class="headerlink" title="7.2.2 类方法和静态方法"></a>7.2.2 类方法和静态方法</h2><blockquote>
<p>定义引入：</p>
</blockquote>
<ul>
<li>静态方法：即传递的参数<strong>与某个对象实例无关</strong>，通过<code>类名.静态方法(参数...)</code>即可进行调用，<strong>不需要对象前缀</strong>。</li>
<li>类方法：在对象<strong>初始化之前</strong>进行的方法，是对当前类相关信息的获取。通过<code>对象1 = 类名.类方法()</code>进行对象的获取和初始化。</li>
</ul>
<blockquote>
<p>先来看静态方法：</p>
</blockquote>
<p><strong>语法格式</strong>：在函数定义上方使用修饰符	 <code>@staticmethod</code>进行标识，而后进行方法的定义。</p>
<p><strong>代码实例</strong>：（三角形验证）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Sanjiao</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,a,b,c</span>):</span><br><span class="line">        self.a = a</span><br><span class="line">        self.b = b</span><br><span class="line">        self.c = c</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Pand</span>(<span class="params">a,b,c</span>):</span><br><span class="line">        <span class="keyword">return</span> a+b &gt;c <span class="keyword">and</span> b+c &gt; a <span class="keyword">and</span> a+c &gt; b</span><br><span class="line">    [<span class="number">219</span>:<span class="number">0</span>]行数：<span class="number">220</span> 长度：<span class="number">4096</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Get_c</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.a+self.b+self.c</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> Sanjiao.Pand(<span class="number">1</span>,<span class="number">4</span>,<span class="number">4</span>):</span><br><span class="line">    s = Sanjiao(<span class="number">1</span>,<span class="number">4</span>,<span class="number">4</span>)</span><br><span class="line">    <span class="built_in">print</span>(s.Get_c())</span><br><span class="line">    </span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;wrong !&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>在上面的代码里，使用到了静态方法，其作用就是在<strong>对象建立之前</strong>调用此方法判断数据是否合格。</p>
<blockquote>
<p>再来看一下类方法</p>
</blockquote>
<p><strong>语法格式</strong>：<br>1、使用修饰符 <code>@classmethod</code>进行标识<br>2、在定义时默认参数为<code>cls</code><br>3、在调用时使用 <code>对象名 = 类名.类方法(参数)</code>的方法进行对象的创建。(对象建立时的参数与正常建立时一样，不受类方法的影响)</p>
<h2 id="7-2-2-property装饰器"><a href="#7-2-2-property装饰器" class="headerlink" title="7.2.2 @property装饰器"></a>7.2.2 @property装饰器</h2><p><strong>作用</strong>：将一个<strong>属性</strong>变成<strong>方法</strong>进行调用</p>
<p><strong>语法格式</strong>：以<code>@property </code>进行标识，以<strong>属性名作为方法名</strong>进行定义，以<code>对象.方法名=xx</code>进行调用</p>
<p>来看一个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):</span><br><span class="line">        self.__name = name</span><br><span class="line">        self.__age = age</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__name</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @name.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">self,ant</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(ant)&gt;<span class="number">2</span>:</span><br><span class="line">            self.__name = ant</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;wrong ant!&quot;</span>)</span><br><span class="line">        </span><br><span class="line">me = Person(<span class="string">&quot;xyq&quot;</span>,<span class="number">21</span>)</span><br><span class="line"><span class="built_in">print</span>(me.name)</span><br><span class="line">me.name = <span class="string">&#x27;xyz&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(me.name)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>运行结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887289.png"></p>
<p><strong>注释</strong>：<br>1、上例我们先使用了修饰器<code>@perproty</code>将name方法定义为了<strong>一个属性</strong>，其作用就是返回__name的值，可以<strong>用于获取值</strong>；<br>2、下面使用<code>@name.setter</code>进行修饰，其作用就是可以通过访问属性的形式进行<strong>属性的赋值</strong>。<br>3、通过修饰器，可以使私有属性得以直接访问与赋值，同时还可以<strong>保证程序的健壮性</strong>。</p>
<h1 id="7-3-继承和多态"><a href="#7-3-继承和多态" class="headerlink" title="7.3 继承和多态"></a>7.3 继承和多态</h1><blockquote>
<p>先放思维导图：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887271.png"></p>
<h2 id="7-3-1-继承"><a href="#7-3-1-继承" class="headerlink" title="7.3.1 继承"></a>7.3.1 继承</h2><blockquote>
<p>定义引入：</p>
</blockquote>
<p>继承的目的是为了<strong>实现已有类的扩充</strong>。</p>
<ul>
<li>父类（基类）：被继承的类。</li>
<li>子类（派生类）：创建的新的类。</li>
<li>重写：类在继承父类已有的方法后，可以对父类已有的方法给出<strong>新的实现版本</strong>，此操作称为重写。<br>子类除了继承父类提供的属性和方法，还定义了自己<strong>特有的属性和方法</strong>，所以子类比父类拥有<strong>更多的功能</strong>。</li>
</ul>
<blockquote>
<p>看一个例子：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887280.png"></p>
<p>football<strong>继承了</strong>ball类，并对ball类中的<strong>show方法</strong>进行了<strong>重写</strong>。</p>
<hr>
<p>再看一个例子：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887261.png"></p>
<p>这里在子类中调用了<strong>父类的方法</strong>，其格式为：<code>类名.方法名（self）</code>。一般调用方法是不需要传递self，但是这里需要。</p>
<blockquote>
<p>super()使用父类的构造方法</p>
</blockquote>
<p><strong>直接上图</strong>:<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887272.png"></p>
<p>在子类的构造方法里使用了<strong>父类的构造方法</strong>，其格式为：<code>super().__init__(name)</code>,可以把super()看成是父类。<br>当然，通过<code>父类.__init__(self,name)</code>方法也可以进行调用，不过需要<strong>显式的</strong>传递self参数。</p>
<h2 id="7-3-2-MixIn–混入功能"><a href="#7-3-2-MixIn–混入功能" class="headerlink" title="7.3.2 MixIn–混入功能"></a>7.3.2 MixIn–混入功能</h2><blockquote>
<p>定义介绍：</p>
</blockquote>
<p><strong>Mixin</strong> ：通常是<strong>实现某种功能的类</strong>，用于被其他子类继承，扩充子类的功能。</p>
<blockquote>
<p>具体例子：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">repMixin</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> (<span class="string">&quot;[%s,%s]&quot;</span>%(self.name,self.age))</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">get_set_Mixin</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self,key</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__dict__.get(key)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__setitem__</span>(<span class="params">self,key</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__dict__.<span class="built_in">set</span>(key,value)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">person</span>(repMixin,get_set_Mixin):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">me = person(<span class="string">&quot;xyq&quot;</span>,<span class="number">21</span>)</span><br><span class="line"><span class="built_in">print</span>(me)</span><br><span class="line"><span class="built_in">print</span>(me[<span class="string">&#x27;name&#x27;</span>],me[<span class="string">&#x27;age&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887273.png"></p>
<p>如上例子，<code>person子类</code>继承了两个<strong>混合类</strong>，从而在输出时实现了多种功能。</p>
<blockquote>
<p>关于混合类的一个提醒：</p>
</blockquote>
<ol>
<li>Mixin混合类<strong>自身不能实例化</strong>，仅可用于被子类继承。</li>
<li>Mixin实现的功能是通用的，单一的，<strong>按需继承</strong>。</li>
<li>Mixin只能用于<strong>扩展子类</strong>，不能影响<strong>子类的主要功能</strong>。如果对主要功能造成影响，就是基类了，不要使用Mixin命名。</li>
</ol>
<h2 id="7-3-3-多态"><a href="#7-3-3-多态" class="headerlink" title="7.3.3 多态"></a>7.3.3 多态</h2><blockquote>
<p>概念引入：</p>
</blockquote>
<p><strong>何为多态</strong>？我们前面介绍了方法的重写，即在子类中对父类的方法进行重新编写，使得<strong>不同的子类对象表现出不同的行为</strong>，这就是多态。</p>
<p><strong>看一个例子</strong>:<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887275.png"></p>
<p>上例就是<strong>多态</strong>的一个体现。<br>同时，对于不同对象的数据类型，我们可通过上例得到答案：<strong>子类的数据类型与父类相同</strong>，但是<strong>父类对应的对象的数据类型与其子类对应的对象的数据类型不同</strong>。</p>
<blockquote>
<p>开闭原则</p>
</blockquote>
<ul>
<li>开：对<strong>扩展开放</strong>，即允许新增ball的子类</li>
<li>闭：对<strong>修改封闭</strong>，即不需要对ball类做修改就可实现不同的形式。</li>
</ul>
<h1 id="7-4-动态属性和slots"><a href="#7-4-动态属性和slots" class="headerlink" title="7.4 动态属性和slots"></a>7.4 动态属性和slots</h1><p><strong>一个例子</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887276.png"></p>
<p><code>__slots__</code>是一个<strong>特殊的变量</strong>，可以看作<strong>一个卡槽</strong>，只有在这个卡槽里的属性才可以<strong>进行添加</strong>。</p>
<p><strong>Tips</strong>:slots只是限制了实例属性，对<strong>类属性</strong>不进行限制。<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887277.png"></p>
<h1 id="7-5-定制类"><a href="#7-5-定制类" class="headerlink" title="7.5 定制类"></a>7.5 定制类</h1><blockquote>
<p>老规矩，先上思维导图</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887281.png"></p>
<h2 id="7-5-1-python中的特殊方法"><a href="#7-5-1-python中的特殊方法" class="headerlink" title="7.5.1 python中的特殊方法"></a>7.5.1 python中的特殊方法</h2><p>在python里，有些方法<strong>前后都添加了下划线</strong>，这些方法就是<strong>特殊方法</strong>。我们可以对特殊方法进行重写，扩展类的功能。</p>
<p>下面我们就介绍一些常用的特殊方法：</p>
<blockquote>
<p>1、<code>__str__方法和__repr__方法</code></p>
</blockquote>
<p>使得输出的格式更加好看。</p>
<p>先来<strong>介绍一些上面的两个方法</strong>:</p>
<ul>
<li><code>__str__方法</code>：当我们使用<code>print(对象1)</code>时调用的就是这个方法。输出用户看到的字符串。</li>
<li><code>__repr__方法</code>：当我们直接使用<code>对象1</code>时，调用的是这个方法。输出程序开发人员看到的字符串。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887278.png"></p>
<hr>
<p>所以我们可以<strong>对上方法进行重写</strong>，输出想要的格式。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887306.png"></p>
<p>也可以使用<code>__repr__ = __str__</code>简化</p>
<blockquote>
<p>2、<code>__getattr__</code>方法</p>
</blockquote>
<p>这个方法的作用就是获取某一个属性的值。也就是<code>对象.属性</code></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887307.png"></p>
<p>与这个<strong>方法类似</strong>的还有：</p>
<ul>
<li><code>__hasattr__</code>：<strong>判断</strong>是否有某属性</li>
<li><code>__setattr__</code>：<strong>修改</strong>一个属性</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887336.png"></p>
<p>所以我们可以重写这个方法<strong>把报错去掉</strong>：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887337.png"></p>
<p>最后输出的<strong>None</strong>是因为此方法有<strong>默认的返回值</strong>。</p>
<blockquote>
<p>3、<code>__call__方法</code></p>
</blockquote>
<p>这个方法的作用是将一个对象<strong>变为可调用对象</strong></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887338.png"></p>
<blockquote>
<p>4、迭代器对象</p>
</blockquote>
<p>所谓的迭代器，就是满足<code>__iter__方法</code>和<code>__next__方法</code>的对象。所以我们要将一个对象变成迭代器，就要重写这两个方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">fib</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,num</span>):</span><br><span class="line">        self.x = <span class="number">0</span></span><br><span class="line">        self.y = <span class="number">1</span></span><br><span class="line">        self.num = num</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> self.num == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration()</span><br><span class="line">        <span class="keyword">else</span> :</span><br><span class="line">            self.x,self.y = self.y,self.x+self.y</span><br><span class="line">            self.num -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> self.x</span><br><span class="line"></span><br><span class="line">f = fib(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> f:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887340.png"></p>
<p>重写这两个方法后就对象就<strong>变成了迭代器</strong>，使用next的输出方法。</p>
<blockquote>
<p>5、其他特殊方法</p>
</blockquote>
<p>见链接：<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.8/reference/datamodel.html#special-method-names">https://docs.python.org/zh-cn/3.8/reference/datamodel.html#special-method-names</a></p>
<h2 id="7-5-2-重载运算符"><a href="#7-5-2-重载运算符" class="headerlink" title="7.5.2 重载运算符"></a>7.5.2 重载运算符</h2><p>运算符的本质就是第一个操作数所在的命名空间的特殊方法。例如：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887341.png"></p>
<p>加法运算符就是上图所示的一个方法。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887343.png"></p>
<p>上例就是在<code>int()</code>这个<strong>命名空间</strong>里调用了<code>__add__方法</code>。</p>
<h1 id="7-6-综合实例：有理数类的实现"><a href="#7-6-综合实例：有理数类的实现" class="headerlink" title="7.6 综合实例：有理数类的实现"></a>7.6 综合实例：有理数类的实现</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fraction</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, high=<span class="number">0</span>, down=<span class="number">1</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        一个初始化函数。我们需要实现有理数的判别与化简。</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> down == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ZeroDivisionError(<span class="string">&quot;down cannot be 0!&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> high == <span class="number">0</span>:</span><br><span class="line">            self._high = <span class="number">0</span></span><br><span class="line">            self._down = <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> (high &gt; <span class="number">0</span> <span class="keyword">and</span> down &lt; <span class="number">0</span>) <span class="keyword">or</span> (high &lt; <span class="number">0</span> <span class="keyword">and</span> down &gt; <span class="number">0</span>):</span><br><span class="line">                flag = -<span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                flag = <span class="number">1</span></span><br><span class="line">            a = <span class="built_in">abs</span>(high)</span><br><span class="line">            b = <span class="built_in">abs</span>(down)</span><br><span class="line">            <span class="keyword">while</span> a % b != <span class="number">0</span>:</span><br><span class="line">                ta = a</span><br><span class="line">                tb = b</span><br><span class="line">                a = tb</span><br><span class="line">                b = ta % tb</span><br><span class="line">            self._high = <span class="built_in">abs</span>(high) // b * flag</span><br><span class="line">            self._down = <span class="built_in">abs</span>(down) // b</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self, other</span>):</span><br><span class="line">        high1 = (self._high * other._down) + (self._down * other._high)</span><br><span class="line">        down1 = self._down * other._down</span><br><span class="line">        <span class="keyword">return</span> Fraction(high1, down1)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__sub__</span>(<span class="params">self, other</span>):</span><br><span class="line">        high1 = (self._high * other._down) - (self._down * other._high)</span><br><span class="line">        down1 = self._down * other._down</span><br><span class="line">        <span class="keyword">return</span> Fraction(high1, down1)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> (self._high == other._high <span class="keyword">and</span> self._down == other._down)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__lt__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> (self._high * other._down &lt; self._down * other._high)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">str</span>(self._high) + <span class="string">&#x27;/&#x27;</span> + <span class="built_in">str</span>(self._down))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">b = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"></span><br><span class="line">frac1 = Fraction(a, b)</span><br><span class="line"><span class="built_in">print</span>(frac1)</span><br><span class="line">c = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">d = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">frac2 = Fraction(c, d)</span><br><span class="line"><span class="built_in">print</span>(frac1 &lt; frac2)</span><br><span class="line"><span class="built_in">print</span>(frac1 == frac2)</span><br><span class="line"></span><br><span class="line">res_add = frac1 + frac2</span><br><span class="line">res_sub = frac1 - frac2</span><br><span class="line"><span class="built_in">print</span>(res_add)</span><br><span class="line"><span class="built_in">print</span>(res_sub)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>注意点</strong>：<br>1、对于分子分母的<strong>化简</strong>要理清原理。<br>2、对于加减比较等<strong>运算需要在类里进行定义</strong>。（具体的原理在上小节）</p>
<h1 id="7-7-练习补充"><a href="#7-7-练习补充" class="headerlink" title="7.7 练习补充"></a>7.7 练习补充</h1><blockquote>
<p>内容来自实训和测试</p>
</blockquote>
<h2 id="测试部分"><a href="#测试部分" class="headerlink" title="测试部分"></a>测试部分</h2><p>1、<code>__init__方法</code></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887342.png"></p>
<p>2、多态辨析</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887344.png"></p>
<p>3、静态方法<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887345.png"></p>
<p>4、类方法</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887346.png"></p>
<hr>
<p>5、析构函数的调用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Register</span>:  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, **kwargs</span>):  </span><br><span class="line">        self._age = kwargs.get(<span class="string">&#x27;age&#x27;</span>)  </span><br><span class="line">        self._name = kwargs.get(<span class="string">&#x27;name&#x27;</span>)  </span><br><span class="line">        self._sex = kwargs.get(<span class="string">&#x27;sex&#x27;</span>)  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_age_value</span>(<span class="params">self</span>):  </span><br><span class="line">        <span class="keyword">return</span> self._age  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_name_value</span>(<span class="params">self</span>):  </span><br><span class="line">        <span class="keyword">return</span> self._name  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_sex_value</span>(<span class="params">se1f</span>) :  </span><br><span class="line">        <span class="keyword">return</span> self._sex  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__del__</span>(<span class="params">self</span>):  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;调用了一次析构函数&#x27;</span>)  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():  </span><br><span class="line">    wang = Register(age = <span class="number">8</span>, name=<span class="string">&#x27;wang&#x27;</span>, sex=<span class="string">&#x27;male&#x27;</span>)  </span><br><span class="line">    WANG = wang  </span><br><span class="line">    <span class="keyword">del</span> wang  </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:  </span><br><span class="line">    main()  </span><br></pre></td></tr></table></figure>
<p>只是调用一个析构函数。</p>
<hr>
<p>6、Mixin混合类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ReprMixin</span>:   </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):  </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;[%s, %s, %s]&#x27;</span> %(self.name, self.gender, self.age)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MappingMixin</span>:  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, key</span>):  </span><br><span class="line">        <span class="keyword">return</span> self.__dict__.get(key)  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__setitem__</span>(<span class="params">self, key, value</span>):  </span><br><span class="line">        <span class="keyword">return</span> self.__dict__.<span class="built_in">set</span>(key, value)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Teacher</span>(<span class="title class_ inherited__">ReprMixin</span>):  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, gender, age, **kwargs</span>):  </span><br><span class="line">        self.name = name  </span><br><span class="line">        self.gender = gender  </span><br><span class="line">        self.age = age  </span><br><span class="line">        self.zhicheng = kwargs.get(<span class="string">&#x27;zhicheng&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(<span class="title class_ inherited__">MappingMixin</span>):  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, gender, age, **kwargs</span>):  </span><br><span class="line">        self.name = name  </span><br><span class="line">        self.gender = gender  </span><br><span class="line">        self.age = age  </span><br><span class="line">        self.num = kwargs.get(<span class="string">&#x27;num&#x27;</span>)</span><br><span class="line">t = Teacher(<span class="string">&#x27;教师甲&#x27;</span>, <span class="string">&#x27;female&#x27;</span>, <span class="string">&#x27;48&#x27;</span>, zhicheng = <span class="string">&#x27;副教授&#x27;</span>)  </span><br><span class="line">s = Student(<span class="string">&#x27;学生甲&#x27;</span>, <span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;18&#x27;</span>, num =<span class="number">20180019</span>)  </span><br><span class="line"><span class="built_in">print</span>(t, s)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887347.png" alt="enter description here"></p>
<p><strong>原因</strong>：<br>t对象的类与s对象的类继承的类不同。t可以按照上重写的方式输出，而s可以使用字典的输出方法。</p>
<h2 id="实训项目"><a href="#实训项目" class="headerlink" title="实训项目"></a>实训项目</h2><blockquote>
<p>1、工资问题</p>
</blockquote>
<p><code>from abc import ABCMeta, abstractmethod</code></p>
<p><a target="_blank" rel="noopener" href="https://python3-cookbook.readthedocs.io/zh_CN/latest/c08/p12_define_interface_or_abstract_base_class.html">上模块介绍见此</a></p>
<p><strong>代码1</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">某公司有三种类型的员工 分别是部门经理、程序员和销售员</span></span><br><span class="line"><span class="string">需要设计一个工资结算系统 根据提供的员工信息来计算月薪</span></span><br><span class="line"><span class="string">部门经理的月薪是每月固定15000元</span></span><br><span class="line"><span class="string">程序员的月薪按本月工作时间计算 每小时150元</span></span><br><span class="line"><span class="string">销售员的月薪是1200元的底薪加上销售额5%的提成</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta, abstractmethod</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span>(<span class="built_in">object</span>, metaclass=ABCMeta):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;员工&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        初始化方法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :param name: 姓名</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">        <span class="comment"># *************begin************#</span></span><br><span class="line">        self._name = name</span><br><span class="line">        <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;返回姓名&#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">        <span class="comment"># *************begin************#</span></span><br><span class="line">        <span class="keyword">return</span> self._name</span><br><span class="line">        <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_salary</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        获得月薪</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :return: 月薪</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Manager</span>(<span class="title class_ inherited__">Employee</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;部门经理&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_salary</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">15000.0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Programmer</span>(<span class="title class_ inherited__">Employee</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;程序员&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, working_hour=<span class="number">0</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">              初始化方法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">              :param name: 姓名</span></span><br><span class="line"><span class="string">              :param working_hour：工作时长</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">              &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">        <span class="comment"># *************begin************#</span></span><br><span class="line">        <span class="built_in">super</span>().__init__(name)</span><br><span class="line">        self._working_hour = working_hour</span><br><span class="line">        <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">working_hour</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;返回工作时长&#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">        <span class="comment"># *************begin************#</span></span><br><span class="line">        <span class="keyword">return</span> self._working_hour</span><br><span class="line">        <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @working_hour.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">working_hour</span>(<span class="params">self, working_hour</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        设置工作时长</span></span><br><span class="line"><span class="string">        :param working_hour:工作时长</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">        <span class="comment"># *************begin************#</span></span><br><span class="line">        self._working_hour = working_hour <span class="keyword">if</span> working_hour &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_salary</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;返回程序员所得工资&#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">        <span class="comment"># *************begin************#</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">150.0</span>*self._working_hour</span><br><span class="line">        <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Salesman</span>(<span class="title class_ inherited__">Employee</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;销售员&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, sales=<span class="number">0</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                   初始化方法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                   :param name: 姓名</span></span><br><span class="line"><span class="string">                   :param sales：销售额</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                   &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">        <span class="comment"># *************begin************#</span></span><br><span class="line">        <span class="built_in">super</span>().__init__(name)</span><br><span class="line">        self._sales = sales</span><br><span class="line">        <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sales</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;返回销售额&#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">        <span class="comment"># *************begin************#</span></span><br><span class="line">        <span class="keyword">return</span> self._sales</span><br><span class="line">        <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @sales.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">sales</span>(<span class="params">self, sales</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        设置销售额</span></span><br><span class="line"><span class="string">        :param sales:销售额</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">        <span class="comment"># *************begin************#</span></span><br><span class="line">        self._sales = sales <span class="keyword">if</span> sales&gt;<span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_salary</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;返回销售员所得工资&#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">        <span class="comment"># *************begin************#</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1200</span>+<span class="number">0.05</span>*self._sales</span><br><span class="line">        <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>代码2</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> main <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta, abstractmethod</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    emps = [</span><br><span class="line">        Manager(<span class="string">&#x27;刘备&#x27;</span>), Programmer(<span class="string">&#x27;诸葛亮&#x27;</span>),</span><br><span class="line">        Manager(<span class="string">&#x27;曹操&#x27;</span>), Salesman(<span class="string">&#x27;荀彧&#x27;</span>),</span><br><span class="line">        Salesman(<span class="string">&#x27;吕布&#x27;</span>), Programmer(<span class="string">&#x27;张辽&#x27;</span>),</span><br><span class="line">        Programmer(<span class="string">&#x27;赵云&#x27;</span>)</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">for</span> emp <span class="keyword">in</span> emps:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(emp, Programmer):</span><br><span class="line">            emp.working_hour = <span class="number">7</span></span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">isinstance</span>(emp, Salesman):</span><br><span class="line">            emp.sales = <span class="number">100</span></span><br><span class="line">        <span class="comment"># 同样是接收get_salary这个消息但是不同的员工表现出了不同的行为(多态)</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s本月工资为: ￥%s元&#x27;</span> %</span><br><span class="line">              (emp.name, emp.get_salary()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648348887362.png"></p>
<p><strong>注意点：</strong><br>1、<strong>抽象基类</strong>的使用<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649562238890.png"><br>将员工类定义为抽象基类，此基类无法被实例化，但是可以被继承。同时使用装饰器规定了抽象方法， 其作用是继承此基类的子类必须去实现这个方法，否则会报错。<br>通过<code>from abc import ABCMeta, abstractmethod</code>导入模块。</p>
<blockquote>
<p>2、设计LFU缓存类</p>
</blockquote>
<p>题目介绍：<br>缓存算法广泛存在于各种软件中，其中有一些著名的缓存方法，如LFU替换算法，LFU（Least Frequently Used）算法根据数据的历史访问频率来淘汰数据，其核心思想是“如果数据过去被访问多次，那么将来被访问的频率也更高”。LFU实现方式是这个缓存算法使用一个计数器来记录条目被访问的频率。通过使用LFU缓存算法，最低访问数的条目首先被移除。LFU的每个数据块都有一个引用计数，所有数据块按照引用计数排序，具有相同引用计数的数据块则按照时间排序。</p>
<p>LFU缓存的实现：LFU(Least Frequently Used)是根据频率维度来选择将要淘汰的元素，即删除访问频率最低的元素。如果两个元素的访问频率相同，则淘汰最久没被访问的元素。那么LFU淘汰的时候会选择两个维度，先比较频率，选择访问频率最小的元素；如果频率相同，则按时间维度淘汰掉最久远的那个元素。</p>
<p>因此，LFU可以通过两个哈希表再加上多个双链表来实现：<br>第一张哈希表是key-value的哈希表，如下图所示。其中key就是输入的key。value是一个节点对象。这个节点对象Node包含了key，value，以及频率，这个Node又会出现在第二个哈希表的value中。Node中重复包含了key，这是因为某些情况下我们不是通过key-value哈希表拿到Node的，而是通过其他方式获得了Node，之后需要用Node中的key去key-value哈希表中做一些操作，所以Node中包含了一些冗余信息。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648555550861.png"></p>
<p>第二张哈希表是频率哈希表，如下图所示。这张哈希表中的key是频率，也就是元素被访问的频率(被访问了1次，被访问了两次等)，它的value是一个双向链表，图一中的Node对象，在图二中同样存在，图二中的Node其实是双向链表中的一个节点。图一中的Node对象中包含了一个冗余的key，其实它还包含了一个冗余的频率值，因为某些情况下，我们需要通过Node对象中的频率值，去频率哈希表中做查找，所以也需要一个冗余的频率值。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648555573227.png"></p>
<p>因此，我们将两个哈希表整合可以发现，整个完整的LFU cache结构如下图所示。<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648555591078.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648555605362.png"></p>
<p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> methodcaller</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    双链表中的链表节点对象</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, key=<span class="literal">None</span>, value=<span class="literal">None</span>, freq=<span class="number">0</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            key:对应输入的key</span></span><br><span class="line"><span class="string">            value:对应输入的value</span></span><br><span class="line"><span class="string">            freq:被访问的频率</span></span><br><span class="line"><span class="string">            pre:指向前一个节点的指针</span></span><br><span class="line"><span class="string">            next:指向后一个节点的指针</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.key = key</span><br><span class="line">        self.value = value</span><br><span class="line">        self.freq = freq</span><br><span class="line">        self.pre = <span class="literal">None</span></span><br><span class="line">        self.<span class="built_in">next</span> = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LinkedList</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    自定义的双向链表</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            __head:双向链表的头结点</span></span><br><span class="line"><span class="string">            __tail:双向链表的尾节点</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.__head = Node()</span><br><span class="line">        self.__tail = Node()</span><br><span class="line">        self.__head.<span class="built_in">next</span> = self.__tail</span><br><span class="line">        self.__tail.pre = self.__head</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insertFirst</span>(<span class="params">self, node</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        将指定的节点插入到链表的第一个位置</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            node:将要插入的节点</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        node.<span class="built_in">next</span> = self.__head.<span class="built_in">next</span></span><br><span class="line">        self.__head.<span class="built_in">next</span>.pre = node</span><br><span class="line">        self.__head.<span class="built_in">next</span> = node</span><br><span class="line">        node.pre = self.__head</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self, node</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        从链表中删除指定的节点</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            node:将要删除的节点</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self.__head.<span class="built_in">next</span> == self.__tail:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        node.pre.<span class="built_in">next</span> = node.<span class="built_in">next</span></span><br><span class="line">        node.<span class="built_in">next</span>.pre = node.pre</span><br><span class="line">        node.<span class="built_in">next</span> = <span class="literal">None</span></span><br><span class="line">        node.pre = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getLast</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        从链表中获取最后一个节点</span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            双向链表中的最后一个节点，如果是空链表则返回None</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self.__head.<span class="built_in">next</span> == self.__tail:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">return</span> self.__tail.pre</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">isEmpty</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        判断链表是否为空，除了head和tail没有其他节点即为空链表</span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            链表不空返回True，否则返回False</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.__head.<span class="built_in">next</span> == self.__tail</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LFUCache</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    自定义的LFU缓存</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, capacity</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            __capacity:缓存的最大容量</span></span><br><span class="line"><span class="string">            __keyMap: key-&gt;Node 这种结构的字典</span></span><br><span class="line"><span class="string">            __freqMap:freq-&gt;LinkedList 这种结构的字典</span></span><br><span class="line"><span class="string">            __minFreq:记录缓存中最低频率</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.__capacity = capacity</span><br><span class="line">        self.__keyMap = <span class="built_in">dict</span>()</span><br><span class="line">        self.__freqMap = <span class="built_in">dict</span>()</span><br><span class="line">        self.__minFreq = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, key</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        获取一个元素，如果key不存在则返回-1，否则返回对应的value</span></span><br><span class="line"><span class="string">        同时更新被访问元素的频率</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            key:要查找的关键字</span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            如果没找到则返回-1，否则返回对应的value</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment">#你的代码在这里#</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> self.__keyMap:</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            o_node = self.__keyMap.get(key)</span><br><span class="line">            self.__increment(o_node)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> o_node.value</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">put</span>(<span class="params">self, key, value</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        插入指定的key和value，如果key存在则更新value，同时更新频率</span></span><br><span class="line"><span class="string">        如果key不存并且缓存满了，则删除频率最低的元素，并插入新元素</span></span><br><span class="line"><span class="string">        否则，直接插入新元素</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            key:要插入的关键字</span></span><br><span class="line"><span class="string">            value:要插入的值</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment">#你的代码在这里#</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.__keyMap:</span><br><span class="line">            o_node = self.__keyMap.get(key)</span><br><span class="line">            o_node.value = value</span><br><span class="line">            self.__increment(o_node)</span><br><span class="line"></span><br><span class="line">            self.__deleteNode(o_node)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(self.__keyMap.keys())==self.__capacity:</span><br><span class="line">                self.__removeMinFreqElement()</span><br><span class="line">                n_node=Node(key, value,freq=<span class="number">1</span>)</span><br><span class="line">                self.__keyMap[key] = n_node</span><br><span class="line">                self.__increment(n_node,is_new_node=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                n_node = Node(key, value, freq=<span class="number">1</span>)</span><br><span class="line">                self.__keyMap[key] = n_node</span><br><span class="line">                self.__increment(n_node, is_new_node=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__increment</span>(<span class="params">self, node, is_new_node=<span class="literal">False</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        更新节点的访问频率</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            node:要更新的节点</span></span><br><span class="line"><span class="string">            is_new_node:是否是新节点，新插入的节点和非新插入节点更新逻辑不同</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> is_new_node:</span><br><span class="line">            self.__minFreq = <span class="number">1</span></span><br><span class="line">            self.__setDefaultLinkedList(node)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.__deleteNode(node)</span><br><span class="line">            node.freq += <span class="number">1</span></span><br><span class="line">            self.__setDefaultLinkedList(node)</span><br><span class="line">            <span class="keyword">if</span> self.__minFreq <span class="keyword">not</span> <span class="keyword">in</span> self.__freqMap:</span><br><span class="line">                self.__minFreq += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__setDefaultLinkedList</span>(<span class="params">self, node</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        根据节点的频率，插入到对应的LinkedList中，如果LinkedList不存在则创建</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            node:将要插入到LinkedList的节点</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> node.freq <span class="keyword">not</span> <span class="keyword">in</span> self.__freqMap:</span><br><span class="line">            self.__freqMap[node.freq] = LinkedList()</span><br><span class="line">        linkedList = self.__freqMap[node.freq]</span><br><span class="line">        linkedList.insertFirst(node)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__deleteNode</span>(<span class="params">self, node</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        删除指定的节点，如果节点删除后，对应的双链表为空，则从__freqMap中删除这个链表</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            node:将要删除的节点</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> node.freq <span class="keyword">not</span> <span class="keyword">in</span> self.__freqMap:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        linkedList = self.__freqMap[node.freq]</span><br><span class="line">        freq = node.freq</span><br><span class="line">        linkedList.delete(node)</span><br><span class="line">        <span class="keyword">if</span> linkedList.isEmpty():</span><br><span class="line">            <span class="keyword">del</span> self.__freqMap[freq]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__removeMinFreqElement</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        删除频率最低的元素，从__freqMap和__keyMap中都要删除这个节点，</span></span><br><span class="line"><span class="string">        如果节点删除后对应的链表为空，则要从__freqMap中删除这个链表</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        linkedList = self.__freqMap[self.__minFreq]</span><br><span class="line">        node = linkedList.getLast()</span><br><span class="line">        linkedList.delete(node)</span><br><span class="line">        <span class="keyword">del</span> self.__keyMap[node.key]</span><br><span class="line">        <span class="keyword">if</span> linkedList.isEmpty():</span><br><span class="line">            <span class="keyword">del</span> self.__freqMap[node.freq]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    operation = <span class="built_in">eval</span>(<span class="built_in">input</span>())</span><br><span class="line">    data = <span class="built_in">eval</span>(<span class="built_in">input</span>())</span><br><span class="line">    cache = <span class="built_in">eval</span>(<span class="string">&quot;&#123;&#125;(&#123;&#125;)&quot;</span>.<span class="built_in">format</span>(operation.pop(<span class="number">0</span>), data.pop(<span class="number">0</span>)[<span class="number">0</span>]))</span><br><span class="line">    output = []</span><br><span class="line">    <span class="keyword">for</span> i, j <span class="keyword">in</span> <span class="built_in">zip</span>(operation, data):</span><br><span class="line">        <span class="keyword">if</span> i == <span class="string">&#x27;put&#x27;</span>:</span><br><span class="line">            methodcaller(<span class="string">&#x27;put&#x27;</span>, j[<span class="number">0</span>], j[<span class="number">1</span>])(cache)</span><br><span class="line">            output.append(<span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">elif</span> i == <span class="string">&#x27;get&#x27;</span>:</span><br><span class="line">            output.append(methodcaller(<span class="string">&#x27;get&#x27;</span>, j[<span class="number">0</span>])(cache))</span><br><span class="line">    <span class="built_in">print</span>(output)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意点分析</strong>：<br>1、<code>from operator import methodcaller</code>的使用</p>
<p>2、 <code>cache = eval(&quot;&#123;&#125;(&#123;&#125;)&quot;.format(operation.pop(0), data.pop(0)[0]))</code>的初始化</p>
<p>3、get时需要在keyMap提取到对应的节点，而后查看其值。同时注意<code>__increment</code>方法包含了节点的删除与插入，不需要再删除一次。</p>
<p>4、put时，需要新建一个节点（<strong>频率赋值为1</strong>），并把节点放到表里。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://danggeovo.github.io/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0--ch8%20%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="danggeOvO">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dangge の 小小世界">
      <meta itemprop="description" content="记录生活与学习!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | dangge の 小小世界">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0--ch8%20%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/" class="post-title-link" itemprop="url">Python学习--ch8 进程和线程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-10 13:48:32" itemprop="dateCreated datePublished" datetime="2023-04-10T13:48:32+08:00">2023-04-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-08 18:15:40" itemprop="dateModified" datetime="2023-11-08T18:15:40+08:00">2023-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">【-基础知识-】编程语言学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/python%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">python学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>20k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>37 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="多进程"><a href="#多进程" class="headerlink" title="多进程"></a>多进程</h1><blockquote>
<p>思维导图：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648346705884.png"></p>
<h2 id="多进程multiprocess模块"><a href="#多进程multiprocess模块" class="headerlink" title="多进程multiprocess模块"></a>多进程multiprocess模块</h2><blockquote>
<p>定义引入：</p>
</blockquote>
<ul>
<li><strong>进程</strong>：就是操作系统执行的一个程序，操作系统<strong>以进程为单位分配存储空间</strong>，每个进程都有其对应的<strong>地址空间</strong>、<strong>数据栈</strong>以及其他用于跟踪进程执行的<strong>辅助数据</strong>。进程可以通过<code>fork</code>或者<code>spawn</code>创建新的进程，不过新的进程拥有单独的内存空间，所以不同进程之间要通过<code>通信机制（IPC）</code>实现数据共享，常见的通信机制包括：<code>管道</code>、<code>信号</code>、<code>套接字</code>、<code>共享内存区</code>等。</li>
<li><strong>线程</strong>：是<strong>cpu调度的执行单元</strong>，线程是定义在同一个进程下的，共享<strong>相同的上下文</strong>，所以相对于进程而言，线程之间的信息共享和通信更容易。线程<strong>共享cpu的执行时间</strong>。</li>
</ul>
<p>下图给出了进程和线程的<strong>资源对比</strong>：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648346705848.png" alt="进程"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648346705849.png" alt="线程"><br>多个线程只是具有<strong>独立的栈空间</strong>，其他数据是共享的。</p>
<p>下面给出一个<strong>类比例子</strong>：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648346705885.png"></p>
<p><strong>进程的创建</strong>：<br>Python的<code>os模块</code>中有<code>fork()</code>，通过fork可以在<strong>Linux\Unix\Mac系统</strong>下创建新的进程。但是<strong>Windows下并不支持</strong>这种方法。</p>
<blockquote>
<p><code>multiprocessing模块</code>–<strong>跨平台</strong>的多进程模块</p>
</blockquote>
<ol start="0">
<li><p>在介绍创建进程的方法之前，先来看一下<strong>Process类</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648346705815.png"></p>
</li>
<li><p>创建进程方法1：以指定的函数作为target，创建Process对象来创建新的进程。</p>
</li>
</ol>
<p><strong>代码 如下</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time,os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Run child process is %s(%s)&quot;</span> % (name, os.getpid()))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>, name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Parent Process %s&quot;</span> % os.getpid())</span><br><span class="line">    p = Process(target=fun, args=(<span class="string">&quot;xyq&quot;</span>,))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Child process will strat.&quot;</span>)</span><br><span class="line">    p.start()</span><br><span class="line">    p.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Parent finish!&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649302463973.png"></p>
<p><strong>注</strong> ：此模块不支持交互式平台，所以可以在命令行或者pycharm执行。</p>
<hr>
<p><strong>再看一个例子</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time,os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Run child process is %s(%s)&quot;</span> % (name, os.getpid()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Parent Process %s&quot;</span> % os.getpid())</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>):</span><br><span class="line">        p = Process(target=fun, args=(i+<span class="number">1</span>,))</span><br><span class="line">        p.start()</span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> multiprocessing.active_children():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;child process name is :&quot;</span>+p.name+<span class="string">&quot;chile ID is :&quot;</span>+<span class="built_in">str</span>(p.pid))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;waiting all Child process finish&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> multiprocessing.active_children():</span><br><span class="line">        p.join()</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649302868051.png"></p>
<p>看见子进程创建与调度与其创建顺序无关。</p>
<p><strong>注</strong>：使用循环创建多个进程。使用<code>active_children()</code>方法获取所有的子进程。使用<code>p.name</code>获取进程名，使用<code>p.pid</code>获取进程id.</p>
<ol start="2">
<li>继承Process类创建一个进程<br><strong>代码如下</strong>：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time,os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">My_process</span>(<span class="title class_ inherited__">Process</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;run child process is %s(%s)&quot;</span>%(self.name, os.getpid()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Parent Process %s&quot;</span> % os.getpid())</span><br><span class="line"></span><br><span class="line">    p = My_process(<span class="string">&quot;xy1&quot;</span>)</span><br><span class="line">    p.start()</span><br><span class="line">    p.join()</span><br></pre></td></tr></table></figure>
<p><strong>结果：</strong><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649303592108.png"></p>
<p><strong>注意</strong>：<br>1、使用继承方法是构造方法使用：<code>super().__init__</code><br>2、要重写run方法。</p>
<h2 id="进程池"><a href="#进程池" class="headerlink" title="进程池"></a>进程池</h2><blockquote>
<p>pool类：进程池，可以批量创建和管理子进程。</p>
</blockquote>
<p><strong>代码：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> time,os,random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Run child process is %s(%s)&quot;</span> % (name, os.getpid()))</span><br><span class="line">    start = time.time()</span><br><span class="line">    time.sleep(random.random()*<span class="number">3</span>)</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;child process %s runs %.2f seconds&quot;</span>%(name, (end-start)))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Parent Process %s&quot;</span> % os.getpid())</span><br><span class="line">    p = Pool(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line"><span class="comment"># 异步非阻塞式，根据系统调度进行进程的切换</span></span><br><span class="line">        p.apply_async(fun, args=(i, ))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在调用join时需要先关闭进程池</span></span><br><span class="line">    p.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待全部子进程执行完毕后</span></span><br><span class="line">    p.join()</span><br></pre></td></tr></table></figure>

<p><strong>结果：</strong><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649308169431.png"></p>
<p>如果使用<code>p.apply</code>采取阻塞方法，会使进程<strong>依次执行</strong>，看结果：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649308349626.png"></p>
<hr>
<p>也可以使用with方法进行进程池的创建：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> time,os,random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">name</span>):</span><br><span class="line">    myname = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(name):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;(%s)process is running：%d&quot;</span>%(os.getpid(), i))</span><br><span class="line">        myname+=<span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> myname</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Parent Process %s&quot;</span> % os.getpid())</span><br><span class="line">    <span class="keyword">with</span> Pool(<span class="number">3</span>) <span class="keyword">as</span> p:</span><br><span class="line">        result = p.<span class="built_in">map</span>(fun, (<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>))</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> result:</span><br><span class="line">            <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：使用<code>p.map()</code>方法与前差不多，都是将参数依次传入函数。这里是创建了3个进程。</p>
<h2 id="concurrent-futures模块下的ProcessPoolExecutor类"><a href="#concurrent-futures模块下的ProcessPoolExecutor类" class="headerlink" title="concurrent.futures模块下的ProcessPoolExecutor类"></a>concurrent.futures模块下的ProcessPoolExecutor类</h2><blockquote>
<p>实现多进程并发编程：提高运行效率</p>
</blockquote>
<p><strong>一个例子:大素数求解</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> concurrent.futures</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_prime</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n&lt;<span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> n%<span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    sqrt_n = <span class="built_in">int</span>(math.floor(math.sqrt(n)))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>, sqrt_n+<span class="number">1</span>, <span class="number">2</span>):</span><br><span class="line">        <span class="keyword">if</span> n%i ==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">PRIMES = [</span><br><span class="line">    <span class="number">112272535095293</span>,</span><br><span class="line">    <span class="number">112582705942171</span>,</span><br><span class="line">    <span class="number">1099726899285419</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">with</span> concurrent.futures.ProcessPoolExecutor() <span class="keyword">as</span> pool:</span><br><span class="line">        <span class="comment"># 提交给pool的是一个函数，如果是map，提交方法为pool.map</span></span><br><span class="line">        <span class="keyword">for</span> number, prime <span class="keyword">in</span> <span class="built_in">zip</span>(PRIMES, pool.<span class="built_in">map</span>(is_prime, PRIMES)):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;%d is prime?%s&quot;</span>%(number, prime))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    start = time()</span><br><span class="line">    main()</span><br><span class="line">    end = time()</span><br><span class="line">    <span class="built_in">print</span>(end-start)</span><br></pre></td></tr></table></figure>
<p><strong>看结果：</strong><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649309808439.png"></p>
<p>不同的<strong>pool参数</strong>也会对运行效率有影响。<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649309906898.png"><br>不一定是参数越大效率越高，因为会花费时间在进程切换上。<strong>一般参数&#x3D; 任务个数最好</strong></p>
<h2 id="进程通信"><a href="#进程通信" class="headerlink" title="进程通信"></a>进程通信</h2><blockquote>
<p>多个进程之间进行通信，数据的共享</p>
</blockquote>
<blockquote>
<p>一个例子理解多进程的空间：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sub_task</span>(<span class="params">string</span>):</span><br><span class="line">    <span class="keyword">global</span> counter</span><br><span class="line">    <span class="keyword">while</span> counter&lt;<span class="number">10</span>:</span><br><span class="line">        <span class="built_in">print</span>(string, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        counter+=<span class="number">1</span></span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    Process(target=sub_task, args=(<span class="string">&quot;ping&quot;</span>, )).start()</span><br><span class="line">    Process(target=sub_task, args=(<span class="string">&quot;pong&quot;</span>, )).start()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p><strong>结果：</strong><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649310473472.png"></p>
<p><strong>解释：</strong><br>在创建进程时每一个子进程都会复制父进程的数据，都会有一个单独的进程空间。所以counter是各个进程都有的，单独存在。</p>
<blockquote>
<p>使用Queue类来进行进程通信</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Queue</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">q</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(%s)进程开始从队列传输数据：&quot;</span>%os.getpid())</span><br><span class="line">    q.put(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    q = Queue()</span><br><span class="line"></span><br><span class="line">    p = Process(target=fun, args=(q, ))</span><br><span class="line">    p.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(%s)进程开始从队列读取数据：&quot;</span>%os.getpid())</span><br><span class="line">    <span class="built_in">print</span>(q.get())</span><br><span class="line">    p.join()</span><br></pre></td></tr></table></figure>
<p><strong>看结果：</strong><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649310886687.png"></p>
<blockquote>
<p>两个子进程之间的通信</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Queue</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">write</span>(<span class="params">q</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(%s)进程开始从队列传输数据：&quot;</span>%os.getpid())</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]:</span><br><span class="line">        q.put(i)</span><br><span class="line">        time.sleep(<span class="number">0.2</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read</span>(<span class="params">q</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;(%s)进程开始从队列读取数据：&quot;</span>%os.getpid())</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        i = q.get(<span class="literal">True</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Get %s from queue&quot;</span>%i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    q = Queue()</span><br><span class="line"></span><br><span class="line">    p1 = Process(target=write, args=(q, ))</span><br><span class="line">    p2 = Process(target=read, args=(q, ))</span><br><span class="line">    p1.start()</span><br><span class="line">    p2.start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    p1.join()</span><br><span class="line">    p2.join()</span><br><span class="line">    <span class="comment"># 死循环，强制终止</span></span><br><span class="line">    p2.terminate()</span><br></pre></td></tr></table></figure>
<p><strong>结果：</strong><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649311181213.png"></p>
<h1 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h1><blockquote>
<p>思维导图如下：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648793139879.png"></p>
<h2 id="threading模块"><a href="#threading模块" class="headerlink" title="threading模块"></a>threading模块</h2><p><strong>模块介绍</strong>：<br><code>_Thread模块</code>：低级模块<br><code>threading模块</code>：高级模块，对_Thread模块进行了封装。</p>
<blockquote>
<p>模块基本功能（部分）</p>
</blockquote>
<ul>
<li>threading.<code>stack_size()</code>：返回当前线程大小</li>
<li>threading.<code>stack_size(xx)</code>：设置当前线程大小</li>
<li>threading.<code>active_count()</code>：查看存活线程数目</li>
<li>threading.<code>enumerate()</code>：枚举当前活动的线程，以列表形式返回</li>
<li>threading.<code>current_thread().name</code>：返回当前线程的名称</li>
</ul>
<p><strong>示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="built_in">print</span>(threading.stack_size())</span><br><span class="line">threading.stack_size(<span class="number">64</span>*<span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span>(threading.stack_size())</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(threading.active_count())</span><br><span class="line"><span class="built_in">print</span>(threading.<span class="built_in">enumerate</span>())</span><br><span class="line"><span class="built_in">print</span>(threading.current_thread().name)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648795273877.png"></p>
<blockquote>
<p>创建线程的方法</p>
</blockquote>
<ol>
<li>使用threading模块的Threat类的构造方法创建线程，把一个函数传给target创建的Thread示例，再调用start方法启动线程</li>
<li>通过继承threading的Thread类创建进程</li>
</ol>
<blockquote>
<p>第一种方法：threading.Thread类创建</p>
</blockquote>
<p><strong>先来看一下Thread类的构造方法</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648795859357.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648795891498.png" alt="中文"></p>
<p><strong>代码实践</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Thread %s &gt;&gt;&gt; %s&quot;</span>%(threading.current_thread().name, i))</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Thread %s ended&quot;</span>%threading.current_thread().name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Thread %s is runing...&quot;</span>%threading.current_thread().name)</span><br><span class="line">    t = threading.Thread(target=fun, args=(<span class="number">5</span>,), name=<span class="string">&quot;Thread_t&quot;</span>)</span><br><span class="line">    t.start()</span><br><span class="line">    t.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Thread %s ended&quot;</span>%threading.current_thread().name)</span><br></pre></td></tr></table></figure>
<p><strong>运行截图</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648796341414.png"></p>
<p><strong>注意事项</strong>：<br>1、在创建进程时传入<code>参数args</code>需要<strong>使用元组</strong>，如果是单子，要用<code>(xxx,)</code>形式<br>2、区分<code>threading</code>方法和<code>Thread</code>方法。</p>
<hr>
<p><strong>join方法解析</strong>：<br><code>t.join()</code>就是<strong>截断当前进程</strong>，当子线程运行完毕后才继续运行。</p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Thread %s &gt;&gt;&gt; %s&quot;</span>%(threading.current_thread().name, i))</span><br><span class="line">        time.sleep(<span class="number">0.5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Thread %s ended&quot;</span>%threading.current_thread().name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Thread %s is runing...&quot;</span>%threading.current_thread().name)</span><br><span class="line">    t1 = threading.Thread(target=fun, args=(<span class="number">5</span>,), name=<span class="string">&quot;Thread_t1&quot;</span>)</span><br><span class="line">    t1.start()</span><br><span class="line">    t1.join()</span><br><span class="line">    t2 = threading.Thread(target=fun, args=(<span class="number">5</span>,), name=<span class="string">&quot;Thread_t2&quot;</span>)</span><br><span class="line">    t2.start()</span><br><span class="line">    t2.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Thread %s ended&quot;</span>%threading.current_thread().name)</span><br></pre></td></tr></table></figure>
<p><strong>运行截图</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648796767223.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Thread %s &gt;&gt;&gt; %s&quot;</span>%(threading.current_thread().name, i))</span><br><span class="line">        time.sleep(<span class="number">0.5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Thread %s ended&quot;</span>%threading.current_thread().name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Thread %s is runing...&quot;</span>%threading.current_thread().name)</span><br><span class="line">    t1 = threading.Thread(target=fun, args=(<span class="number">5</span>,), name=<span class="string">&quot;Thread_t1&quot;</span>)</span><br><span class="line">    t1.start()</span><br><span class="line">    t1.join()</span><br><span class="line">    t2 = threading.Thread(target=fun, args=(<span class="number">5</span>,), name=<span class="string">&quot;Thread_t2&quot;</span>)</span><br><span class="line">    t2.start()</span><br><span class="line">    <span class="comment"># t2.join()</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Thread %s ended&quot;</span>%threading.current_thread().name)</span><br></pre></td></tr></table></figure>
<p><strong>运行截图</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648796935518.png"></p>
<p><strong>解释</strong>：<br>1、使用<code>t.join()</code>会其下的代码停止执行，对应<strong>线程执行完毕后</strong>再继续执行，见eg1。<br>2、如果不使用<code>join方法</code>就会使得多个线程共同执行（虽然还是一个时间执行一个，但是<strong>会在不同线程之间进行切换</strong>）见eg2。</p>
<blockquote>
<p>第二种方法：继承threading.Thread类</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myThread</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num, threadname</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(name = threadname)</span><br><span class="line">        self.__num = num</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        time.sleep(<span class="number">0.5</span>)</span><br><span class="line">        <span class="built_in">print</span>(self.__num)</span><br><span class="line"></span><br><span class="line">t = myThread(<span class="number">6</span>, <span class="string">&quot;myThread&quot;</span>)</span><br><span class="line">t.daemon = <span class="literal">True</span></span><br><span class="line">t.start()</span><br><span class="line">t.join()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;thread %s ended&quot;</span>%threading.current_thread().name)</span><br></pre></td></tr></table></figure>
<p><strong>运行结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648797867333.png"></p>
<p><strong>注意事项</strong>：<br>1、继承方法创建进行本质上与第一种方法一致，不过可以在<strong>构造方法中设置需要的变量</strong>。<br>2、在定义构造方法时<strong>先使用父类构造方法</strong>，传入进程名。<br>3、重写子类的<code>run方法</code>实现功能的自定义。（<strong>注：第一种方法也是通过run方法执行传入的函数的</strong>）</p>
<h2 id="锁LOCK"><a href="#锁LOCK" class="headerlink" title="锁LOCK"></a>锁LOCK</h2><blockquote>
<p>定义引入</p>
</blockquote>
<p><strong>临界资源</strong>：因为多个线程共享资源，如果此资源<strong>被多个进程竞争使用</strong>，即为“<code>临界资源</code>”</p>
<p>而<strong>锁的存在</strong>就是为临界资源添加一个保护，防止资源混乱。</p>
<blockquote>
<p>一个经典例子：银行取钱</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">balance = <span class="number">100000000</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw</span>(<span class="params">draw_account</span>):</span><br><span class="line">    <span class="keyword">global</span> balance</span><br><span class="line">    <span class="keyword">if</span> balance &gt;= draw_account:</span><br><span class="line">        <span class="built_in">print</span>(threading.current_thread().name +<span class="string">&quot;取前成功，取出的钱数为：&quot;</span>+ <span class="built_in">str</span>(draw_account))</span><br><span class="line">        time.sleep(<span class="number">0.001</span>)</span><br><span class="line">        balance-=draw_account</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;余额：&quot;</span>, balance)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(threading.current_thread().name +<span class="string">&quot;取钱时余额不足&quot;</span>)</span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=draw, name=<span class="string">&quot;甲&quot;</span>, args=(<span class="number">60000000</span>,))</span><br><span class="line">t2 = threading.Thread(target=draw, name=<span class="string">&quot;乙&quot;</span>, args=(<span class="number">60000000</span>,))</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br></pre></td></tr></table></figure>
<p><strong>看结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648799876437.png"></p>
<p>可见，多个线程竞争balance这个临界资源，造成逻辑错误。<strong>其错误来源：甲取钱后输出信息，而后在balance数值未变时乙开始取钱。</strong></p>
<hr>
<blockquote>
<p>改进方法：锁</p>
</blockquote>
<p><strong>方法介绍</strong>：</p>
<p><strong>threading模块</strong>提供了<code>Lock\RLock</code>两个类，他们都提供了以下方法加锁和释放锁。</p>
<ul>
<li>x.<code>acquire(locking=True,timeout=-1)</code>方法：获取锁，timeout设置加锁多少秒</li>
<li>x.<code>release()</code>方法：释放锁</li>
</ul>
<p><strong>代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">balance = <span class="number">100000000</span></span><br><span class="line">lock = threading.Lock()  <span class="comment"># 创建一个锁</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw</span>(<span class="params">draw_account</span>):</span><br><span class="line">    <span class="keyword">global</span> balance</span><br><span class="line">    lock.acquire()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> balance &gt;= draw_account:</span><br><span class="line">            <span class="built_in">print</span>(threading.current_thread().name +<span class="string">&quot;取前成功，取出的钱数为：&quot;</span>+ <span class="built_in">str</span>(draw_account))</span><br><span class="line">            time.sleep(<span class="number">0.001</span>)</span><br><span class="line">            balance-=draw_account</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;余额：&quot;</span>, balance)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(threading.current_thread().name +<span class="string">&quot;取钱时余额不足&quot;</span>)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        lock.release()</span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=draw, name=<span class="string">&quot;甲&quot;</span>, args=(<span class="number">60000000</span>,))</span><br><span class="line">t2 = threading.Thread(target=draw, name=<span class="string">&quot;乙&quot;</span>, args=(<span class="number">60000000</span>,))</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br></pre></td></tr></table></figure>
<p><strong>看结果</strong>:<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648800374941.png"></p>
<p><strong>注意点</strong>：<br>1、在使用前要<strong>先创建一个锁</strong>，使用<code>Lock类</code>。<br>2、使用<code>try...finally...</code>进行锁的释放<br>3、锁会把<strong>临界资源空间</strong>锁定，释放后别的线程才可以进行访问。？？？？？？？？？？？？？</p>
<h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><blockquote>
<p>锁有优点，可以保证临界资源的安全性，但是也会造成死锁。</p>
</blockquote>
<p><strong>代码</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Account</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, _<span class="built_in">id</span>, balance, lock</span>):</span><br><span class="line">        self.<span class="built_in">id</span> = _<span class="built_in">id</span></span><br><span class="line">        self.balance = balance</span><br><span class="line">        self.lock = lock</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">withdraw</span>(<span class="params">self, mny</span>):</span><br><span class="line">        self.balance -= mny</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">deposit</span>(<span class="params">self, mny</span>):</span><br><span class="line">        self.balance += mny</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Trans</span>(<span class="params">_<span class="keyword">from</span>, to, mny</span>):</span><br><span class="line">    <span class="keyword">if</span> _<span class="keyword">from</span>.lock.acquire():</span><br><span class="line">        _<span class="keyword">from</span>.withdraw(mny)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;wait lock...&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> to.lock.acquire():</span><br><span class="line">        to.deposit(mny)</span><br><span class="line">        to.release()</span><br><span class="line">    _<span class="keyword">from</span>.release()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;finish&quot;</span>)</span><br><span class="line">a = Account(<span class="string">&quot;甲&quot;</span>, <span class="number">1000</span>,threading.Lock())</span><br><span class="line">b = Account(<span class="string">&quot;乙&quot;</span>, <span class="number">1000</span>,threading.Lock())</span><br><span class="line">threading.Thread(target=Trans, args=(a, b, <span class="number">300</span>)).start()</span><br><span class="line">threading.Thread(target=Trans, args=(b, a, <span class="number">300</span>)).start()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>看结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648804784815.png"></p>
<p>可以在acquire方法时<strong>设置时间</strong>，超出某个规定时间后就会释放锁。</p>
<h1 id="线程通信"><a href="#线程通信" class="headerlink" title="线程通信"></a>线程通信</h1><blockquote>
<p>思维导图如下：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649499569891.png"></p>
<h2 id="Condition实现线程通信"><a href="#Condition实现线程通信" class="headerlink" title="Condition实现线程通信"></a>Condition实现线程通信</h2><blockquote>
<p>作用流程：实现变量同步</p>
</blockquote>
<ul>
<li>创建condition对象</li>
<li>通过acquire获取锁，然后判断一些条件<ul>
<li>若条件满足，处理后通过notify方法通知唤醒其他线程，其他处于wait的线程会重新判断条件</li>
<li>不满足条件，wait阻塞该线程。</li>
</ul>
</li>
<li>最后使用release释放锁</li>
</ul>
<blockquote>
<p>一个例子：生产者与消费者</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading,time</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Producer</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, threadname</span>):</span><br><span class="line">        threading.Thread.__init__(self, name=threadname)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">global</span> count</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">with</span> con:</span><br><span class="line">                <span class="keyword">if</span> count &gt; <span class="number">100</span> :</span><br><span class="line">                    con.wait()</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    count += <span class="number">50</span></span><br><span class="line">                    <span class="built_in">print</span>(self.name+<span class="string">&#x27;produce 50,count=&#x27;</span>+<span class="built_in">str</span>(count))</span><br><span class="line">                    con.notify()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Consumer</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, threadname</span>):</span><br><span class="line">        threading.Thread.__init__(self, name=threadname)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">global</span> count</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">with</span> con:</span><br><span class="line">                <span class="keyword">if</span> count &lt; <span class="number">100</span>:</span><br><span class="line">                    con.wait()</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    count -= <span class="number">25</span></span><br><span class="line">                    <span class="built_in">print</span>(self.name + <span class="string">&#x27;consumer 25,count=&#x27;</span> + <span class="built_in">str</span>(count))</span><br><span class="line">                    con.notify()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">count=<span class="number">200</span></span><br><span class="line">con = threading.Condition()<span class="comment"># 创建condition对象</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">        p = Producer(<span class="string">&quot;producer&quot;</span>)</span><br><span class="line">        p.start()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        c = Consumer(<span class="string">&quot;consumer&quot;</span>)</span><br><span class="line">        c.start()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    test()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649501634173.png"></p>
<p><strong>具体分析：</strong><br>Condition实现线程通信，其原理与锁类似，不过在具体实现生有所不同。在condition中加入了判别机制，当满足某些条件时获取锁，其余线程wait。并在每一次完成后唤醒其他线程。</p>
<p><strong>具体流程图</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649501777587.png"></p>
<h2 id="queue实现线程通信"><a href="#queue实现线程通信" class="headerlink" title="queue实现线程通信"></a>queue实现线程通信</h2><blockquote>
<p>模块整体介绍：</p>
</blockquote>
<p>queue模块下有<strong>三种队列类</strong>，分别如下:</p>
<ul>
<li>queue.<code>Queue</code>:先进先出FIFO的常规队列、</li>
<li>queue.<code>LifoQueue</code>:后进先出的队列</li>
<li>queue.<code>PriorityQueue</code>:优先级队列，优先级最小的先出队</li>
</ul>
<p>三种队列类提供的方法基本相同，下面以<code>queue.Queue类</code>为例:</p>
<ul>
<li><code>qsize(self)</code>:队列的实际大小</li>
<li><code>empty(self)</code>:判定队列空，空返回True,否则返回False</li>
<li><code>full(self)</code>:判定队列满，满返回True,否则返回False</li>
<li><code>put</code>(self, item, block&#x3D;True, timeout&#x3D;None):往队列中放入元素。如果队列满，block&#x3D;True (阻塞方式) ,则当前线程被阻塞;如果队列满，block&#x3D;False (非阻塞方式) ,则抛出异常queue.FULL</li>
<li><code>put nowait</code>(self, item):往队列放入元素，采用非阻塞方式</li>
<li><code>get</code>(self, block&#x3D;True, timeout&#x3D;None) :往队列中取出元素。如果队列空，block&#x3D;True (阻塞方式) ,则当前线程被阻塞;如果队列空，block&#x3D;False (非阻塞方式) ,则抛出异常queue.EMPTY</li>
<li><code>get nowait(self)</code>:往队列取出元素，采用非阻塞方式，</li>
<li><code>task_ done(self)</code>:前面的任务已经完成，用在队列的消费者线程中。<strong>get方法之后调用task_done方法告诉队列处理的任务完成了</strong>。</li>
<li><code>join(self)</code>:队列阻塞，直到队列中所有的元素都被处理完毕。</li>
</ul>
<blockquote>
<p>一个例子：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading,time</span><br><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Producer</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, threadname</span>):</span><br><span class="line">        threading.Thread.__init__(self, name=threadname)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">            time.sleep(<span class="number">2</span>)</span><br><span class="line">            myQueue.put(i)</span><br><span class="line">            <span class="built_in">print</span>(self.name, <span class="string">&quot; put &quot;</span>, i, <span class="string">&#x27;to queue&#x27;</span>)</span><br><span class="line">        myQueue.put(<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Consumer</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, threadname</span>):</span><br><span class="line">        threading.Thread.__init__(self, name=threadname)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            time.sleep(<span class="number">3</span>)</span><br><span class="line">            item = myQueue.get()</span><br><span class="line">            <span class="keyword">if</span> item == <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="built_in">print</span>(self.name, <span class="string">&quot; get &quot;</span>, item, <span class="string">&#x27; from queue&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">myQueue = queue.Queue()</span><br><span class="line"></span><br><span class="line">p = Producer(<span class="string">&quot;producer&quot;</span>)</span><br><span class="line">c = Consumer(<span class="string">&quot;consumer&quot;</span>)</span><br><span class="line">c.start()</span><br><span class="line">p.start()</span><br><span class="line">c.join()</span><br><span class="line">p.join()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>结果:</strong><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649503198068.png"></p>
<p><strong>具体介绍：</strong><br>1、queue就是生成一个共享的队列，各个线程可以向这个队列里取元素也可以放元素。<br>2、可以在线程中使用<code>while True死循环</code>保证线程的执行，而后通过<code>if ...  break</code>的方法结束线程</p>
<blockquote>
<p>join方法的具体介绍</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649503754530.png"></p>
<blockquote>
<p>整体流程：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649503635177.png"></p>
<h2 id="Event实现线程通信"><a href="#Event实现线程通信" class="headerlink" title="Event实现线程通信"></a>Event实现线程通信</h2><blockquote>
<p>模块介绍</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649505431821.png"></p>
<blockquote>
<p>一个例子：模仿多线程连接服务器</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line">logging.basicConfig(level=logging.DEBUG, <span class="built_in">format</span>=<span class="string">&#x27;(%(threadName)-10s) %(message)s&#x27;</span>,)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">worker</span>(<span class="params">event</span>):</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">not</span> event.is_set():</span><br><span class="line">        logging.debug(<span class="string">&#x27;Waiting for redis ready...&#x27;</span>)</span><br><span class="line">        event.wait()</span><br><span class="line">        logging.debug(<span class="string">&#x27;redis ready, and connect to redis server and do some work [%s]&#x27;</span>, time.ctime( ))</span><br><span class="line">    time. sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">readis_ready = threading.Event()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    t = threading.Thread( target=worker, args=(readis_ready,))</span><br><span class="line">    t.start()</span><br><span class="line">logging.debug(<span class="string">&#x27;first of all, check redis server, make sure it is 0K&#x27;</span>)</span><br><span class="line">time. sleep(<span class="number">3</span>)</span><br><span class="line">readis_ready.<span class="built_in">set</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>结果：</strong><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649505124497.png"></p>
<p><strong>具体介绍</strong>：<br>1、使用<code>readis_ready = threading.Event()</code>创建一个event.<br>2、在创建进程时将<code>event作为参数</code>传入<br>3、使用 <code>event.wait()</code>阻塞进程。<code>readis_ready.set()</code>解除阻塞。<br>4、此方法无锁。</p>
<p><strong>最后补充：</strong></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649505334998.png"><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649505320949.png"></p>
<h1 id="线程私有变量"><a href="#线程私有变量" class="headerlink" title="线程私有变量"></a>线程私有变量</h1><blockquote>
<p>思维导图：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649505514526.png"></p>
<blockquote>
<p>定义介绍：</p>
</blockquote>
<p>在多线程环境下，如果多个线程对全局变量进行了修改，将会影响到其他所有的线程。为了避免多个线程同时对变量进行修改，引入了线程同步机制，通过互斥锁、条件变量等来控制对全局变量的访问。</p>
<p>但是在很多时候线程也需要拥有自己的<strong>私有数据</strong>，可以使用局部变量方式，同时python还提供了<code>ThreadLocal变量</code>，它本身是一个全局变量， 但是每个线程却可以利用它来<strong>保存属于自己的私有数据</strong>，这些私有数据对其他线程也是不可见的.</p>
<blockquote>
<p>具体方法：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading , time</span><br><span class="line"><span class="comment">#创建全局ThreadLocal对象:</span></span><br><span class="line">local_data = threading.local()</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            local_data.num += i</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            local_data.num = i</span><br><span class="line">        time. sleep(<span class="number">1</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\n%s local_data is : %s&#x27;</span> % (threading.current_thread().name, local_data.num) )</span><br><span class="line">threads=[]</span><br><span class="line">t1 = threading.Thread(target=fun, name=<span class="string">&#x27;Thread1&#x27;</span>, args=(<span class="number">5</span>, ))</span><br><span class="line">threads.append(t1)</span><br><span class="line">t2 = threading.Thread(target=fun, name=<span class="string">&#x27;Thread2&#x27;</span>, args=(<span class="number">5</span>,))</span><br><span class="line">threads.append(t2)</span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">    t.start()</span><br><span class="line">    t.join()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649506113491.png"></p>
<p>合理使用threading.local可以极大的简化代码逻辑，保证各个子线程的数据安全。</p>
<h1 id="ThreadPoolExecutor并发编程"><a href="#ThreadPoolExecutor并发编程" class="headerlink" title="ThreadPoolExecutor并发编程"></a>ThreadPoolExecutor并发编程</h1><blockquote>
<p>思维导图：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649506386440.png"></p>
<blockquote>
<p>定义引入：</p>
</blockquote>
<p>由于启动新线程时，涉及到和操作系统的交互，因此启动新线程的成本比较高，为了提高性能，可以使用线程池来管理线程。<br><strong>线程池</strong>在启动时创建大量的<strong>空闲线程</strong>，我们的程序只要将一个函数提交线程池， 线程池就会启动个空闲的线程来执行它。当函数结束后，这个线程并不会死亡，而是回到线程池中成为空闲状态，等待执行下一个函数。通过线程池可以控制系统中并发线程的数量。</p>
<p><strong>一般步骤:</strong><br>1、调用<code>ThreadPoolExecutor类</code>的构造函数创建一个线程池<br>2、定义普通函数作为线程任务<br>3、调用<code>ThreadPoolExecutor </code>对象的<code>submit()</code>方法提交线程池任务<br>4、通过<code>shutdown</code>方法关闭线程池</p>
<blockquote>
<p>具体使用：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading,time</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"><span class="comment">#创建全局ThreadLocal对象:</span></span><br><span class="line">local_data = threading.local()</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            local_data.num+= i</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            local_data.num = i</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\n%s local_data is : %s&#x27;</span> % (threading.current_thread().name, local_data.num))</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">pool = ThreadPoolExecutor(max_workers=<span class="number">2</span>)</span><br><span class="line">task1 = pool.submit(fun, <span class="number">5</span>) <span class="comment">#提交1个任务</span></span><br><span class="line">task2 = pool.submit(fun, <span class="number">10</span>) <span class="comment">#提交1个任务</span></span><br><span class="line">time. sleep(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;task1:&quot;</span>, task1.done())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;task2:&quot;</span>, task2.done())</span><br><span class="line">pool.shutdown()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>结果：</strong><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649509811431.png"></p>
<p>注意点：<br>1、不需要再定义线程，而是通过线程池创建多个线程的集合。<br>2、通过submit向线程池里传递任务。</p>
<blockquote>
<p>使用with和map进行扩展：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading,time</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"><span class="comment">#创建全局ThreadLocal对象:</span></span><br><span class="line">local_data = threading.local()</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            local_data.num+= i</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            local_data.num = i</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\n%s local_data is : %s&#x27;</span> % (threading.current_thread().name, local_data.num))</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">with</span> ThreadPoolExecutor(max_workers=<span class="number">2</span>) <span class="keyword">as</span> pool:</span><br><span class="line">    task = pool.<span class="built_in">map</span>(fun, (<span class="number">5</span>,<span class="number">10</span>)) <span class="comment">#提交1个任务</span></span><br><span class="line"></span><br><span class="line">time. sleep(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> task:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>1、with可以用于管理池，不需要显式关闭<br>2、map同前。</p>
<h1 id="扩展积累"><a href="#扩展积累" class="headerlink" title="扩展积累"></a>扩展积累</h1><h2 id="实训作业"><a href="#实训作业" class="headerlink" title="实训作业"></a>实训作业</h2><blockquote>
<p>素数个数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> cpu_count</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">isPrime</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="comment"># 判断数字是否为素数</span></span><br><span class="line">    <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">    <span class="comment"># *************begin************#</span></span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="built_in">int</span>(math.sqrt(n)) + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> n % i == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">howMany</span>(<span class="params">T</span>):</span><br><span class="line">    <span class="comment"># 计算给定区间含有多少个素数</span></span><br><span class="line">    <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">    <span class="comment"># *************begin************#</span></span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(T[<span class="number">0</span>], T[<span class="number">1</span>] + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> isPrime(i):</span><br><span class="line">            <span class="built_in">sum</span> += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span></span><br><span class="line">    <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">separateNum</span>(<span class="params">N, CPU_COUNT</span>):</span><br><span class="line">    <span class="comment"># 对整个数字空间N进行分段CPU_COUNT</span></span><br><span class="line">    <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">    <span class="comment"># *************begin************#</span></span><br><span class="line">    <span class="built_in">list</span> = [[i * (N // CPU_COUNT) + <span class="number">1</span>, (i + <span class="number">1</span>) * (N // CPU_COUNT)] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, CPU_COUNT)]</span><br><span class="line">    <span class="built_in">list</span>[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">list</span>[CPU_COUNT - <span class="number">1</span>][<span class="number">1</span>] &lt; N:</span><br><span class="line">        <span class="built_in">list</span>[CPU_COUNT - <span class="number">1</span>][<span class="number">1</span>] = N</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># **************end*************#</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    N = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    <span class="comment"># 多进程</span></span><br><span class="line">    CPU_COUNT = cpu_count()  <span class="comment">##CPU内核数 本机为8</span></span><br><span class="line">    pool = Pool(CPU_COUNT)</span><br><span class="line">    sepList = separateNum(N, CPU_COUNT)</span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(CPU_COUNT):</span><br><span class="line">        result.append(pool.apply_async(howMany, (sepList[i], )))</span><br><span class="line">    pool.close()</span><br><span class="line">    pool.join()</span><br><span class="line">    <span class="comment"># ans = 0</span></span><br><span class="line">    <span class="built_in">list</span> = [res.get() <span class="keyword">for</span> res <span class="keyword">in</span> result]</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="built_in">list</span>), end = <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>注意点</strong><br>1、判断素数的函数。<br>2、分区结果为区间的<strong>首尾</strong>，而不是全部。注意使用列表生成式。<br>3、<strong>进程池</strong>的使用，看函数与上介绍。（有返回值）</p>
<blockquote>
<p>多线程：合数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line">ans = <span class="number">0</span></span><br><span class="line">lock = threading.Lock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">isPrime</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="comment"># 判断数字是否为素数</span></span><br><span class="line">   </span><br><span class="line">    <span class="keyword">global</span> ans</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="built_in">int</span>(math.sqrt(n)) + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> n % i == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">howMany</span>(<span class="params">T</span>):</span><br><span class="line">    <span class="comment"># 计算给定区间含有多少个素数</span></span><br><span class="line">  </span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(T[<span class="number">0</span>], T[<span class="number">1</span>] + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> isPrime(i):</span><br><span class="line">            <span class="built_in">sum</span> += <span class="number">1</span></span><br><span class="line">    lock.acquire()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">global</span> ans</span><br><span class="line">        ans += <span class="built_in">sum</span></span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        lock.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">seprateNum</span>(<span class="params">N, CPU_COUNT</span>):</span><br><span class="line">    <span class="comment"># 对整个数字空间N进行分段CPU_COUNT</span></span><br><span class="line">    <span class="built_in">list</span> = [[i * (N // CPU_COUNT) + <span class="number">1</span>, (i + <span class="number">1</span>) * (N // CPU_COUNT)] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, CPU_COUNT)]</span><br><span class="line">    <span class="built_in">list</span>[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">list</span>[CPU_COUNT - <span class="number">1</span>][<span class="number">1</span>] &lt; N:</span><br><span class="line">        <span class="built_in">list</span>[CPU_COUNT - <span class="number">1</span>][<span class="number">1</span>] = N</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    N = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    threadNum = <span class="number">32</span></span><br><span class="line"> <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">    <span class="comment"># *************begin************#</span></span><br><span class="line">    result = []</span><br><span class="line">    seqList = seprateNum(N, threadNum)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,threadNum):</span><br><span class="line">        result.append(threading.Thread(target=howMany,args=(seqList[i],)))</span><br><span class="line">        result[i].start()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,threadNum):</span><br><span class="line">        result[i].join()</span><br><span class="line">    <span class="built_in">print</span>(N-<span class="number">1</span>-ans)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>注意点：</strong><br>1、多线程的使用。（未使用线程池，而是多个线程，启动+join)<br>2、锁的使用，在更新ans时需要使用锁。</p>
<blockquote>
<p>锁的使用：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">showfoo</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    :param n: 要输出foobarpython的次数</span></span><br><span class="line"><span class="string">    :return: 无返回，可直接输出</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="comment"># 请在此处添加代码       #</span></span><br><span class="line">    <span class="comment"># *************begin************#</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        lockpython.acquire()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;foo&#x27;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        lockfoo.release()</span><br><span class="line">        time.sleep(<span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">showbar</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      :param n: 要输出foobarpython的次数</span></span><br><span class="line"><span class="string">      :return: 无返回，可直接输出</span></span><br><span class="line"><span class="string">      &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="comment"># 请在此处添加代码       #</span></span><br><span class="line">    <span class="comment"># *************begin************#</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        lockfoo.acquire()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;bar&#x27;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        lockbar.release()</span><br><span class="line">        time.sleep(<span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">showpython</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      :param n: 要输出foobarpython的次数</span></span><br><span class="line"><span class="string">      :return: 无返回，可直接输出</span></span><br><span class="line"><span class="string">      &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="comment"># 请在此处添加代码       #</span></span><br><span class="line">    <span class="comment"># *************begin************#</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        lockbar.acquire()  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;python&#x27;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        lockpython.release()</span><br><span class="line">        time.sleep(<span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    lockfoo = threading.Lock()  <span class="comment"># 定义3个互斥锁</span></span><br><span class="line">    lockbar = threading.Lock()</span><br><span class="line">    lockpython = threading.Lock()</span><br><span class="line">    n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    t1 = threading.Thread(target=showfoo, args=[n])  <span class="comment"># 定义3个线程</span></span><br><span class="line">    t2 = threading.Thread(target=showbar, args=[n])</span><br><span class="line">    t3 = threading.Thread(target=showpython, args=[n])</span><br><span class="line">    lockfoo.acquire()  <span class="comment"># 先锁住foo,bar锁，保证先打印foo</span></span><br><span class="line">    lockbar.acquire()</span><br><span class="line"></span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    t3.start()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意点：</strong><br>1、锁会锁住临界资源，进程要使用这些资源必须先获取锁。<br>2、也可以使用锁来控制子线程的运行顺序。即在执行某代码之前，加上获取某个锁的条件，这样只有当这个锁解开之后才可以执行代码。<br>3、在主函数需要先获取foo、bar的锁，因为我们需要先输出foo，而要执行打印foo代码需要先获取python的锁。</p>
<h2 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h2><ol>
<li>基本单位</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649512365647.png"></p>
<hr>
<ol start="2">
<li>误解进程</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649512541681.png"></p>
<p> D :也可能是<strong>准备状态</strong>。<br> C :在单处理器系统中，如果发生死锁，进程就全部处于<strong>阻塞态</strong>；系统中没有进程时，也没有进程处于运行态。</p>
<hr>
<ol start="3">
<li>线程通信</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649512750793.png"></p>
<p>D为进程通信</p>
<hr>
<ol start="4">
<li>易错点</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649512795642.png"></p>
<hr>
<ol start="5">
<li>GIL锁</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649512995463.png"></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45632139/article/details/106902316">https://blog.csdn.net/qq_45632139&#x2F;article&#x2F;details&#x2F;106902316</a></p>
<hr>
<ol start="6">
<li>死锁解法</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649513120765.png"></p>
<hr>
<ol start="7">
<li>区分进程和线程</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process  </span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep  </span><br><span class="line">counter = <span class="number">0</span>  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sub_task</span>(<span class="params">string</span>) :  </span><br><span class="line">    <span class="keyword">global</span> counter  </span><br><span class="line">    <span class="keyword">while</span> counter &lt; <span class="number">5</span>:  </span><br><span class="line">        <span class="built_in">print</span>(string, end=<span class="string">&#x27;&#x27;</span>, flush=<span class="literal">True</span>)  </span><br><span class="line">        counter += <span class="number">1</span>  </span><br><span class="line">        sleep(<span class="number">0.01</span>)  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():  </span><br><span class="line">    Process(target=sub_task, args=(<span class="string">&#x27;Ping&#x27;</span>,)).start()  </span><br><span class="line">    Process(target=sub_task, args=(<span class="string">&#x27;Pong&#x27;</span>,)).start()  </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:  </span><br><span class="line">    main()  </span><br></pre></td></tr></table></figure>
<p>上代码是<strong>进程</strong>，各进程counter不会相互影响，只是顺序会有所不同，总数一致。<br>下代码是线程，会共享counter。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sub_task</span>(<span class="params">string</span>) :</span><br><span class="line">    <span class="keyword">global</span> counter</span><br><span class="line">    <span class="keyword">while</span> counter &lt; <span class="number">5</span>:</span><br><span class="line">        <span class="built_in">print</span>(string, end=<span class="string">&#x27;&#x27;</span>, flush=<span class="literal">True</span>)</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">        sleep(<span class="number">0.1</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    p1 = threading.Thread(target=sub_task, args=(<span class="string">&#x27;Ping&#x27;</span>,)).start()</span><br><span class="line">    p2 = threading.Thread(target=sub_task, args=(<span class="string">&#x27;Pong&#x27;</span>,)).start()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:  </span><br><span class="line">    main()  </span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://danggeovo.github.io/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-ch4%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="danggeOvO">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dangge の 小小世界">
      <meta itemprop="description" content="记录生活与学习!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | dangge の 小小世界">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-ch4%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" class="post-title-link" itemprop="url">Python学习-ch4 流程控制</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-10 13:48:32" itemprop="dateCreated datePublished" datetime="2023-04-10T13:48:32+08:00">2023-04-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-08 18:16:18" itemprop="dateModified" datetime="2023-11-08T18:16:18+08:00">2023-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">【-基础知识-】编程语言学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/python%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">python学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>6.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>13 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="分支结构"><a href="#分支结构" class="headerlink" title="分支结构"></a>分支结构</h1><blockquote>
<p>思维导图如下：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639590.png"></p>
<h2 id="if语句的三种方式"><a href="#if语句的三种方式" class="headerlink" title="if语句的三种方式"></a>if语句的三种方式</h2><blockquote>
<p>单分支结构</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件：</span><br><span class="line">		代码块</span><br></pre></td></tr></table></figure>

<ol>
<li>此结构可以用于字典的调用，提高健壮性</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mydict = <span class="built_in">dict</span>(name=<span class="string">&#x27;xyq&#x27;</span>,age=<span class="string">&#x27;21&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> mydict:</span><br><span class="line">		mydict.pop(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">		</span><br><span class="line"><span class="built_in">print</span>(mydict)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>列表中也可以使用</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mylist = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="number">2</span> <span class="keyword">in</span> mylist:</span><br><span class="line">		mylist.remove(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(mylist)</span><br></pre></td></tr></table></figure>

<hr>
<blockquote>
<p>双分支结构</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span> 条件：</span><br><span class="line">		代码块</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">		代码块</span><br></pre></td></tr></table></figure>

<p><strong>代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;你的名字：&quot;</span>)</span><br><span class="line">age = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;你的年龄：&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> name == <span class="string">&#x27;xyq&#x27;</span> <span class="keyword">and</span> age == <span class="number">21</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;right!&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;wrong!&quot;</span>)</span><br></pre></td></tr></table></figure>

<hr>
<blockquote>
<p>多分支结构</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件<span class="number">1</span>：</span><br><span class="line">	代码块<span class="number">1</span></span><br><span class="line"><span class="keyword">elif</span> 条件<span class="number">2</span>：</span><br><span class="line">	代码块<span class="number">2</span></span><br><span class="line">    .....</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	代码块n</span><br></pre></td></tr></table></figure>

<p><strong>代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;你的名字：&quot;</span>)</span><br><span class="line">age = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;你的年龄：&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> name == <span class="string">&#x27;xyq&#x27;</span> <span class="keyword">and</span> age == <span class="number">21</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;right!&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> name == <span class="string">&#x27;xyq&#x27;</span> <span class="keyword">or</span> age == <span class="number">21</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;little right!&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;wrong!&quot;</span>)</span><br><span class="line">	</span><br></pre></td></tr></table></figure>
<h2 id="if语句需要注意的问题"><a href="#if语句需要注意的问题" class="headerlink" title="if语句需要注意的问题"></a>if语句需要注意的问题</h2><blockquote>
<p>问题1：代码缩进</p>
</blockquote>
<p>对于条件判断后的代码，处于同一个缩进的代码为一个代码块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span> age &gt;=<span class="number">21</span>:</span><br><span class="line">--------------</span><br><span class="line">:	m = <span class="number">2</span>		:</span><br><span class="line">:	<span class="built_in">print</span>(<span class="string">&quot;yes&quot;</span>):</span><br><span class="line">--------------	</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">------------</span><br><span class="line">:	m=<span class="number">3</span>     :</span><br><span class="line">------------</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;no&quot;</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>问题2：条件判断</p>
</blockquote>
<p>不一定是bool类型，也可以是：None , 0 , [] , {}</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>  = []</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">list</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;yes&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;no&quot;</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>问题3：if多分支情况</p>
</blockquote>
<p>对于多分支情况，要注意条件的排布顺序</p>
<hr>
<blockquote>
<p>补充：pass语句</p>
</blockquote>
<p>pass语句是空语句，它的作用是占位，使得程序看起来完整。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span> 条件：</span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h1 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h1><blockquote>
<p>思维导图如下：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639724.gif" title="[[[1645955236823]]]"></p>
<h2 id="while循环结构"><a href="#while循环结构" class="headerlink" title="while循环结构"></a>while循环结构</h2><blockquote>
<p>语句格式</p>
<blockquote>
<p>本质上还是条件判断语句，只是条件成立时继续执行直到退出。（一般<strong>不知道循环次数</strong>时使用此循环）</p>
</blockquote>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">while</span> 条件判断 ：</span><br><span class="line">	代码块</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<p><strong>代码示例</strong>：（猜数）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">answer = random.randint(<span class="number">1</span>,<span class="number">100</span>)</span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    number = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;your answer:&quot;</span>))</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> number &gt; answer:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;小一点&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> number &lt; answer:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;大一点&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;对了&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;你猜了%d次&quot;</span>%count)</span><br></pre></td></tr></table></figure>
<p><strong>结果演示</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639592.png"></p>
<p><strong>重点解析</strong>：</p>
<ol>
<li><code>random</code>模块的使用。产生随机数。</li>
<li><code>while true </code>可以进行无限循环，直到退出。</li>
<li><code>break</code>可以跳出一个循环，可以作为结束条件。</li>
</ol>
<p><strong>练习</strong>：（计算平均分数）<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639657.png"></p>
<h2 id="for-in-循环结构"><a href="#for-in-循环结构" class="headerlink" title="for-in 循环结构"></a>for-in 循环结构</h2><blockquote>
<p>for in 语句格式</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">for</span> 遍历 <span class="keyword">in</span> 字符串、范围、列表等可迭代对象：</span><br><span class="line">	代码块</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<p><strong>代码示例</strong>：（求和）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">101</span>):  </span><br><span class="line">	<span class="built_in">sum</span> += x</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br></pre></td></tr></table></figure>

<p><strong>注意点</strong>：<br>range()生成的数字为<strong>前闭后开</strong>区间，所以range（101）从0到100。<br>在python3中，range()函数生成一个等差序列，不可变。<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639593.png"></p>
<h2 id="for-in-循环遍历列表和字典"><a href="#for-in-循环遍历列表和字典" class="headerlink" title="for in 循环遍历列表和字典"></a>for in 循环遍历列表和字典</h2><blockquote>
<p>遍历<strong>列表</strong>示例：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639594.png"></p>
<hr>
<blockquote>
<p>enumerate()内置函数介绍：</p>
</blockquote>
<p><strong>作用</strong>：将一个<strong>可遍历的</strong>数据对象（列表、元组、字符串等）组合为一个索引序列<br><strong>格式</strong>：<code>enumerate(list1,start=0)</code></p>
<p><strong>代码示例</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639608.png"></p>
<hr>
<blockquote>
<p>zip()内置函数介绍：</p>
</blockquote>
<p><strong>作用</strong>：将多个对象打包成一个个元组，而后返回这些元组组成的列表</p>
<p><strong>代码示例</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639609.png"></p>
<hr>
<blockquote>
<p>for in 循环遍历字典：</p>
</blockquote>
<p>在正式循环之前，先来回顾一下字典中<strong>items</strong>的相关知识：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639610.png"><br>看见，dict.items()将字典元素封装为<strong>元组</strong>，这也是<strong>for in 循环</strong>的基础。</p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dict3 = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&#x27;xyq&#x27;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">22</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一种方法：</span></span><br><span class="line"><span class="keyword">for</span> k,n <span class="keyword">in</span> dict3.items():</span><br><span class="line">	<span class="built_in">print</span>(k,n)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种方法：</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> dict3.items():</span><br><span class="line">	<span class="built_in">print</span>(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三种方法：</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> dict3:</span><br><span class="line">	<span class="built_in">print</span>(key,dict3[key])</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639661.png"></p>
<hr>
<blockquote>
<p>sorted()内置函数介绍：</p>
</blockquote>
<p>前面我们已经学习过了，这里提到这个函数是因为涉及到字典。对字典进行排序是<strong>依据键的大小</strong>,并且<strong>返回一个列表</strong>。<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639658.png"></p>
<h2 id="break-与-continue"><a href="#break-与-continue" class="headerlink" title="break 与 continue"></a>break 与 continue</h2><blockquote>
<p>break：结束当前循环语句。<br>continue：立即返回到循环入口处。</p>
</blockquote>
<h2 id="代码实训–统计字符个数"><a href="#代码实训–统计字符个数" class="headerlink" title="代码实训–统计字符个数"></a>代码实训–统计字符个数</h2><blockquote>
<p>重点有以下几个：</p>
<blockquote>
<p>1、<code>string内置模块</code>的使用<br>2、<code>random模块</code>的使用<br>3、<code>fromkeys()函数</code>的使用–构建字典<br>4、字典的一些<code>操作</code>，如：遍历、取值等<br>5、<code>for in 循环结构</code></p>
</blockquote>
</blockquote>
<p><strong>下面是数字示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">number = []</span><br><span class="line">result = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    num = random.randint(<span class="number">0</span>,<span class="number">100</span>)</span><br><span class="line">    number.append(num)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> number:</span><br><span class="line">    <span class="keyword">if</span> num <span class="keyword">in</span> result.keys():</span><br><span class="line">        result[num]+=<span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        result[num]=<span class="number">1</span></span><br><span class="line">        </span><br><span class="line">max_num = <span class="built_in">max</span>(result.values())</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> result.items():</span><br><span class="line">    <span class="keyword">if</span> item[<span class="number">1</span>] == max_num:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;出现次数最多的是%d,出现次数为：%d&quot;</span>%(item[<span class="number">0</span>],item[<span class="number">1</span>]))</span><br><span class="line">    </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>下面是字符示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="comment">#生成全部大小写字母、数字和符号</span></span><br><span class="line">x = string.ascii_letters + string.digits + string.punctuation</span><br><span class="line">mystring=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">50</span>):</span><br><span class="line">    mystring+=random.choice(x) <span class="comment">#choice方法返回一个列表，元组或字符串的随机项</span></span><br><span class="line"><span class="comment">#利用fromkeys()形成一个字典，所有键的值均为0，重复的键将被自动忽略</span></span><br><span class="line"></span><br><span class="line">mydict = <span class="built_in">dict</span>.fromkeys(mystring,<span class="number">0</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> mystring:</span><br><span class="line">    mydict[i]+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">max_num = <span class="built_in">max</span>(mydict.values())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#输出字符以及次数，即字典的键和值</span></span><br><span class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> mydict.items():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;字符&#123;&#125;有&#123;&#125;次&#x27;</span>.<span class="built_in">format</span>(key,value))</span><br><span class="line"><span class="comment">#找到最大的次数    </span></span><br><span class="line">max_num = <span class="built_in">max</span>(mydict.values())</span><br><span class="line"><span class="built_in">print</span>(max_num)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> mydict.items():</span><br><span class="line">    <span class="keyword">if</span> value == max_num:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;出现次数最大的字符为：%s，出现的次数为：%d&quot;</span>%(key,value))</span><br></pre></td></tr></table></figure>

<h1 id="列表生成式"><a href="#列表生成式" class="headerlink" title="列表生成式"></a>列表生成式</h1><blockquote>
<p>这是一个python内置的强大功能，可以进行列表的生成，使得代码更为简洁。</p>
</blockquote>
<p><strong>语法格式</strong>：【表达式 for 循环计数器 in 可迭代对象】<br><strong>代码实例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">list2 = [x+<span class="number">1</span> <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="built_in">pow</span>(x,<span class="number">2</span>) <span class="keyword">for</span> x <span class="keyword">in</span> list1]]</span><br><span class="line"><span class="built_in">print</span>(list2)</span><br><span class="line"></span><br><span class="line">list3 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">list4 = [<span class="string">&#x27;name1&#x27;</span>,<span class="string">&#x27;name2&#x27;</span>,<span class="string">&#x27;name3&#x27;</span>]</span><br><span class="line">L = [x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">zip</span>(list3,list4)]</span><br><span class="line"><span class="built_in">print</span>(L)</span><br><span class="line"></span><br><span class="line">list5 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">list6 = [x <span class="keyword">for</span> x <span class="keyword">in</span> list5 <span class="keyword">if</span> x%<span class="number">2</span>==<span class="number">1</span>] <span class="comment"># 使用if语句进行筛选元素</span></span><br><span class="line">ptint(list6)</span><br></pre></td></tr></table></figure>
<p><strong>结果演示</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639622.png"></p>
<p><strong>注意点</strong>：<br>1、注意使用时的格式，要把输入元素放在<strong>第一位</strong>。也可以<strong>使用if语句</strong>进一步选择元素。<br>2、<strong>zip()可以</strong>使多个列表的元素一一对应后成为一个新的列表，其中的每一个元素是一个元组。</p>
<h1 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h1><blockquote>
<p>采用生成器创建列表更加节省空间。</p>
<blockquote>
<p>在列表生成式使用时，对于列表元素较多时，不建议使用。因为这种方法会实例化一个对象，占用内存空间。<br>而生成器是一边循环一边计算的，可以适用。 </p>
</blockquote>
</blockquote>
<p><strong>语法格式</strong>：<code>(表达式 for 循环计数器 in 可迭代对象)</code><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639662.png"></p>
<p><strong>输出方法</strong>：（无法通过print直接输出元素）</p>
<ol>
<li><p>通过next方法输出<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639667.png"><br> 会根据元素个数单个取出元素，但是这种方法太低效。</p>
</li>
<li><p>使用for in 循环输出<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639663.png"></p>
</li>
</ol>
<h1 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h1><h2 id="可迭代对象"><a href="#可迭代对象" class="headerlink" title="可迭代对象"></a>可迭代对象</h2><p><strong>定义</strong>：可迭代对象是指可以直接<strong>作用于for循环</strong>的对象。<br><strong>分类</strong>：</p>
<ul>
<li>数据类型：tuple、list、dict、set、string</li>
<li>generator：生成器或者带yield的generator function</li>
</ul>
<p><strong>易错点</strong>：有无下标<strong>不是</strong>判断是否为可迭代对象的条件。如字典、集合等<strong>无下标</strong>仍为可迭代对象。</p>
<blockquote>
<p>如何判断是否为可迭代对象呢？</p>
</blockquote>
<p>使用collections模型的Iterable类型判断是否为可迭代对象。</p>
<p><strong>代码实例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>  collections </span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用isinstance()函数判断一个对象是否为已知类型</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(<span class="string">&#x27;abc&#x27;</span>,Iterable))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],Iterable))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(<span class="number">123</span>,Iterable))</span><br></pre></td></tr></table></figure>
<p><strong>结果演示</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639664.png"></p>
<h2 id="什么是迭代器（Iterator"><a href="#什么是迭代器（Iterator" class="headerlink" title="什么是迭代器（Iterator)"></a>什么是迭代器（Iterator)</h2><p>迭代器就是<strong>具有next方法</strong>的对象。</p>
<blockquote>
<p>list、dict、str、set、tuple虽然是一个Iterable,却不是Iterator</p>
</blockquote>
<p>使用dir()查看上述类型，并没有next方法。</p>
<hr>
<blockquote>
<p>Iterator的解释</p>
</blockquote>
<p><code>Iterator</code>是一个<strong>数据流</strong>，可以看作是一个有序序列，但是<strong>不知道</strong>序列的长度。<br>在使用<strong>next()函数</strong>时可以实现数据的下一步计算，即只有需要返回时才会进行数据的计算（<strong>惰性计算</strong>）</p>
<blockquote>
<p>Iterator的创建方法</p>
</blockquote>
<p>1、可以使用<strong>iter函数</strong>获得Iterator对象（如下图）</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639665.png"></p>
<p>2、使用<strong>for循环</strong>或者<strong>while循环</strong>进行遍历</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">L1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">g = <span class="built_in">iter</span>(L1)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(g))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用for循环遍历</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> g:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用while循环遍历（用到except捕获错误信息）</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">next</span>(g))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">except</span> StopIteration:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

<h1 id="问题补充"><a href="#问题补充" class="headerlink" title="问题补充"></a>问题补充</h1><blockquote>
<p>主要记录在头歌实训和作业上的收获</p>
</blockquote>
<h2 id="应用实例"><a href="#应用实例" class="headerlink" title="应用实例"></a>应用实例</h2><ol>
<li>列表、循环–约瑟夫环问题</li>
</ol>
<p><strong>题干</strong>：<br>有15个基督徒和15个非基督徒在海上遇险，为了能让一部分人活下来不得不将其中15个人扔到海里面去，有个人想了个办法就是大家围成一个圈，由某个人开始从1报数，报到9的人就扔到海里面，他后面的人接着从1开始报数，报到9的人继续扔到海里面，直到扔掉15个人。由于上帝的保佑，15个基督徒都幸免于难，问这些人最开始是怎么站的，哪些位置是基督徒哪些位置是非基督徒。（用1代表基督徒，0代表非基督徒）</p>
<p><strong>代码</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    index = <span class="number">0</span>  <span class="comment"># 用于下标索引</span></span><br><span class="line">    count = <span class="number">0</span>  <span class="comment"># 记录非基督教徒人数</span></span><br><span class="line">    number = <span class="number">0</span> <span class="comment"># 记录当前数到的数字</span></span><br><span class="line">    list1 = [<span class="number">1</span>]*<span class="number">30</span></span><br><span class="line">    <span class="keyword">while</span> count&lt;<span class="number">15</span>:</span><br><span class="line">        <span class="keyword">if</span> list1[index] == <span class="number">1</span>:</span><br><span class="line">            number += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> number == <span class="number">9</span>:</span><br><span class="line">                list1[index]=<span class="number">0</span> <span class="comment"># 相当于扔到海里</span></span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">                number = <span class="number">0</span></span><br><span class="line">        index+=<span class="number">1</span></span><br><span class="line">        index%=<span class="number">30</span>  <span class="comment"># 将列表当做一个圆圈，当读到最后时返回第一位</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> list1:</span><br><span class="line">        <span class="built_in">print</span>(i,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>打印三角形–for in 循环</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,row+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;*&quot;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 靠右三角形</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,row+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(row-i):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot; &quot;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> m <span class="keyword">in</span> <span class="built_in">range</span>(i):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;*&quot;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 中间三角形</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(row):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(row-i-<span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot; &quot;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> m <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>*(i+<span class="number">1</span>)-<span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;*&quot;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong>：<br>使用range()生成的序列是<strong>前闭后开</strong>的。若为单个参数，则其中数字个数就是<strong>参数值</strong>。</p>
<ol start="3">
<li>随机数生成–双色球生成</li>
</ol>
<p><strong>题干</strong>：<br>双色球选号由7个数字组成y，其中有6个红球，其号码的取值范围为[1,33],一个蓝球的取值范围为[1,16],要求6个红球从小到大排列，蓝球在最后输出。其输出格式为09 12 16 20 30 33 | 03。（注意，如双色球号码为3，则必须输出03）</p>
<p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randrange, randint, sample</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">display</span>(<span class="params">balls</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%02d &quot;</span>%balls[i],end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;| %02d &quot;</span>%balls[i+<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">random_select</span>():</span><br><span class="line"></span><br><span class="line">    list1 = [x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">34</span>)]</span><br><span class="line">    </span><br><span class="line">    select_num1 = sample(list1,<span class="number">6</span>)</span><br><span class="line">    select_num1.sort()</span><br><span class="line">    select_num1.append(randint(<span class="number">1</span>,<span class="number">16</span>))</span><br><span class="line">    <span class="keyword">return</span> select_num1</span><br><span class="line"></span><br><span class="line"><span class="comment">#n为注数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">n</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        display(random_select())</span><br><span class="line">        </span><br><span class="line">random.seed(<span class="number">3</span>)</span><br><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main(n)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意点</strong>：<br>1、<code>randint(1,15)</code>在【1，15】中选择一个数。<code>sample(list1,6)</code>从list1中等可能选择6个数组成一个列表。<br>2、一定要分清列表的方法和函数的区别，例如：<code>list1 = list1.sort()</code>是错误的，要使用<code>list1.sort()</code>.</p>
<h2 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h2><ol>
<li>生成器</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639666.png"></p>
<p>其类型都是生成器<code>&lt;class &#39;generator&#39;&gt;</code><br>可以使用for in 读取，但是不可以直接输出。</p>
<hr>
<ol start="2">
<li>enumerate(x) 函数<br><code>enumerate() 函数</code>用于将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出数据和数据下标，一般用在 for 循环当中。</li>
</ol>
<p><strong>实例</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639668.png"></p>
<hr>
<ol start="3">
<li><code>str.replace()方法</code></li>
</ol>
<p>Python replace() 方法把字符串中的 old（旧字符串） 替换成 new(新字符串)，如果指定第三个参数max，则替换不超过 max 次。</p>
<p><strong>注</strong>：因为字符串是不可变序列，所以会生成一个新的字符串，源字符串不变，</p>
<hr>
<ol start="4">
<li>排序问题</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639669.png"><br>key参数：自定义比较规则。这里是比较字符串第二个字符</p>
<p><a target="_blank" rel="noopener" href="http://c.biancheng.net/view/2239.html">http://c.biancheng.net/view/2239.html</a></p>
<hr>
<ol start="5">
<li>遍历列表</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752639698.png"></p>
<p>列表会动态变化的。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://danggeovo.github.io/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-ch3%E7%BB%84%E5%90%88%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="danggeOvO">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dangge の 小小世界">
      <meta itemprop="description" content="记录生活与学习!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | dangge の 小小世界">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-ch3%E7%BB%84%E5%90%88%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="post-title-link" itemprop="url">Python学习-ch3组合数据类型</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-10 13:48:32" itemprop="dateCreated datePublished" datetime="2023-04-10T13:48:32+08:00">2023-04-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-08 18:16:16" itemprop="dateModified" datetime="2023-11-08T18:16:16+08:00">2023-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">【-基础知识-】编程语言学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/python%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">python学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>5.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>10 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="导学"><a href="#导学" class="headerlink" title="导学"></a>导学</h1><h2 id="本节知识点"><a href="#本节知识点" class="headerlink" title="本节知识点"></a>本节知识点</h2><p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739548.png" alt="本节知识点"></p>
<p>注：本节内容很重要，但是也很细很杂，所以我们不能只是照抄一遍，还要加强记忆，不要混淆。<br>在下面的整理中，也会尽量条理的进行记录，便于记忆和查阅。</p>
<h2 id="目标和任务"><a href="#目标和任务" class="headerlink" title="目标和任务"></a>目标和任务</h2><p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739556.png" alt="目标、任务"></p>
<h1 id="3-1-序列"><a href="#3-1-序列" class="headerlink" title="3.1 序列"></a>3.1 序列</h1><blockquote>
<p>本节思维导图</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739544.png" alt="思维导图"></p>
<h2 id="3-1-1-序列简介"><a href="#3-1-1-序列简介" class="headerlink" title="3.1.1 序列简介"></a>3.1.1 序列简介</h2><ul>
<li>序列是一种包含多种数据的数据结构，这种数据结构按照顺序存储。python中常见的序列类型包含<strong>字符串、列表、元组</strong>。</li>
<li><strong>不可变序列</strong>是指数据结构一旦建立，就不能修改其中的元素，<strong>字符串</strong>和<strong>元组</strong>是不可变序列。</li>
<li><strong>可变序列</strong>：与上相反，其元素可以进行修改，<strong>列表</strong>、<strong>字典</strong>、<strong>集合</strong>是可变序列。</li>
<li><strong>正向递增</strong>序号，从<strong>0</strong>开始；<strong>反向递增</strong>序列，从**-1**开始。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739546.png" alt="递增图"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739547.png" alt="示例"></p>
<p><strong>注</strong>：对于可变序列，改变其中元素的值，其<strong>地址</strong>不会发送改变，</p>
<h2 id="3-1-2-创建列表和元组"><a href="#3-1-2-创建列表和元组" class="headerlink" title="3.1.2 创建列表和元组"></a>3.1.2 创建列表和元组</h2><blockquote>
<p>使用[item0,item1,item2…]创建列表<br>使用(item0,item1,item2…)创建元组</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739550.png" alt="eg3.1.2-1"></p>
<hr>
<blockquote>
<p>列表和元组之中的数据项可以相同也可以不同。</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739551.png" alt="eg3.1.2-2"></p>
<h1 id="3-2-列表和元组的通用操作"><a href="#3-2-列表和元组的通用操作" class="headerlink" title="3.2 列表和元组的通用操作"></a>3.2 列表和元组的通用操作</h1><blockquote>
<p>这一小节介绍列表和元组的通用操作，也就是二者都可以使用的操作，后面再介绍二者的特有操作。</p>
</blockquote>
<p>本节思维导图：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739566.png" alt="思维导图-3.2"></p>
<h2 id="通用操作1：索引查找和切片"><a href="#通用操作1：索引查找和切片" class="headerlink" title="通用操作1：索引查找和切片"></a>通用操作1：索引查找和切片</h2><blockquote>
<p>通过索引访问元素</p>
</blockquote>
<p>这一操作在前面已经介绍过，不再赘述。需要注意的是访问时的<strong>正向和反向</strong>起始值的区别。</p>
<hr>
<blockquote>
<p><strong>slice切片</strong></p>
<blockquote>
<p>此内容很重要，也很灵活，要多多实践。<br>只要序列可以<strong>通过索引</strong>进行操作，就可以进行切片。包括：字符串、元组、列表、range等有序序列。</p>
</blockquote>
</blockquote>
<p><strong>作用</strong>：通过索引获取序列中的某一段<br><strong>语法格式</strong>：<code> [start:end:step]</code></p>
<ul>
<li>start:切片开始的索引，默认为0。</li>
<li>end:切片结束的索引，默认为序列长度。（不包含end)</li>
<li>step: 步长，默认为1。其正负表示切片方向。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739557.png" alt="示例"></p>
<p>进行切片操作时，最重要的是<strong>判断对起始和结束的位置</strong>，同时结束位置是<strong>开区间</strong>，不取此值。<br>但是当结束位为空时，会<strong>根据步长</strong>决定是走到最后还是最前端。</p>
<h2 id="通用操作2"><a href="#通用操作2" class="headerlink" title="通用操作2"></a>通用操作2</h2><blockquote>
<p>操作1：查找和计数——&gt;</p>
</blockquote>
<ul>
<li><code>list.index(x)</code>:x在列表中的第一次出现的位置，不存在<strong>抛出异常</strong>。</li>
<li><code>list.count(x)</code>:x在列表中出现的次数，不存在<strong>返回0</strong>。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739555.png" alt="index-eg"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739558.png" alt="count-eg"></p>
<hr>
<blockquote>
<p>操作2：最大值、最小值、长度——&gt;</p>
</blockquote>
<p>使用内置函数<code>max(),min(),len()</code>实现上三功能。<br>注：列表和元组的元素类型必须相同。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739560.png" alt="eg-3.2.2"></p>
<hr>
<blockquote>
<p>操作3：加法、乘法、in运算——&gt;</p>
</blockquote>
<ul>
<li><code>list1+list2</code>:返回二者元素之和</li>
<li><code>list * n </code>:对应的列表或者元组重复n遍</li>
<li><code>x in list1</code> :判断x是否在其中，True or False</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739561.png" alt="加法"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739562.png" alt="乘法"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739565.png" alt="in运算"></p>
<hr>
<blockquote>
<p>操作4：序列封包和解包——&gt;</p>
</blockquote>
<ul>
<li><strong>序列封包</strong>：将多个值赋给一个变量时，python会把这些值封装为一个元组。</li>
<li><strong>序列解包</strong>：将序列直接赋给多个变量时，序列中的元素一次赋值。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739616.png" alt="示例"></p>
<h1 id="3-3-列表的操作"><a href="#3-3-列表的操作" class="headerlink" title="3.3 列表的操作"></a>3.3 列表的操作</h1><blockquote>
<p>下面来介绍一下列表的特有操作</p>
</blockquote>
<p>思维导图如下：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739619.png" alt="思维导图-3.3"></p>
<h2 id="3-3-1-学前准备：dir-函数"><a href="#3-3-1-学前准备：dir-函数" class="headerlink" title="3.3.1 学前准备：dir()函数"></a>3.3.1 学前准备：dir()函数</h2><blockquote>
<p>dir()函数可以查看对象内的所有的属性和方法</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739624.png" alt="eg-3.3.1"></p>
<p>在一系列方法里我们要重点关注不带下划线的部分。</p>
<h2 id="3-3-2-常用操作汇总"><a href="#3-3-2-常用操作汇总" class="headerlink" title="3.3.2 常用操作汇总"></a>3.3.2 常用操作汇总</h2><blockquote>
<p>以下操作会改变原列表数据，所以元组不可以使用。</p>
</blockquote>
<blockquote>
<p>操作1：list()创建列表</p>
</blockquote>
<p>使用<strong>内置函数</strong><code>list()</code>创建列表</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739625.png" alt="eg-1"></p>
<hr>
<blockquote>
<p>操作2：增加元素</p>
</blockquote>
<ul>
<li><code>append(x)</code>：在列表尾部追加元素。（注：此方法可以接受单个值，也可以接收元组或列表，但是此时，元组和列表是作为<strong>一个整体</strong>追加的，这样就形成了嵌套。）</li>
<li><code>insert(d,x)</code>：在列表的指定位置插入元素</li>
<li><code>extend(x)</code>：将一个列表追加到列表尾部，不是作为一个整体。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739644.png" alt="eg-2"></p>
<p><strong>注</strong>:使用extend()追加元素是，必须是<strong>可迭代对象</strong>（for in可遍历：列表、字符串、元组、字典） </p>
<hr>
<blockquote>
<p>操作3：删除元素</p>
</blockquote>
<ul>
<li><code>del()</code>：根据索引删除列表的一个元素或一段区间的元素</li>
<li><code>remove()</code>：根据<strong>元素本身</strong>删除列表的某一个元素</li>
<li><code>clear()</code>：清空列表</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739730.png" alt="eg-3"><br><strong>这里注意</strong>：del()的使用与其他不同，是在<strong>列表前面</strong>。</p>
<p>下面是<strong>一个例子</strong>：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739742.png"></p>
<p>我们发现，第二个方法无法实现。这是因为我们删除的x与 for in的x是一个列表，而这个<strong>列表是变化</strong>的。</p>
<hr>
<blockquote>
<p>操作4：置逆和排序</p>
</blockquote>
<ul>
<li><code>reverse()</code>：将列表元素置逆，返回一个迭代器。</li>
<li><code>sort()</code>：将列表元素排序（默认从小到大。使用参数reverse&#x3D;True可以反向排序）</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739744.png" alt="eg-4-1"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739745.png" alt="eg-4-2"></p>
<p><strong>注</strong>：内置函数sorted()也可进行排序，其余sort()的<strong>区别如下</strong>：</p>
<ol>
<li>list.sort()为列表定义的，而sorted函数可以接受任何可迭代对象。</li>
<li>list.sort()会直接修改原列表，而sorted会产生一个新的排序列表。</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739746.png"><br>可见，使用sorted()不会改变原列表，而是生成一个新的列表。</p>
<hr>
<blockquote>
<p>操作5：弹出元素</p>
</blockquote>
<ul>
<li><code>pop()</code>：将列表作为栈，实现出栈操作。入栈操作使用append()。</li>
<li><code>pop(0)</code>：将列表当做队列，实现出队操作。入队使用append()。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739748.png" alt="eg-5"></p>
<h2 id="3-3-3-深拷贝和浅拷贝"><a href="#3-3-3-深拷贝和浅拷贝" class="headerlink" title="3.3.3 深拷贝和浅拷贝"></a>3.3.3 深拷贝和浅拷贝</h2><ul>
<li>shalldow copy 浅拷贝</li>
<li>deepcopy 深拷贝</li>
</ul>
<blockquote>
<p>shalldow copy 浅拷贝</p>
</blockquote>
<p><code>list.copy()</code>与<code>copy.copy(list)</code>都是浅拷贝</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739749.png" alt="浅拷贝"></p>
<p>可见，浅拷贝后的两个列表是存在联系的，具体是拷贝过后的list2如果改变其可变元素（如列表）,会使得list1也一起发生变化。</p>
<blockquote>
<p>deepcopy 深拷贝</p>
</blockquote>
<p><code>copy.deepcopy(list)</code>是深拷贝的实现方法。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739751.png" alt="深拷贝"></p>
<p>深拷贝的两个列表无关联。</p>
<blockquote>
<p>list1&#x3D;list2</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739752.png" alt="等号"></p>
<p>经过等号连接的两个列表是完全关联的，一个变化另一个也会变化。</p>
<h3 id="三种拷贝方式的原因"><a href="#三种拷贝方式的原因" class="headerlink" title="三种拷贝方式的原因"></a>三种拷贝方式的原因</h3><blockquote>
<p>python对数据的存储方式的不同</p>
</blockquote>
<p>究其原因，在于拷贝后的列表，其各个元素的存储空间是否与原列表的存储空间相同。</p>
<ul>
<li>浅拷贝：可变元素的存储空间与原列表一致，其他元素有新的存储空间。</li>
<li>深拷贝：拷贝后的列表其元素都有了新的存储空间。</li>
<li>等号：拷贝后的列表其元素与原列表元素存储空间一致。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739754.png" alt="验证"></p>
<h1 id="3-4-元组操作"><a href="#3-4-元组操作" class="headerlink" title="3.4 元组操作"></a>3.4 元组操作</h1><blockquote>
<p>思维导图：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739756.png" alt="思维导图-3.4"></p>
</blockquote>
<p>相对于列表，元组在创建之后不可改变。</p>
<blockquote>
<p>操作1：元组的创建</p>
</blockquote>
<p>使用<code>tuple()</code>内置函数或者<code>(item,)</code>进行创建</p>
<p>注：使用小括号进行创建时，如果只有一个元素，需要在其后加上逗号。</p>
<hr>
<blockquote>
<p>操作2：元组和列表的转换（内置函数）</p>
</blockquote>
<ul>
<li><code>list()</code>将元组转换为列表</li>
<li><code>tuple()</code>将列表转换为元组</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739758.png" alt="eg2"></p>
<p>通过这种方法可以实现元组的变化。</p>
<h1 id="3-5-字典"><a href="#3-5-字典" class="headerlink" title="3.5 字典"></a>3.5 字典</h1><blockquote>
<p>列表和元组都是一个有序序列，可以通过索引访问元素。但是如果我们不知道索引，就需要进行遍历查找元素。这是一个耗时的过程，所以引入字典。<br>假设数据本身<strong>具有唯一性</strong>，这时可以通过字典的方式进行存储，实现<strong>快速查找</strong>。</p>
</blockquote>
<p>本节思维导图：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739797.png" alt="思维导图-3.5"></p>
<h2 id="3-5-1-字典的创建和访问"><a href="#3-5-1-字典的创建和访问" class="headerlink" title="3.5.1 字典的创建和访问"></a>3.5.1 字典的创建和访问</h2><blockquote>
<p>操作1：字典的创建</p>
</blockquote>
<ol>
<li>通过<code>&#123;key1:value,key2:value...&#125;</code>等键值对的方式创建</li>
</ol>
<ul>
<li><strong>键</strong>可以是python中任意<strong>不可变</strong>的元素，包括：<code>实数</code>、<code>复数</code>、<code>字符串</code>、<code>元组</code>等，但不可以是</li>
<li><code> 列表</code>、<code>集合</code>、<code>字典</code>等<strong>可变元素</strong>。</li>
<li>通过键获取值的位置。</li>
<li>键是唯一的，不可重复；值不可以重复</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739760.png" alt="eg-3.5.1-1"></p>
<ol start="2">
<li>通过内置函数<code>dict()</code>创建字典</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739761.png" alt="eg-3.5.1-2"></p>
<ol start="3">
<li>以关键参数的形式创建字典</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739763.png" alt="eg-3.5.1-3"></p>
<ol start="4">
<li>fromkeys()方法</li>
</ol>
<p><strong>语法格式</strong>：<code>dict.fromkeys(seq[,value])</code><br><strong>作用</strong>：用于创建一个新的字典，</p>
<ul>
<li>seq – 字典键值列表</li>
<li>value – 可选参数, 设置键序列（seq）的值</li>
</ul>
<p><strong>例子</strong>:<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739795.png"></p>
<hr>
<blockquote>
<p>操作2：访问元素</p>
</blockquote>
<p>通过<code>dict[键] </code>访问对应的值。<br>注：字典是无序的，不可以通过索引进行访问。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739798.png" alt="eg-3.5.1-4"></p>
<blockquote>
<p>使用sorted()进行排序</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739799.png"></p>
<p>对字典进行排序，会返回一个列表，将其键进行排序。原字典不会改变。</p>
<h2 id="3-5-2-字典的增删改"><a href="#3-5-2-字典的增删改" class="headerlink" title="3.5.2 字典的增删改"></a>3.5.2 字典的增删改</h2><blockquote>
<p>操作1: 增加字典元素</p>
</blockquote>
<p><code>d[key]=value</code>:将key对应的值修改为value,不存在则增加对应键值对 .</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739829.png" alt="eg-3.5.2-2"></p>
<hr>
<blockquote>
<p>操作2:删除元素(后置)</p>
</blockquote>
<ul>
<li><code>del dict[key]</code>:通过键来删除元素,键不存在会报错.</li>
<li><code>popitem()</code><strong>返回</strong>并删除字典的最后一个键值对.,封装为<strong>一个元组</strong>（如下图）</li>
<li><code>pop(key)</code>:key存在就删除,并<strong>返回value值</strong>.</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739936.png" alt="eg1"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739937.png" alt="eg2"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739938.png" alt="eg3"></p>
<p><strong>注</strong>:del是内置函数,而其余两个为方法,后置且使用小括号.</p>
<hr>
<blockquote>
<p>get()和item()方法</p>
</blockquote>
<ul>
<li><code>get()</code>:用来返回指定<strong>键</strong>对应的值,不存在时返回None.</li>
<li><code>items()</code>:用于返回键值对,使用元组封装。<strong>可以使用这个方法使用for in进行遍历</strong>。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739939.png" alt="eg-3.5.2-3"></p>
<hr>
<blockquote>
<p>keys()方法和values()方法</p>
</blockquote>
<ul>
<li><code>keys()</code>:返回字典的键，以列表的形式。</li>
<li><code>values()</code>:返回字典的值，以列表的形式。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739940.png" alt="eg-3.5.2-4"></p>
<hr>
<blockquote>
<p>updata方法</p>
</blockquote>
<p><strong>语法格式</strong>：<code>d1.update(d2)</code><br><strong>作用</strong>：会把d2放到d1中，重复的元素会以d2为主进行覆盖。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739941.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739942.png"></p>
<hr>
<blockquote>
<p>字典长度和字典检索</p>
</blockquote>
<ul>
<li><code>len(dict)</code>:返回字典中键的数目</li>
<li><code>key in dict</code> :某键是否存在,True  or  False</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739943.png" alt="eg-3.5.2-5"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739944.png" alt="eg-3.5.2-6"></p>
<hr>
<blockquote>
<p>字典的应用：计数器</p>
</blockquote>
<p><strong>思路</strong>：利用for in 循环进行遍历列表，而后通过dict[key]+&#x3D;1的形式进行计数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">itemList = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">5</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">counter = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> itemList:</span><br><span class="line">    <span class="keyword">if</span> item <span class="keyword">in</span> counter:</span><br><span class="line">        counter[item]+=<span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        counter[item]=<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(counter)</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<h1 id="3-6-容器类"><a href="#3-6-容器类" class="headerlink" title="3.6 容器类"></a>3.6 容器类</h1><blockquote>
<p>主要介绍collections容器类,作为上数据类型的替代选择</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739945.png" alt="思维导图-3.6"></p>
<p>会在模块扩展进行介绍.</p>
<h1 id="3-7-比较各个方法的时间效率"><a href="#3-7-比较各个方法的时间效率" class="headerlink" title="3.7 比较各个方法的时间效率"></a>3.7 比较各个方法的时间效率</h1><blockquote>
<p>比较list的append()和insert()的时间效率</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">time_aver1</span>(<span class="params">n</span>):</span><br><span class="line">    list1 = []</span><br><span class="line">    start = time()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        list1.append(<span class="literal">None</span>)</span><br><span class="line">    end = time()</span><br><span class="line">    <span class="keyword">return</span> (end-start)/n</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    time_append = time_aver1(<span class="number">10000</span>)</span><br><span class="line">    <span class="built_in">print</span>(time_append)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">time_aver2</span>(<span class="params">n</span>):</span><br><span class="line">    list1 = []</span><br><span class="line">    start = time()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        list1.insert(<span class="number">5</span>,<span class="literal">None</span>)</span><br><span class="line">    end = time()</span><br><span class="line">    <span class="keyword">return</span> (end-start)/n</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"></span><br><span class="line">    time_insert = time_aver2(<span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(time_insert)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p>通过比较可以看出，<strong>append()的时间效率高于insert()</strong><br><strong>原因</strong>：列表并不是链表，而是一种<strong>动态的数组</strong>。在进行插入时，append（）会直接在列表最后插入元素，没有之后元素的移动；而insert()在插入时会查询插入的位置，同时将其后的元素后移，导致时间效率较低。</p>
<p>我们可以使用insert（）在队尾插入，发现其时间效率与append（）差不多。</p>
<blockquote>
<p>使用列表实现栈、对</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">Stack_push</span>(<span class="params">x,list1</span>):</span><br><span class="line">    list1.append(x)</span><br><span class="line">    <span class="keyword">return</span> list1</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Stack_pop</span>(<span class="params">list1</span>):</span><br><span class="line">    list1.pop()</span><br><span class="line">    <span class="keyword">return</span> list1</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">enQueue</span>(<span class="params">x,list1</span>):</span><br><span class="line">    list1.append(x)</span><br><span class="line">    <span class="keyword">return</span> list1</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">deQueue</span>(<span class="params">list1</span>):</span><br><span class="line">    list1.pop(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> list1</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    stack1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;入栈出栈操作：&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(Stack_push(<span class="number">5</span>,stack1))</span><br><span class="line">    <span class="built_in">print</span>(Stack_pop(stack1))</span><br><span class="line">    </span><br><span class="line">    Queue = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;入队出队操作：&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(enQueue(<span class="number">5</span>,Queue))</span><br><span class="line">    <span class="built_in">print</span>(deQueue(Queue))</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739946.png"></p>
<h1 id="3-8-其他数据结构"><a href="#3-8-其他数据结构" class="headerlink" title="3.8 其他数据结构"></a>3.8 其他数据结构</h1><blockquote>
<p>灵活使用append()与popleft()</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739950.png" alt="双端队列"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739947.png" alt="堆"></p>
<hr>
<h1 id="3-9-本章总结"><a href="#3-9-本章总结" class="headerlink" title="3.9 本章总结"></a>3.9 本章总结</h1><blockquote>
<p>对上述几种数据类型的操作方法</p>
</blockquote>
<ul>
<li>对于方法，一般是直接在原类型本体上操作的，不会返回一个新的类型。例如列表进行append,前后列表的元素不同但是地址一致。</li>
<li>而对于sorted()这样的函数，会返回一个新的数据类型。</li>
</ul>
<blockquote>
<p>对可切片、可迭代、可变的理解</p>
</blockquote>
<ul>
<li>可不可以切片要看是否可以索引，即是否有下标。string、tuple、list、range是可切片，dict、set不可。</li>
<li>可不可以迭代要看是否可以for in 遍历。string、tuple、list、dict、set等可以进行迭代。但不是所有的可迭代对象都是迭代器。</li>
<li>可不可以变化强记即可，string、tuple是不可变，其余是可变。</li>
</ul>
<hr>
<blockquote>
<p>本章错误汇总</p>
</blockquote>
<p>1、一个键不可以对应多个值信息。<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739948.png"></p>
<p>2、<a target="_blank" rel="noopener" href="https://www.runoob.com/python/python-func-zip.html">zip()函数的使用</a><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739949.png" alt="2"></p>
<p>3、<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_25006671/article/details/94588915">dict.get()的使用：注意参数</a><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752739957.png"></p>
<p>4、杨辉三角的打印</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> list1:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%-d&quot;</span>%j,end=<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">    list1.append(<span class="number">0</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    list1 = [list1[k]+list1[k-<span class="number">1</span>] <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(i+<span class="number">2</span>)]</span><br><span class="line">		</span><br></pre></td></tr></table></figure>
<p>关键在于每一层列表的生成，这里<strong>使用列表生成式</strong>。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://danggeovo.github.io/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="danggeOvO">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dangge の 小小世界">
      <meta itemprop="description" content="记录生活与学习!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | dangge の 小小世界">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="post-title-link" itemprop="url">Python学习-ch2基本数据类型</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-10 13:48:32" itemprop="dateCreated datePublished" datetime="2023-04-10T13:48:32+08:00">2023-04-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-08 18:16:08" itemprop="dateModified" datetime="2023-11-08T18:16:08+08:00">2023-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">【-基础知识-】编程语言学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/python%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">python学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>8 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="导学"><a href="#导学" class="headerlink" title="导学"></a>导学</h1><blockquote>
<p>在正课开始之前对所要学习的内容进行梳理。</p>
</blockquote>
<h2 id="主要内容–7个部分"><a href="#主要内容–7个部分" class="headerlink" title="主要内容–7个部分"></a>主要内容–7个部分</h2><blockquote>
<p>变量</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185429.png" alt="变量"></p>
<blockquote>
<p>数字类型</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185432.png" alt="数字类型"></p>
<blockquote>
<p>字符串</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185434.png" alt="字符串"></p>
<blockquote>
<p>基本输入输出</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185436.png" alt="IOP"></p>
<blockquote>
<p>编程规范</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185439.png" alt="编码规范"></p>
<blockquote>
<p>编码格式</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185440.png" alt="编码格式"></p>
<blockquote>
<p>两个实例</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185441.png" alt="实例"></p>
<h2 id="目标和要求"><a href="#目标和要求" class="headerlink" title="目标和要求"></a>目标和要求</h2><p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185444.png" alt="目标和要求"></p>
<p>在本节，要求完成第一个实训作业：turtle作品，会阅读官方文档。</p>
<hr>
<blockquote>
<p>下面我们就按照上面的规划进行深入的学习——&gt;</p>
</blockquote>
<hr>
<h1 id="2-1-变量"><a href="#2-1-变量" class="headerlink" title="2.1 变量"></a>2.1 变量</h1><blockquote>
<p>下面给出本小节思维导图</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185442.png" alt="思维导图-2.1"></p>
<h2 id="变量的定义"><a href="#变量的定义" class="headerlink" title="变量的定义"></a>变量的定义</h2><ul>
<li>在编程语言的学习中，变量是最基础的东西。</li>
<li>与其他语言不同的是，Python是一个<strong>弱类型语言</strong>，不需要事先声明变量名及其类型，直接赋值即可创建各种类型的对象变量。</li>
<li>使用type(x)查看对象类型</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185445.png" alt="eg1"></p>
<blockquote>
<p>Python采用基于值的内存管理方式</p>
</blockquote>
<ul>
<li>为不同变量赋予相同的值，那么这个值<strong>在内存中只有一份</strong>，多个变量执行同一块内存地址</li>
<li>使用<code>id(x)</code>获取对象x的内存地址</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185446.png" alt="一个地址"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185448.png" alt="eg2.1"></p>
<h2 id="变量的命名规范"><a href="#变量的命名规范" class="headerlink" title="变量的命名规范"></a>变量的命名规范</h2><p>一个规范的变量名应该符合以下6条规则（最后一条是更深的要求）：</p>
<ul>
<li>以字母、下划线开头，后面可以跟任意字母、下划线、数字</li>
<li>变量名不能以数字开头</li>
<li>变量名对字母大小写敏感</li>
<li>不可以有空格以及标点符号</li>
<li>不可以使用关键字或者内置函数作为变量名</li>
<li>作为一名合格的程序员，变量的命名要与其含义相关，尽量不要使用简单的字母命名，一时的便利会带来长久的麻烦。（所以要学号英语哦）</li>
</ul>
<h2 id="查看关键字和内置函数"><a href="#查看关键字和内置函数" class="headerlink" title="查看关键字和内置函数"></a>查看关键字和内置函数</h2><blockquote>
<p>上面我们已经提到变量的命名规则，其中有一条是不可使用关键字和内置函数。在实际的编程中，我们可以一些帮助文档进行查看。</p>
</blockquote>
<ol>
<li>关键字的查看：<code>help(&#39;keywords&#39;)</code><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185468.png" alt="关键字"></li>
</ol>
<p>注：使用<code>import keyword</code>   —&gt;  <code> keyword.kwlist</code>也可以看到。<br>使用len()可以得到关键字的个数：<strong>35个</strong><br>（len属于内置函数，解释器启动既有；而内置模块需要import)</p>
<ol start="2">
<li>内置函数的查看：<code> import builtins</code> —&gt; <code> dir(builtins)</code><br>ps:该模块提供对Python的所有“内置”标识符的直接访问<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185471.png" alt="内置函数"></li>
</ol>
<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><ul>
<li>常量在指定初始值后不再改变</li>
<li>一般使用大写字母表示</li>
<li>遵循常量阅读，使得代码具有良好的可读性（PI &#x3D; 3.14等）</li>
</ul>
<h1 id="2-2数字类型"><a href="#2-2数字类型" class="headerlink" title="2.2数字类型"></a>2.2数字类型</h1><blockquote>
<p>本小节思维导图</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185473.png" alt="思维导图2.2"></p>
<p>ps：本节要求掌握基本数字类型的表示与进制之间的转换</p>
<ul>
<li>Python中的数据类型很多，比如数字、字符串、列表、字典、文件等基本数据类型</li>
<li>数据类型和值相关，而不是和变量相关。（基于值的内存管理模式）</li>
<li>数字类型包括：整数、浮点数、复数</li>
</ul>
<h2 id="整数、浮点数、复数"><a href="#整数、浮点数、复数" class="headerlink" title="整数、浮点数、复数"></a>整数、浮点数、复数</h2><h3 id="整数和浮点数"><a href="#整数和浮点数" class="headerlink" title="整数和浮点数"></a>整数和浮点数</h3><ul>
<li>整数和浮点数的差异在于是否包含小数部分</li>
<li>浮点数必须<strong>包含一个小数点</strong>，否则会被当做整数</li>
<li><code>int </code>表示整数；<code>float</code>表示浮点数</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185474.png" alt="差异"></p>
<blockquote>
<p>浮点数补充——&gt;</p>
</blockquote>
<p>浮点数有两种表示形式：</p>
<ul>
<li>十进制形式，例如：3.14  5.21等</li>
<li>科学计数形式：5.21e2或5.21E2 就是指5.21* 10^2</li>
</ul>
<p>注：只有浮点数可以使用科学计数的方法<br>并且如果运算是既有整数又有浮点数，结果为浮点数。</p>
<h3 id="复数"><a href="#复数" class="headerlink" title="复数"></a>复数</h3><p>复数的虚部用j或J表示：<code>a=3+4j  </code><br>使用 <code>x.real</code> 和 <code>x.imag</code>获取实部、虚部的数值，以<strong>浮点数</strong>的形式输出。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185476.png" alt="表示和运算"></p>
<h2 id="进制之间的转换"><a href="#进制之间的转换" class="headerlink" title="进制之间的转换"></a>进制之间的转换</h2><blockquote>
<p>整数的表示方法</p>
</blockquote>
<p>一个整数可以采用多种进制进行表示：</p>
<ul>
<li>十进制</li>
<li>二进制 0b或者0B</li>
<li>八进制 0o或者0O</li>
<li>十六进制 0x或者0X</li>
</ul>
<blockquote>
<p>不同进制之间可以进行转换(使用Python的内置函数)</p>
</blockquote>
<ul>
<li><code>int(x, d)</code>  —&gt;  接收的是字符串x，转换d进制的整数为十进制</li>
<li><code>bin(x)</code>   —&gt;   将十进制数x转换为二进制</li>
<li><code>oct(x)</code>   —&gt;   将十进制数x转换为八进制</li>
<li><code>hex(x) </code>  —&gt;   将十进制数x转换为十六进制</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185479.png" alt="eg2.2.2"></p>
<h2 id="内置模块"><a href="#内置模块" class="headerlink" title="内置模块"></a>内置模块</h2><blockquote>
<p>Python中含有很多<strong>标准库</strong>，也就是封装好的已有的代码合集。<br>Python中的标准库被组织为<strong>模块</strong>，相关的函数和数据类型被分组封装在不同的模块中，需要使用时需要进行<strong>模块的导入</strong></p>
</blockquote>
<h3 id="内置模块–math"><a href="#内置模块–math" class="headerlink" title="内置模块–math"></a>内置模块–math</h3><blockquote>
<p><code>import math</code>导入模块</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185480.png" alt="math模块"></p>
<p>注：使用<code>dir(math)</code>查看math模块下的内置函数<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185482.png" alt="dir"></p>
<h3 id="内置模块–random"><a href="#内置模块–random" class="headerlink" title="内置模块–random"></a>内置模块–random</h3><blockquote>
<p><code>random,random()</code>随机生成一个<strong>实数</strong>，在[0, 1]范围<br><code>random.randint(a, b)</code>用于生成一个指定范围的<strong>整数</strong>。(前闭后开)</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185639.png" alt="eg2.2.3"></p>
<h1 id="2-3-字符串"><a href="#2-3-字符串" class="headerlink" title="2.3 字符串"></a>2.3 字符串</h1><blockquote>
<p>下面给出本节思维导图</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185640.png" alt="思维导图2.3"></p>
<ul>
<li>字符串也是Python中最常用的数据类型</li>
<li>文本就是由一些列字符组成的字符串</li>
</ul>
<h2 id="字符串的表示"><a href="#字符串的表示" class="headerlink" title="字符串的表示"></a>字符串的表示</h2><blockquote>
<p>字符串可以使用<strong>单引号(‘…’)</strong> 或者<strong>双引号(“…”)</strong> 表示—-&gt;</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185642.png" alt="eg2.3.1"></p>
<blockquote>
<p>对于字符串中含有引号的形式，需要进行<strong>特殊处理</strong>：—-&gt;</p>
</blockquote>
<ul>
<li>第一种方法：使用不同的引号将字符串括起来。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185646.png" alt="eg1"></p>
<ul>
<li>第二种方法：使用三引号</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185647.png" alt="eg2"></p>
<ul>
<li>第三章方法：使用转义字符\，在引号之前使用\进行转义</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185648.png" alt="eg3"></p>
<p>   注：使用\n可以实现换行输出</p>
<blockquote>
<p>原始字符串的使用—-&gt;</p>
</blockquote>
<p>如果我们输出的字符串含有\符号，那么处理可以使用转义字符外，还可以在字符串前加上r，就表示原始字符串，不会把\当成特殊符号。<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185649.png" alt="eg"></p>
<h2 id="字符串的常用操作"><a href="#字符串的常用操作" class="headerlink" title="字符串的常用操作"></a>字符串的常用操作</h2><blockquote>
<p>思维导图如下：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185650.png" alt="思维导图"></p>
<h3 id="字符串的索引"><a href="#字符串的索引" class="headerlink" title="字符串的索引"></a>字符串的索引</h3><blockquote>
<p>在Python中，不支持单字符类型，单字符也是作为一个字符串使用。</p>
<blockquote>
<p>可以使用<strong>索引</strong>访问单个字符。</p>
</blockquote>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185651.png" alt="索引"></p>
<p>注：通过[x]获取对应位置的单字符，下标<strong>从0开始</strong></p>
<h3 id="字符串的拼接"><a href="#字符串的拼接" class="headerlink" title="字符串的拼接"></a>字符串的拼接</h3><blockquote>
<p>这是最基础的字符串操作：+</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185652.png" alt="拼接"></p>
<h3 id="常用的字符串方法"><a href="#常用的字符串方法" class="headerlink" title="常用的字符串方法"></a>常用的字符串方法</h3><blockquote>
<p>什么是方法？对象的行为称为方法，方法只能用于<strong>定义好的对象</strong>，函数是独立的操作。<br>调用对象的方法：<code>对象名.方法名</code></p>
</blockquote>
<ul>
<li><code>s.lower()</code> 转换为小写形式</li>
<li><code>s.upper()</code> 转换为大写形式</li>
<li><code>s.replace(&#39;old&#39;, &#39;new&#39;)</code> 内容的替换</li>
<li><code>s.find(p)</code> 查找p，存在返回下标，不存在返回-1</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185653.png" alt="eg"></p>
<p>注：通过上例我们可以看见，使用方法后不会改变对象的原始内容</p>
<ul>
<li><code> &#39;s&#39;.join(str)</code> 以指定的字符‘s’作为分隔符，将字符串str连接成一个新的字符串</li>
<li><code>str.split(s,[num]) </code>以s为指定的识别分隔符，将str字符串进行分割，num为分割次数。（无参数，默认按照空格进行分割）</li>
</ul>
<p>  <img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185654.png" alt="eg"></p>
<p>注：通过上例我们可以看到，str.split(s, [num])会在字符串里寻找s，并以此为分隔符进行分割，分割过的字符串以引号隔开；而’s’.join(str1)则是将s作为分隔符加入到字符串，形成一个整体。<br><strong>如果使用str.split()则会自动以空白字符为分隔符。</strong></p>
<ul>
<li><code>reversed() </code>内置函数：字符串置逆<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185655.png" alt="eg"></li>
</ul>
<p>注：在进行分割后再使用置逆，会以分割的部分为整体进行，而不是以一个字符。</p>
<h3 id="字符串的转换"><a href="#字符串的转换" class="headerlink" title="字符串的转换"></a>字符串的转换</h3><blockquote>
<p>字符串与数字中间的转换</p>
</blockquote>
<ul>
<li><code>str(x)</code>：将数字转换为字符串</li>
<li><code>int(x)</code>：将字符串x转换为数字</li>
<li><code>int(x,d)</code>：将d进制的字符串转换为数字</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185656.png" alt="eg"></p>
<p>注：在使用int(x,d)指定d进制时要符合规范，例如:8进制时不可出现8以上数字。</p>
<blockquote>
<p>字符串与字符值</p>
</blockquote>
<p>在内存，字符是以整数值的形式进行存储的，具体值取决于编码规则。</p>
<ul>
<li><code>ord()</code>:返回字符的值</li>
<li><code>chr()</code>:返回给定编码指定的字符</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185657.png" alt="eg"> </p>
<blockquote>
<p>补充内容：<a target="_blank" rel="noopener" href="https://www.php.cn/python-tutorials-471465.html#:~:text=python%E5%8E%BB%E6%8E%89%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%89%80%E6%9C%89%E7%A9%BA%E6%A0%BC%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A1%E3%80%81%E4%BD%BF%E7%94%A8strip%E6%96%B9%E6%B3%95%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%BC%80%E5%A4%B4%E6%88%96%E8%80%85%E7%BB%93%E5%B0%BE%E7%9A%84%E7%A9%BA%E6%A0%BC%EF%BC%9B2%E3%80%81%E4%BD%BF%E7%94%A8replace%E6%96%B9%E6%B3%95%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%BB%93%E5%B0%BE%E7%9A%84%E7%A9%BA%E6%A0%BC%EF%BC%9B3%E3%80%81%20%E4%BD%BF%E7%94%A8join%E6%96%B9%E6%B3%95%2Bsplit%E6%96%B9%E6%B3%95%EF%BC%8C%E5%8E%BB%E9%99%A4%E5%85%A8%E9%83%A8%E7%A9%BA%E6%A0%BC%E3%80%82%20%E6%9C%AC%E6%96%87%E6%93%8D%E4%BD%9C%E7%8E%AF%E5%A2%83%EF%BC%9Awindows7%E7%B3%BB%E7%BB%9F%E3%80%81python3.5%E7%89%88%EF%BC%8CDELL,G3%E7%94%B5%E8%84%91%E3%80%82%20%E4%BB%A5%E4%B8%8A%E5%B0%B1%E6%98%AFpython%E6%80%8E%E4%B9%88%E5%8E%BB%E6%8E%89%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%89%80%E6%9C%89%E7%A9%BA%E6%A0%BC%E7%9A%84%E8%AF%A6%E7%BB%86%E5%86%85%E5%AE%B9%EF%BC%8C%E6%9B%B4%E5%A4%9A%E8%AF%B7%E5%85%B3%E6%B3%A8php%E4%B8%AD%E6%96%87%E7%BD%91%E5%85%B6%E5%AE%83%E7%9B%B8%E5%85%B3%E6%96%87%E7%AB%A0%EF%BC%81%20%E5%A3%B0%E6%98%8E%EF%BC%9A%20%E6%9C%AC%E6%96%87%E5%8E%9F%E5%88%9B%E5%8F%91%E5%B8%83php%E4%B8%AD%E6%96%87%E7%BD%91%EF%BC%8C%E8%BD%AC%E8%BD%BD%E8%AF%B7%E6%B3%A8%E6%98%8E%E5%87%BA%E5%A4%84%EF%BC%8C%E6%84%9F%E8%B0%A2%E6%82%A8%E7%9A%84%E5%B0%8A%E9%87%8D%EF%BC%81">删除字符串里的空格（几种方法）</a></p>
</blockquote>
<h1 id="2-4-输入、输出"><a href="#2-4-输入、输出" class="headerlink" title="2.4 输入、输出"></a>2.4 输入、输出</h1><blockquote>
<p>本节思维导图如下：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185658.png" alt="思维导图2.4"></p>
<p>输入是Input,输出是Output,所以我们把输入输出简写为IO。<br>用户和计算机程序的交互离不开输入输出。</p>
<h2 id="输出：Output"><a href="#输出：Output" class="headerlink" title="输出：Output"></a>输出：Output</h2><blockquote>
<p>最基本的输出:<code>print()</code></p>
</blockquote>
<p><strong>作用</strong>：以字符的形式向控制台输出结果</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185659.png" alt="eg"></p>
<p>print() 可以接受一个或多个字符串，以逗号进行分割，输出时会<strong>使用空格</strong>进行替代</p>
<h3 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h3><blockquote>
<p>（使用格式限定符对输出的格式进行美化）</p>
</blockquote>
<ul>
<li>%形式</li>
<li>str.format()形式</li>
</ul>
<h4 id="形式的输出"><a href="#形式的输出" class="headerlink" title="%形式的输出"></a>%形式的输出</h4><ul>
<li>%d 格式化一个整数</li>
<li>%f 格式化一个浮点数</li>
<li>%s 格式化一个字符串</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185676.png" alt="eg"></p>
<p><strong>注:</strong> 和C语言类似，小数点<strong>后为精度</strong>，<strong>前为宽度</strong>，不足以空格替。<br>    但是和C语言不同的是在字符串之后的替换中<strong>没有逗号</strong>，而是**使用%**进行。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185677.png" alt="eg"></p>
<p><strong>注</strong>：对应于多个替换，需要使用上图格式。</p>
<h4 id="“-”-dormat-str-格式化字符串函数"><a href="#“-”-dormat-str-格式化字符串函数" class="headerlink" title="“{}”.dormat(str)格式化字符串函数"></a>“{}”.dormat(str)格式化字符串函数</h4><p>{}叫做<strong>替换槽</strong>，其中可以指定<strong>填充的字符</strong>、<strong>对其方式</strong>、替换字符的<strong>宽度</strong>。<br>其中，^ &lt; &gt; 分别代表中间对齐、左对齐、右对齐</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185679.png" alt="eg"></p>
<blockquote>
<p>如果是数字，可以在槽里指定数字的格式</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185737.png" alt="eg"></p>
<p><strong>注</strong>：使用：b,o 指定进制格式。</p>
<h2 id="输入：Input"><a href="#输入：Input" class="headerlink" title="输入：Input"></a>输入：Input</h2><blockquote>
<p>最基本的输入:input</p>
</blockquote>
<ul>
<li>作用：从控制台接收用户信息的输出，并返回字符串</li>
<li>格式: <code>变量 = input(&lt;提示信息&gt;)</code></li>
<li>注意：接收到的变量属于字符串形式</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185738.png" alt="eg"></p>
<blockquote>
<p>格式的转换</p>
</blockquote>
<p>我们知道通过input接收的变量为字符串格式，所以如果需要使用数字类型，要使用前面的转换方法。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185739.png" alt="eg"></p>
<h3 id="eval-评估函数"><a href="#eval-评估函数" class="headerlink" title="eval()评估函数"></a>eval()评估函数</h3><p>作用：执行一个字符串表达式，并返回计算值<br>本质：剥离引号</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185740.png" alt="eg"></p>
<h1 id="2-5-代码规范"><a href="#2-5-代码规范" class="headerlink" title="2.5 代码规范"></a>2.5 代码规范</h1><blockquote>
<p>编程语言从某种意义上来说作为一种工具，需要遵循一套<strong>编码规范</strong><br>在PEP8中有具体的描述：<a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0008">https://www.python.org/dev/peps/pep-0008</a></p>
</blockquote>
<blockquote>
<p>规范1：缩进</p>
</blockquote>
<ul>
<li>在Python里，使用缩进来体现代码之间的逻辑关系。</li>
<li>同一级别的代码块的缩进必须相同。</li>
<li>一般使用4个空格或者一个Tab作为一个缩进量。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185741.png" alt="缩进错误"></p>
<blockquote>
<p>规范2：注释</p>
</blockquote>
<ul>
<li>单行注释：以#开头，其后的内容为注释内容</li>
<li>多行注释：使用三个单引号或者双引号作为开始和结束标识</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185742.png" alt="eg"></p>
<p>注：前面我们知道，三引号也可以作为字符串的标识</p>
<blockquote>
<p>规范3：换行</p>
</blockquote>
<p>如果一个语句太长，可以使用换行符\进行换行<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185743.png" alt="eg"></p>
<blockquote>
<p>规范4： 必要的空行或空格</p>
</blockquote>
<ul>
<li>运算符两侧、逗号后面建议加一个空格。</li>
<li>不同功能之间的代码块建议之间加一个空行</li>
</ul>
<h1 id="2-6-字符编码"><a href="#2-6-字符编码" class="headerlink" title="2.6 字符编码"></a>2.6 字符编码</h1><blockquote>
<p>常用的编码格式：</p>
</blockquote>
<ul>
<li><strong>ACSII编码</strong>：最早只有127个字符被编码到计算机里，也就是大小写英文字母、数字和一些符号。这个编码表被称为ASCII编码。</li>
<li><strong>GB2312编码</strong>：处理中文显然一个字节是不够的，至少需要两个字节，而且还不能和ASCII码冲突，所以中国制定了GB2312编码用于处理中文。</li>
<li><strong>Unicode编码</strong>：使用两个字节表示一个字符，把所有的语言统一到一个编码格式下。</li>
<li><strong>UTF-8编码</strong>：为了节省空间，出现了“可变长编码”即UTF-8编码，UTF-8编码把一个Unicode字符根据不同的数字大小编码成1-6个字节。常用的英文字母为1个字节，汉字通常为3个字节，很生僻的字符我为4-6个字节。</li>
</ul>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185791.png" alt="eg"></p>
<p><strong>注</strong>:一般我们使用记事本编写代码时，如果使用了中文，记得设置为UTF-8的编码格式。<br>在开头使用：<code># coding=utf-8</code>即可进行声明</p>
<blockquote>
<p>解码和编码:</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185806.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1682581185914.png"></p>
<h1 id="综合示例程序：芳名和芳龄"><a href="#综合示例程序：芳名和芳龄" class="headerlink" title="综合示例程序：芳名和芳龄"></a>综合示例程序：芳名和芳龄</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">first_name = <span class="built_in">input</span>(<span class="string">&quot;请输入你的姓氏：&quot;</span>)</span><br><span class="line">last_name = <span class="built_in">input</span>(<span class="string">&quot;请输入你的名字：&quot;</span>)</span><br><span class="line">age = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入你的年龄&quot;</span>))</span><br><span class="line"></span><br><span class="line">age_10 = age-<span class="number">10</span></span><br><span class="line">age_10_8 = <span class="built_in">oct</span>(age_10)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;十年前你的年龄为：%o(八进制)&quot;</span>%age_10)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;十年前你的年龄为:&#123;:x&#125;(十六进制)&quot;</span>.<span class="built_in">format</span>(age_10))</span><br><span class="line"></span><br><span class="line">full_name = first_name + last_name</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;:*^10&#125;&quot;</span>.<span class="built_in">format</span>(full_name), <span class="string">&quot;的国标码为：&quot;</span>, full_name.encode(<span class="string">&quot;GBK&quot;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>注意点：<br>1、print之中的不同字符串可以使用逗号隔开，不用+<br>2、进制的转换输出可以直接使用%o,%d,%x。<br>3、编码格式时要使用引号”GBK”</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://danggeovo.github.io/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-ch5%20%E5%87%BD%E6%95%B0%E5%92%8C%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="danggeOvO">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dangge の 小小世界">
      <meta itemprop="description" content="记录生活与学习!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | dangge の 小小世界">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/10/Python%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0-ch5%20%E5%87%BD%E6%95%B0%E5%92%8C%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">Python学习-ch5 函数和模块</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-10 13:48:32" itemprop="dateCreated datePublished" datetime="2023-04-10T13:48:32+08:00">2023-04-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-08 18:16:20" itemprop="dateModified" datetime="2023-11-08T18:16:20+08:00">2023-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">【-基础知识-】编程语言学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/python%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">python学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>8.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>15 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="5-1函数的定义与调用"><a href="#5-1函数的定义与调用" class="headerlink" title="5.1函数的定义与调用"></a>5.1函数的定义与调用</h1><blockquote>
<p>本章思维导图</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671766.png"></p>
<h2 id="5-1-1-函数的定义与说明文档"><a href="#5-1-1-函数的定义与说明文档" class="headerlink" title="5.1.1 函数的定义与说明文档"></a>5.1.1 函数的定义与说明文档</h2><blockquote>
<p>函数的定义：</p>
</blockquote>
<p>函数是一段具有特定功能的、可复用的语句组，是一种功能抽象。</p>
<p><strong>定义格式</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> &lt;函数名&gt;(参数列表)：</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &lt;返回值列表&gt;</span><br></pre></td></tr></table></figure>

<p>代码示例：（阶乘）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fac</span>(<span class="params">n</span>):  <span class="comment"># 这里函数的参数为形参，不需要给出参数的类型。</span></span><br><span class="line">    result = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">        result *= i</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"><span class="built_in">print</span>(fac(<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<p>注：在python的<strong>math模块</strong>已经有专门的**阶乘函数factorial()**。<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671767.png"></p>
<hr>
<blockquote>
<p>函数的调用：</p>
</blockquote>
<ul>
<li>使用函数名进行已有函数的调用</li>
<li>函数调用时传入实参，带入运算</li>
<li>根据return 决定是否返回结果</li>
</ul>
<hr>
<blockquote>
<p>说明文档：</p>
</blockquote>
<p>在函数声明和函数体之间使用<strong>三引号</strong>写入说明文档，使用<code>help()</code>进行查看。</p>
<p><strong>示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fac</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    此函数用于求解阶乘</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    result = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">        result *= i</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">help</span>(fac)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671664.png"></p>
<p>注：也可以使用函数的<strong>doc属性</strong>查看帮助文档。<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671666.png"></p>
<h2 id="5-1-2-函数的返回值"><a href="#5-1-2-函数的返回值" class="headerlink" title="5.1.2 函数的返回值"></a>5.1.2 函数的返回值</h2><blockquote>
<p>函数的返回值概述：</p>
</blockquote>
<ul>
<li>函数不带return，则无返回值，相当于<strong>返回None</strong>。</li>
<li>程序有<strong>多个返回值</strong>，可以封装为列表进行返回，也可以直接返回。<strong>直接返回时以元组的形式</strong>。</li>
</ul>
<p><strong>代码示例</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671723.png"><br><strong>注</strong>：使用<strong>序列解包</strong>依次赋值亦可。</p>
<h2 id="5-1-4-函数的嵌套"><a href="#5-1-4-函数的嵌套" class="headerlink" title="5.1.4 函数的嵌套"></a>5.1.4 函数的嵌套</h2><blockquote>
<p>函数允许<strong>嵌套定义</strong>函数；函数调用自己为<strong>递归</strong>。</p>
</blockquote>
<p><strong>代码示例：（二分查找）</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">binary_search</span>(<span class="params">target,data,low,high</span>):</span><br><span class="line">    <span class="keyword">if</span> low&gt;high:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        mid = (low+high)//<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> target == data[mid]:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">elif</span> target &gt; data[mid]:</span><br><span class="line">            <span class="keyword">return</span> binary_search(target,data,mid+<span class="number">1</span>,high)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> binary_search(target,data,low,mid-<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">data = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">binary_search(<span class="number">7</span>,data,<span class="number">0</span>,<span class="built_in">len</span>(data)-<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p><strong>注意事项：递归的次数限制</strong></p>
<ul>
<li>python设置了递归的最大次数以防止无限递归。</li>
<li>使用<code> sys 模块</code>进行这个次数的查看与设置。（见代码）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用getrecursionlimit()查看最大次数</span></span><br><span class="line"><span class="built_in">print</span>(sys.getrecursionlimit())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用setrecursionlimit(x)设置最大次数</span></span><br><span class="line">sys.setrecursionlimit(<span class="number">5000</span>)</span><br><span class="line"><span class="built_in">print</span>(sys.getrecursionlimit())</span><br></pre></td></tr></table></figure>
<p><strong>结果演示</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671725.png"></p>
<h2 id="5-1-5-函数执行的起点"><a href="#5-1-5-函数执行的起点" class="headerlink" title="5.1.5 函数执行的起点"></a>5.1.5 函数执行的起点</h2><blockquote>
<p>脚本可以独立运行：</p>
<blockquote>
<p>C语言程序的起点时main()函数，而python的脚本程序可以不写main。<br>每一个python 在运行时，都有一个<code> __name__</code> 属性.</p>
</blockquote>
</blockquote>
<p><code>__name__</code>的默认值是<code>__ main__</code><br>这个属性的作用就是<strong>判断一个脚本程序是直接运行还是作为模块进行调用</strong>。<br>如果不希望直接运行，可以加上以下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if __ name __ == &quot;__ main__ &quot;:</span><br><span class="line">	print(&quot;作为模块进行调用&quot;)</span><br></pre></td></tr></table></figure>


<h1 id="5-2-函数的参数"><a href="#5-2-函数的参数" class="headerlink" title="5.2 函数的参数"></a>5.2 函数的参数</h1><blockquote>
<p>本小节思维导图：</p>
</blockquote>
<h2 id="5-2-1-位置参数"><a href="#5-2-1-位置参数" class="headerlink" title="5.2.1 位置参数"></a>5.2.1 位置参数</h2><blockquote>
<p>调用函数时<strong>实参和形参</strong>的数目和顺序必须严格一致。</p>
</blockquote>
<p><strong>例如下例</strong>（二分查找）：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671726.png"><br>当实参与形参<strong>数目不一致</strong>时会报错。</p>
<h2 id="5-2-2-默认值参数"><a href="#5-2-2-默认值参数" class="headerlink" title="5.2.2 默认值参数"></a>5.2.2 默认值参数</h2><blockquote>
<p>如果大部分参数是某个值，可以设置为<strong>默认值参数</strong>，简化函数的调用。 </p>
</blockquote>
<p><strong>代码实例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">printinfo</span>(<span class="params">name,age=<span class="number">18</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;你的名字是：&quot;</span>,name)</span><br><span class="line">    </span><br><span class="line">    age += <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;明年你的年龄是：&quot;</span>,age)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 调用函数时没有输出某个实参，则会使用默认值参数   </span></span><br><span class="line">printinfo(<span class="string">&#x27;xyq&#x27;</span>)</span><br><span class="line"><span class="comment"># 调用函数时输入了参数，则不会使用默认参数</span></span><br><span class="line">printinfo(<span class="string">&#x27;xy1&#x27;</span>,<span class="number">21</span>)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671764.png"></p>
<p><strong>注意事项</strong>：</p>
<ol>
<li>默认值参数在定义时必须放在<strong>正常参数的后面</strong>。即默认值参数右边不要有非默认值参数。</li>
<li>非默认值参数必须<strong>传入实参</strong>。</li>
<li>在调用时<strong>不可以对实参进行赋值</strong>。如：<code>printinfo(age = 19)</code></li>
<li>默认参数必须是<strong>不可变对象</strong>，如：int,str,tuple等。如果是list,dict会发生数据错误。<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671665.png"></li>
</ol>
<h1 id="5-2-3-可变参数"><a href="#5-2-3-可变参数" class="headerlink" title="5.2.3 可变参数"></a>5.2.3 可变参数</h1><blockquote>
<p>对于参数不确定的情况，可以使用可变参数的方式。</p>
</blockquote>
<p><strong>代码实例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">a,b,*c</span>):</span><br><span class="line">    <span class="keyword">if</span> b == <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> c:</span><br><span class="line">            a += i</span><br><span class="line">    <span class="keyword">elif</span> b == <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> c:</span><br><span class="line">            a -= i</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line">l1 = f(<span class="number">2</span>,<span class="string">&#x27;-&#x27;</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">l2 = f(<span class="number">2</span>,<span class="string">&#x27;+&#x27;</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(l1,l2)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671768.png"></p>
<p>使用<code>*c</code> 的方式定义<strong>可变参数</strong>，在调用时，会把传入的实参<strong>封装为一个元组</strong>。可以使用<strong>for in 循环</strong>进行使用。</p>
<h2 id="5-2-4-关键字参数"><a href="#5-2-4-关键字参数" class="headerlink" title="5.2.4 关键字参数"></a>5.2.4 关键字参数</h2><blockquote>
<p><code>**kw</code>接收参数并将参数<strong>封装为字典</strong>。</p>
</blockquote>
<p><strong>代码实例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">student</span>(<span class="params">name,age,**kw</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;name:&quot;</span>,name,<span class="string">&#x27;age&#x27;</span>,age,<span class="string">&#x27;other&#x27;</span>,kw)</span><br><span class="line">    </span><br><span class="line">student(<span class="string">&#x27;xyq&#x27;</span>,<span class="number">19</span>,city=<span class="string">&#x27;tz&#x27;</span>,baba=<span class="string">&#x27;xhp&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以使用先定义字典再传入参数</span></span><br><span class="line">other = &#123;<span class="string">&#x27;city&#x27;</span>:<span class="string">&#x27;tz&#x27;</span>,<span class="string">&#x27;baba&#x27;</span>:<span class="string">&#x27;xhp&#x27;</span>&#125;</span><br><span class="line">student(<span class="string">&#x27;xyq&#x27;</span>,<span class="number">19</span>,**other</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671784.png"></p>
<h2 id="5-2-5-命名关键字"><a href="#5-2-5-命名关键字" class="headerlink" title="5.2.5 命名关键字"></a>5.2.5 命名关键字</h2><blockquote>
<p>承接上节，当我们需要<strong>给定关键字参数具体名字</strong>的时候，可以使用：<code>def f(name,age,* ，city,baba)</code></p>
</blockquote>
<p><strong>代码实例</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671798.png"> </p>
<p><strong>注</strong>：关键字参数更多的是用于对<strong>内置函数或者模块函数</strong>的功能进行调整。</p>
<h2 id="5-2-6-综合实例：计算月份平均天数"><a href="#5-2-6-综合实例：计算月份平均天数" class="headerlink" title="5.2.6 综合实例：计算月份平均天数"></a>5.2.6 综合实例：计算月份平均天数</h2><ol>
<li>使用位置参数</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">month_aver</span>(<span class="params">start,end</span>):</span><br><span class="line">    month = [<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>]</span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start-<span class="number">1</span>,end):</span><br><span class="line">        <span class="built_in">sum</span> += month[i]</span><br><span class="line">    aver = <span class="built_in">sum</span>/(end-start+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> aver</span><br><span class="line">	</span><br><span class="line"><span class="built_in">print</span>(month_aver(<span class="number">1</span>,<span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<hr>
<ol start="2">
<li>使用可变参数</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">month_aver</span>(<span class="params">*avge</span>):</span><br><span class="line">    month = [<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>]</span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> avge:</span><br><span class="line">        <span class="built_in">sum</span> += month[i-<span class="number">1</span>]</span><br><span class="line">    aver = <span class="built_in">sum</span>/<span class="built_in">len</span>(avge)</span><br><span class="line">    <span class="keyword">return</span> aver</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(month_aver(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：使用<code>*avge</code>作为可变参数，使用是会把传入的参数<strong>封装为元组</strong>。</p>
<hr>
<ol start="3">
<li>使用默认参数</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">month_aver</span>(<span class="params">start,end=<span class="number">12</span></span>):</span><br><span class="line">    month = [<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>]</span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start-<span class="number">1</span>,end):</span><br><span class="line">        <span class="built_in">sum</span> += month[i]</span><br><span class="line">    aver = <span class="built_in">sum</span>/(end-start+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> aver</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(month_aver(<span class="number">1</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>注</strong>：在函数<strong>定义时</strong>使用默认参数指定end的值。</p>
<hr>
<ol start="4">
<li>使用关键字参数</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">month_aver</span>(<span class="params">start,*,end</span>):</span><br><span class="line">    month = [<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>]</span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start-<span class="number">1</span>,end):</span><br><span class="line">        <span class="built_in">sum</span> += month[i]</span><br><span class="line">    aver = <span class="built_in">sum</span>/(end-start+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> aver</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(month_aver(<span class="number">1</span>,end = <span class="number">12</span>))</span><br></pre></td></tr></table></figure>
<p><strong>注</strong>：使用<code>*</code>隔开关键字参数。在<strong>调用时</strong>指定该参数的值。</p>
<h2 id="5-2-7-函数参数的传递方式"><a href="#5-2-7-函数参数的传递方式" class="headerlink" title="5.2.7 函数参数的传递方式"></a>5.2.7 函数参数的传递方式</h2><blockquote>
<p>在python里，参数的传递方式采用<strong>值传递</strong>的方式。</p>
</blockquote>
<p><strong>先来看一个例子</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671802.png"></p>
<p>出现上述现象的原因在于：进行参数传递是只是<strong>传递的值</strong>，而<strong>不是内存地址</strong>。所以在函数里改变此变量不会对主函数有影响。</p>
<hr>
<p><strong>再来看一个例子</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671813.png"></p>
<p>这里发现在函数里改变列表的值也会对主函数有影响。这是因为对于<code>列表、字典</code>这些<strong>可变序列</strong>在传递时传入的是<strong>内存地址</strong>。</p>
<h1 id="5-3-lambda表达式"><a href="#5-3-lambda表达式" class="headerlink" title="5.3 lambda表达式"></a>5.3 lambda表达式</h1><p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671814.png"><br>是一种匿名函数，可以把一些简单的函数利用这种简化方法进行实现。</p>
<h1 id="5-4-变量的作用域"><a href="#5-4-变量的作用域" class="headerlink" title="5.4 变量的作用域"></a>5.4 变量的作用域</h1><blockquote>
<p>概述：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671804.png"></p>
<h2 id="5-4-1-全局变量"><a href="#5-4-1-全局变量" class="headerlink" title="5.4.1 全局变量"></a>5.4.1 全局变量</h2><blockquote>
<p>在函数之外定义的变量，在程序执行全过程有效。</p>
</blockquote>
<p>先看下面这个例子：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671805.png"></p>
<p>在<strong>1函里</strong>可以打印外部变量n的值，但是在<strong>2函数</strong>却报错了。原因在于一旦<strong>在函数里</strong>对某个变量进行操作，就会认为这个变量是<strong>局部变量</strong>，需要先定义。</p>
<h2 id="5-4-2-局部变量"><a href="#5-4-2-局部变量" class="headerlink" title="5.4.2 局部变量"></a>5.4.2 局部变量</h2><blockquote>
<p>在函数里定义，仅在函数内部起作用。函数退出时自动销毁。</p>
</blockquote>
<p><strong>看个例子</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671806.png"></p>
<p>无法在函数之外获取局部变量。</p>
<h2 id="5-4-3-二者之间的关系"><a href="#5-4-3-二者之间的关系" class="headerlink" title="5.4.3 二者之间的关系"></a>5.4.3 二者之间的关系</h2><p>一般情况下，局部变量和全局变量没有关系，就算他们的名称相同也不会相互影响。</p>
<blockquote>
<p>global关键字</p>
</blockquote>
<p>在函数内使用 <code>global a </code>即可声明a为<strong>全局变量</strong>，在函数外也可以进行输出。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671808.png"></p>
<p>在函数内声明了全局变量，这个变量与外部先定义的变量就会指向同一个存储空间。</p>
<blockquote>
<p>globals()和locals(）访问全局变量和局部变量。</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671809.png"></p>
<h1 id="5-5-函数的高级特性"><a href="#5-5-函数的高级特性" class="headerlink" title="5.5 函数的高级特性"></a>5.5 函数的高级特性</h1><blockquote>
<p>先放一个思维导图：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752671992.png"></p>
<h2 id="5-5-1-函数生成器"><a href="#5-5-1-函数生成器" class="headerlink" title="5.5.1 函数生成器"></a>5.5.1 函数生成器</h2><blockquote>
<p>定义引入</p>
</blockquote>
<p><strong>生成器</strong>：一种<strong>惰性运算</strong>，需要一个元素时，才会产生对应元素，节省了存储空间。</p>
<blockquote>
<p>先来看一个例子：斐波那契数列</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params">m</span>):</span><br><span class="line">    n,a,b = <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n  &lt; m:</span><br><span class="line">        <span class="built_in">print</span>(b)</span><br><span class="line">        a,b = b,a+b</span><br><span class="line">        n+=<span class="number">1</span></span><br><span class="line">fib(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<p>上例<strong>运行截图</strong>如下：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672022.png"></p>
<hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params">m</span>):</span><br><span class="line">    n,a,b = <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n  &lt; m:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a,b = b,a+b</span><br><span class="line">        n+=<span class="number">1</span></span><br><span class="line">    </span><br><span class="line">g = fib(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(g.__next__(),end = <span class="string">&quot;\t&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>上例<strong>运行截图</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672023.png"></p>
<p><strong>对比分析</strong>：<br>上面两个例子的运行结果一样，但是具体的执行流程是不同的。前者是<strong>直接调用函数</strong>，而后执行完成；后者是<strong>函数生成器</strong>，根据迭代次数动态的进行调用。</p>
<hr>
<blockquote>
<p>再来看一个例子：生成器的执行流程</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672026.png"></p>
<p><strong>流程如下</strong>：<br>指定g为一个生成器 —&gt; 进入for 循环 开始第一次循环—&gt;执行fib 函数并运行到yield b 返回其值—&gt; 输出其值而后执行打印语句—&gt; 第二次循环，会从yield b语句下面的语句开始执行，直到再次返回yield b返回。</p>
<p><strong>注意点</strong>：<br>1、使用<code> yield 关键字</code>定义一个函数生成器。<br>2、生成器是<strong>惰性运算</strong>，需要获取其值时才会进行函数的调用与执行。<br>3、在函数生成器里，函数运行到yield后进会返回，下一次调用会<strong>接上次进行</strong>。</p>
<h2 id="5-5-2-高阶函数"><a href="#5-5-2-高阶函数" class="headerlink" title="5.5.2 高阶函数"></a>5.5.2 高阶函数</h2><blockquote>
<p>定义引入：</p>
</blockquote>
<p><strong>高阶函数</strong>：<em>参数</em>也可以是<em>函数</em>。</p>
<blockquote>
<p>第一个高阶函数:map()</p>
<blockquote>
<p>理解：映射</p>
</blockquote>
</blockquote>
<p><strong>函数介绍</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672027.png"><br>简单理解就是将可迭代对象里的元素<strong>依次作用于</strong>函数，返回一个map对象（惰性运算）</p>
<hr>
<p><strong>看一个例子</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">pow</span>(x,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">l = <span class="built_in">map</span>(fun,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    <span class="built_in">print</span>(l.__next__())</span><br></pre></td></tr></table></figure>
<p><strong>运行结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672041.png"></p>
<p>可见，map函数就是将第二个参数里的值依次拿出参与参数1的运算并返回结果。<br><strong>注</strong>：前面我们学习了lambda表达式，可以将一个简单函数简写，所以上例也可以这样写：<br><code>l = list(map(lambda x:x**2,[1,2,3,4]))</code></p>
<hr>
<p>map把<strong>运算规则</strong>进行了抽象，例如：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672055.png"><br>通过str将列表里的元素转换为字符形式。</p>
<hr>
<blockquote>
<p>第二个高阶函数：reduce</p>
<blockquote>
<p>理解：化简</p>
</blockquote>
</blockquote>
<p><strong>函数介绍</strong>：<br><code>1reduce(func,iterable)</code></p>
<ul>
<li>两个参数：func为函数、iterable为可迭代对象</li>
<li>作用：对序列中的第1、2个元素进行操作，得到的结果再与第三数据用func函数运算，最后得到一个结果。</li>
</ul>
<p><strong>直接看例子</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672058.png"><br><strong>注</strong>：<br>1、reduce函数不是内置函数，需要进行functools模块的导入<br>2、此函数不需要返回值，而是直接输出结果。</p>
<hr>
<blockquote>
<p>第三个高阶函数：filter()</p>
<blockquote>
<p>理解：过滤</p>
</blockquote>
</blockquote>
<p><strong>函数介绍</strong>：<br><code>filter(func or none,iterable) ---&gt; filter object</code></p>
<ul>
<li>两个参数：参数func为函数，iterable为可迭代对象</li>
<li>作用：函数依次作用于每一个元素，然后根据返回值是True还是False决定是否保留该元素。</li>
<li>返回值：filter 对象（属于惰性计算）</li>
</ul>
<p><strong>看一个例子</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">L1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">k  = <span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x%<span class="number">2</span>==<span class="number">0</span>,L1)</span><br><span class="line"><span class="built_in">print</span>(k)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> k:</span><br><span class="line">    <span class="built_in">print</span>(i,end=<span class="string">&quot;\t&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>运行结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672056.png"></p>
<p><strong>filter函数</strong>可以用于对列表进行<strong>过滤操作</strong>，输出其值不符合条件的元素。</p>
<h2 id="5-5-3-偏函数partial"><a href="#5-5-3-偏函数partial" class="headerlink" title="5.5.3 偏函数partial"></a>5.5.3 偏函数partial</h2><blockquote>
<p>使用偏函数固定某个函数的参数值。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">log</span>(<span class="params">message,subsystem</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;%s: %s&quot;</span>%(subsystem,message))</span><br><span class="line">    </span><br><span class="line">server_log = functools.partial(log,subsystem = <span class="string">&#x27;server&#x27;</span>)</span><br><span class="line">server_log(<span class="string">&quot;right&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>注意点</strong>：<br>1、<code>partial函数</code>需要导入<code>functools模块</code>才可以使用。<br>2、其作用就是将一个已有的函数变成一个<strong>某些参数固定</strong>的新函数。<br>3、此函数<strong>多用于日志</strong>。</p>
<h2 id="5-5-4-修饰器（装饰器）"><a href="#5-5-4-修饰器（装饰器）" class="headerlink" title="5.5.4 修饰器（装饰器）"></a>5.5.4 修饰器（装饰器）</h2><blockquote>
<p>为现有的函数或类添加新的功能。</p>
</blockquote>
<blockquote>
<p>装饰器的执行流程</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_prety</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I got decorated&quot;</span>)</span><br><span class="line">        func()</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@my_prety</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ordinary</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I am ordinary&quot;</span>)</span><br><span class="line">    </span><br><span class="line">ordinary()</span><br></pre></td></tr></table></figure>
<p><strong>运行结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672059.png"></p>
<p><strong>分析上述代码</strong>：通过<code>@my_prety</code>标识<strong>my_prety</strong>为<strong>装饰器函数</strong>，当函数执行到这一句时就会去<strong>调用my_prety函数</strong>。这一句话的作用等价于：<code>ordinary = my_prety(ordinary)</code>。也就是说在调用执行ordinary函数时会<strong>调用后面的函数</strong>，这个函数以<code>ordinary</code>为<strong>参数</strong>。</p>
<blockquote>
<p>深入理解装饰器函数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">w1</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*argv</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;add inner called&quot;</span>)</span><br><span class="line">        func(*argv)</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"><span class="meta">@ w1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add1</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;%d+%d = %d &quot;</span>%(a,b,a+b))</span><br><span class="line"><span class="meta">@ w1    </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add2</span>(<span class="params">a,b,c</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;%d+%d+%d= %d &quot;</span>%(a,b,c,c+a+b))</span><br><span class="line">    </span><br><span class="line">add1(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">add2(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p><strong>结果如下</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672060.png"></p>
<p>对于<strong>原函数</strong>有参数的情况，<strong>闭包函数</strong>（也就是inner)也要有<strong>参数</strong>，并且为应对不同函数的参数数目不同的情况，可以使用<strong>可变参数和关键字参数</strong>。</p>
<h1 id="5-6-模块化编程"><a href="#5-6-模块化编程" class="headerlink" title="5.6 模块化编程"></a>5.6 模块化编程</h1><blockquote>
<p>老规矩，先放上思维导图：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672061.png"></p>
<h2 id="5-6-1-内置模块"><a href="#5-6-1-内置模块" class="headerlink" title="5.6.1 内置模块"></a>5.6.1 内置模块</h2><blockquote>
<p>Python安装完毕后，就可以使用的模块</p>
</blockquote>
<p><strong>下面介绍几种模块的导入方法：</strong></p>
<ol>
<li>导入整个模块</li>
</ol>
<p><strong>语法格式</strong>：<code>import 模块名1，模块名2</code></p>
<p><strong>代码示例</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672065.png"></p>
<p><strong>注</strong>：使用<code>as</code>进行模块的别名<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672057.png"></p>
<ol start="2">
<li>导入模块的某些成员</li>
</ol>
<p><strong>语法格式</strong>：<code>from 模块1 import 成员1，成员2</code></p>
<p><strong>代码示例</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672063.png"></p>
<ol start="3">
<li>模块的查看方法</li>
</ol>
<p><strong>(1) 使用dir()函数进行查看</strong><br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672062.png"></p>
<p><strong>注</strong>：使用dir查询得到的为一个列表，可以<strong>使用for in</strong> 进行遍历。<strong>如下例</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672064.png"></p>
<p><strong>(2) 使用<code>__all__属性</code>进行查看</strong></p>
<p><strong>代码实例</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672066.png"></p>
<p><strong>注</strong>：不是所有的模块都有<code>__all__</code>属性的。</p>
<h2 id="5-6-2-第三方模块"><a href="#5-6-2-第三方模块" class="headerlink" title="5.6.2 第三方模块"></a>5.6.2 第三方模块</h2><p><strong>第三方模块的查找</strong>：<a target="_blank" rel="noopener" href="https://pypi.org/">https://pypi.org/</a></p>
<p><strong>模块的下载</strong>：<code>pip install xxxx</code></p>
<p><strong>Anaconda</strong> ：Python的发行版本，内置很多第三方库。<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672165.png"></p>
<h2 id="5-6-3-自定义模块"><a href="#5-6-3-自定义模块" class="headerlink" title="5.6.3 自定义模块"></a>5.6.3 自定义模块</h2><p>自己编写完成的脚本可以直接作为模块进行使用。<br>使用import 进行导入即可。</p>
<p>来看一个例子：</p>
<ol>
<li>先定义两个脚本文件main.py和prac.py</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672067.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672084.png"></p>
<ol start="2">
<li>使用import main 将main.py作为模块导入prac.py。</li>
</ol>
<p><strong>运行结果如下</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672179.png"><br>可见，在prac中可以使用main里的函数，这里main就相当于模块。</p>
<ol start="3">
<li>删除main文件里的name属性判断</li>
</ol>
<p><strong>结果如下</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672180.png"></p>
<p>这里执行prac，发现会先执行main模块里的操作，再进行本程序操作。这是因为prac将main当做了一个直接执行的文件了。</p>
<p>通过上述例子我们可以直观的看到<code>__name__</code>属性的作用：<strong>用于区分一个文件是模块还是直接执行文件</strong>。<br>其<strong>原理</strong>也很简单，如果在程序中加上此代码，就会在执行此文件前进行判断，当其作为模块被导入时，<code>__name__ </code>属性不会等于main,不满足判断条件，也就不会直接执行了。</p>
<h1 id="5-7-Pyinstaller-打包"><a href="#5-7-Pyinstaller-打包" class="headerlink" title="5.7 Pyinstaller 打包"></a>5.7 Pyinstaller 打包</h1><blockquote>
<p>将py脚本打包成为exe文件。</p>
</blockquote>
<p><strong>下载方法</strong>：<code>pip install pyinstall</code><br><strong>使用方法</strong>：<code>pyinstaller -F 脚本位置</code></p>
<p>通过pyinstaller -h 查看帮助文档。</p>
<h1 id="5-8-练习补充"><a href="#5-8-练习补充" class="headerlink" title="5.8 练习补充"></a>5.8 练习补充</h1><blockquote>
<p>内容来自实训和测试</p>
</blockquote>
<h2 id="测试–函数部分"><a href="#测试–函数部分" class="headerlink" title="测试–函数部分"></a>测试–函数部分</h2><p>1、len(dict)是作用于key.<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672181.png"></p>
<hr>
<p>2、sort方法的扩展</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672192.png"></p>
<p>使用<strong>lambda表达式</strong>指定比较对象。</p>
<hr>
<p>3、列表的可变性<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1649752672190.png"></p>
<p>传递列表时传递的是<strong>存储位置</strong>，一变皆变。</p>
<h2 id="实训作业"><a href="#实训作业" class="headerlink" title="实训作业"></a>实训作业</h2><blockquote>
<p>1、最大公约数与最小公倍数</p>
</blockquote>
<p>使用<strong>辗转相除法</strong>进行求解。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#gcd为求最大公约数的函数</span></span><br><span class="line"><span class="comment">#lcm为求最小公倍数的函数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gcd</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;求最大公约数&quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">      计算最大公约数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      :param x: 正整数</span></span><br><span class="line"><span class="string">      :param y：正整数</span></span><br><span class="line"><span class="string">      :return: 返回最大公约数</span></span><br><span class="line"><span class="string">      &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">    <span class="comment"># *************begin************#</span></span><br><span class="line">    <span class="keyword">if</span> x%y == <span class="number">0</span>:</span><br><span class="line">      <span class="keyword">return</span> y</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">return</span> gcd(y,x%y)</span><br><span class="line">    <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lcm</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;求最小公倍数&quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">          计算最小公倍数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          :param x: 正整数</span></span><br><span class="line"><span class="string">          :param y：正整数</span></span><br><span class="line"><span class="string">          :return: 返回最小公倍数</span></span><br><span class="line"><span class="string">          &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment">#        请在此处添加代码       #</span></span><br><span class="line">    <span class="comment"># *************begin************#</span></span><br><span class="line">    m  = gcd(x,y)</span><br><span class="line">    <span class="keyword">return</span> x*y//m</span><br><span class="line">    <span class="comment"># **************end*************#</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>2、整数的回文判断</p>
</blockquote>
<p>先化为字符串再判断。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">is_palindrome</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    判断一个数是不是回文数</span></span><br><span class="line"><span class="string">    :param num: 正整数</span></span><br><span class="line"><span class="string">    :return: 是回文数返回True，不是回文数返回False</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    num1 = <span class="built_in">str</span>(num)</span><br><span class="line">    <span class="keyword">return</span> num1 == num1[::-<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3、求解素数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">is_prime</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    判断一个数是不是素数</span></span><br><span class="line"><span class="string">    :param num: 正整数</span></span><br><span class="line"><span class="string">    :return: 是素数返回True，不是素数返回False</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,num):</span><br><span class="line">        <span class="keyword">if</span> num % i == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>4、莱布尼兹公式计算Π值</p>
</blockquote>
<p>莱布尼兹公式：π &#x3D; 4&#x2F;1 − 4&#x2F;3 + 4&#x2F;5 − 4&#x2F;7 + 4&#x2F;9 − 4&#x2F;11…</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">estimate_pi_by_leibniz</span>(<span class="params">n_terms = <span class="number">1000</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    通过莱布尼兹公式计算 pi 值，此方法不容易得到 15 位精度的 pi 值</span></span><br><span class="line"><span class="string">    莱布尼兹公式：π = 4/1 − 4/3 + 4/5 − 4/7 + 4/9 − 4/11…</span></span><br><span class="line"><span class="string">    :param n_terms:计算项数 n，默认值 1000</span></span><br><span class="line"><span class="string">    :return:返回保留小数点后15位的 pi 值</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    pi = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n_terms):</span><br><span class="line">        pi += <span class="number">1</span>/((-<span class="number">1</span>)**i*(<span class="number">2</span>*i+<span class="number">1</span>))</span><br><span class="line">    pi *= <span class="number">4</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">round</span>(pi,<span class="number">15</span>)</span><br></pre></td></tr></table></figure>

<p>通过-1的<strong>n次方</strong>获取正负.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://danggeovo.github.io/2023/04/10/python%E5%AD%A6%E4%B9%A0%20--%20ch6%20%E6%96%87%E4%BB%B6%E4%B8%8E%E5%BC%82%E5%B8%B8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="danggeOvO">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dangge の 小小世界">
      <meta itemprop="description" content="记录生活与学习!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | dangge の 小小世界">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/10/python%E5%AD%A6%E4%B9%A0%20--%20ch6%20%E6%96%87%E4%BB%B6%E4%B8%8E%E5%BC%82%E5%B8%B8/" class="post-title-link" itemprop="url">python学习 -- ch6 文件与异常</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-10 13:48:32" itemprop="dateCreated datePublished" datetime="2023-04-10T13:48:32+08:00">2023-04-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-08 18:16:32" itemprop="dateModified" datetime="2023-11-08T18:16:32+08:00">2023-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">【-基础知识-】编程语言学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/python%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">python学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>23k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>41 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="读写文本文件"><a href="#读写文本文件" class="headerlink" title="读写文本文件"></a>读写文本文件</h1><blockquote>
<p>思维导图如下</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806109.png"></p>
<p>本节需要<strong>掌握的方法</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806567.png"></p>
<p>常见的<strong>操作模式</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806115.png"></p>
<h2 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h2><blockquote>
<p>使用open()函数用于文件的读取。</p>
</blockquote>
<p><strong>语法格式</strong>：<code>&lt; 变量名&gt; = open(&lt;文件名&gt;,&lt;打开模式&gt;,&lt;编码方式&gt;)</code></p>
<p><strong>文件处理的步骤</strong>：打开文件 –&gt; 文件操作 —&gt; 关闭文件</p>
<p><strong>代码实例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;student.txt&quot;</span>,<span class="string">&quot;r&quot;</span>)  <span class="comment"># 打开文件（以读取的方式）</span></span><br><span class="line"><span class="built_in">print</span>(fp.read())          <span class="comment"># 进行文件的查看</span></span><br><span class="line">fp.close()					  <span class="comment"># 关闭文件</span></span><br></pre></td></tr></table></figure>

<p><strong>注1</strong>：对于<strong>中文文件</strong>，在读入是需要给出<strong>编码格式</strong><br><code>fp = open(&quot;file&quot;,&quot;r&quot;,encoding = &#39;utf-8)</code></p>
<p><strong>注2</strong>：如果需要给出<strong>文件路径</strong>，有以下几个方法：</p>
<ul>
<li>fp &#x3D; open(‘c:\test\student.txt’,’r’)    — 是绝对路径，使用两个\，前面的\为转义字符。</li>
<li>fp &#x3D; open(‘c:&#x2F;test&#x2F;student.txt’,’r’)      —是绝对路径</li>
<li>fp &#x3D; open(‘.&#x2F;student.txt’,’r’)               —是相对路径（.代表当前文件夹）</li>
</ul>
<p><strong>读取文件的几个方法</strong>：</p>
<ol>
<li>使用fp.read()直接输出全部内容。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;student.txt&quot;</span>,<span class="string">&quot;r&quot;</span>)  <span class="comment"># 打开文件（以读取的方式）</span></span><br><span class="line"><span class="built_in">print</span>(fp.read())          <span class="comment"># 进行文件的查看</span></span><br><span class="line">fp.close()					  <span class="comment"># 关闭文件</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>使用for-in 逐行读取文件内容</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;student.txt&quot;</span>,<span class="string">&quot;r&quot;</span>)  <span class="comment"># 打开文件（以读取的方式）</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fp:</span><br><span class="line">	<span class="built_in">print</span>(line,end = <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">fp.close()					  <span class="comment"># 关闭文件</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>使用readlines按行读取文件内容。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;student.txt&quot;</span>,<span class="string">&quot;r&quot;</span>)  <span class="comment"># 打开文件（以读取的方式）</span></span><br><span class="line">line = fp.readlines()</span><br><span class="line"><span class="built_in">print</span>(line)</span><br><span class="line">fp.close()					  <span class="comment"># 关闭文件</span></span><br></pre></td></tr></table></figure>
<p>注：这种方法是把文本封装为一个<strong>列表形式</strong>。（包括换行符)</p>
<p>使用<code>strip()方法</code>把列表结尾的<strong>换行符去掉</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;student.txt&quot;</span>,<span class="string">&quot;r&quot;</span>)  <span class="comment"># 打开文件（以读取的方式）</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fp.readlines:</span><br><span class="line">	line = line.strip()</span><br><span class="line">	<span class="built_in">print</span>(line,end = <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">fp.close()					  <span class="comment"># 关闭文件</span></span><br></pre></td></tr></table></figure>

<h2 id="写入文本文件"><a href="#写入文本文件" class="headerlink" title="写入文本文件"></a>写入文本文件</h2><blockquote>
<p>在使用open函数打开时<strong>指定模式为“w”</strong></p>
</blockquote>
<p>直接看一个例子；</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">file = [<span class="string">&#x27;a.txt&#x27;</span>, <span class="string">&#x27;b.txt&#x27;</span>, <span class="string">&#x27;c.txt&#x27;</span>]</span><br><span class="line"></span><br><span class="line">fp1 = []</span><br><span class="line"><span class="keyword">for</span> fp <span class="keyword">in</span> file:</span><br><span class="line">    fp1.append(<span class="built_in">open</span>(fp,<span class="string">&#x27;w&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    <span class="keyword">if</span> i&lt;<span class="number">50</span>:</span><br><span class="line">        fp1[<span class="number">0</span>].write(<span class="built_in">str</span>(i))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        fp1[<span class="number">2</span>].write(<span class="built_in">str</span>(i))</span><br><span class="line">	<span class="keyword">for</span> fp <span class="keyword">in</span> fp1:</span><br><span class="line">		fp.close()</span><br></pre></td></tr></table></figure>


<p>可以使用<strong>列表</strong>利用<code>append()方法</code>进行文件的读取。使用时利用<strong>下标索引</strong>即可。结束后<strong>注意关闭</strong>。</p>
<p><strong>注意</strong>：<code>write()</code>只可以接收<strong>字符串参数</strong>，要使用<code>str()</code>进行转换。</p>
<h2 id="读写二进制文件"><a href="#读写二进制文件" class="headerlink" title="读写二进制文件"></a>读写二进制文件</h2><blockquote>
<p>使用<code>open()函数</code>时指定模式为<code>’rb&#39;</code>，即<strong>可读+二进制</strong>模式。</p>
</blockquote>
<p><strong>一个例子</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">is_gif</span>(<span class="params">file</span>):</span><br><span class="line">    fp = <span class="built_in">open</span>(file,<span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">    first4 = fp.read(<span class="number">4</span>)</span><br><span class="line">    fp.close()</span><br><span class="line">    <span class="keyword">return</span> first4 == <span class="string">b&#x27;GIF8&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(is_gif(<span class="string">&quot;./a.gif&quot;</span>))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>上下文管理语句：<code>with</code>(会在执行结束后<strong>自动关闭</strong>，不需要再使用fp.close())</p>
</blockquote>
<p><strong>语法格式</strong>：<code>with open(file,&#39;r&#39;) as fp:</code></p>
<p><strong>一个例子</strong>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">is_gif</span>(<span class="params">file</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">        first4 = fp.read(<span class="number">4</span>)</span><br><span class="line">        <span class="keyword">return</span> first4 == <span class="string">b&#x27;GIF8&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(is_gif(<span class="string">&quot;./a.gif&quot;</span>))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>bytearray()方法</p>
<blockquote>
<p>将二进制文件保存为字节数组。</p>
</blockquote>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;./a.gif&#x27;,&#x27;rn&#x27;) as fp:</span></span><br><span class="line"><span class="string">	byt = bytearray(fp.read())</span></span><br><span class="line"><span class="string">	size = len(byt)</span></span><br><span class="line"><span class="string">	for i in range(0,size):</span></span><br><span class="line"><span class="string">		char = chr(byt[i])</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<h2 id="综合实例：字母出现次数"><a href="#综合实例：字母出现次数" class="headerlink" title="综合实例：字母出现次数"></a>综合实例：字母出现次数</h2><ol>
<li>方法1：使用字符串与列表一一对应</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    num = [<span class="number">0</span>]*<span class="number">26</span>   <span class="comment"># 用于保存字母出现次数</span></span><br><span class="line">    str1 = fp.read()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> str1:</span><br><span class="line">        <span class="keyword">if</span> i.isalpha(): <span class="comment"># 用于判断是否为字母</span></span><br><span class="line">            i = i.lower()</span><br><span class="line">            num[<span class="built_in">ord</span>(i)-<span class="number">97</span>]+=<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(num）</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>方法2：使用字典</li>
</ol>
<p><strong>改进方法</strong>：字母与次数一一对应，并且降序排序。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;a.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">str1 = fp.read()</span><br><span class="line">dict1 = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> str1:</span><br><span class="line">    <span class="keyword">if</span> i.isalpha(): <span class="comment"># 用于判断是否为字母</span></span><br><span class="line">        i = i.lower()</span><br><span class="line">        <span class="keyword">if</span> i <span class="keyword">in</span> dict1:</span><br><span class="line">            dict1[i]+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dict1[i]=<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(dict1.items(), reverse=<span class="literal">True</span>, key = <span class="keyword">lambda</span> e:e[<span class="number">1</span>]))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：使用sorted()进行排序时，可以通过<code>key参数</code>指定比较的对象。字典是使用<strong>key</strong>进行比较，所以要先<strong>转换为元组</strong>再排序。</p>
<h2 id="实例二-：统计单词次数"><a href="#实例二-：统计单词次数" class="headerlink" title="实例二 ：统计单词次数"></a>实例二 ：统计单词次数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;a.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">wordfre = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> fp:</span><br><span class="line">    sword = i.strip().split()</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> sword:</span><br><span class="line">        <span class="keyword">if</span> word <span class="keyword">in</span> wordfre:</span><br><span class="line">            wordfre[word]+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            wordfre[word]=<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;文档里共出现了%d个不同的单词&quot;</span>%<span class="built_in">len</span>(wordfre),<span class="string">&quot;统计如下：&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(wordfre)</span><br><span class="line">fp.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>与字母不同的是，这里要使用<code>sword = i.strip().split()</code>把原字符串以空格为分隔符号组成一个列表，其元素是一个个单词字符串。<br>其中<code>strip()</code>方法是消除<strong>头尾两边</strong>指定的字符，<strong>默认为空格和换行</strong>。</p>
<hr>
<blockquote>
<p>扩展：输出次数最多的三个单词</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;a.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">wordfre = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> fp:</span><br><span class="line">    sword = i.strip().split()</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> sword:</span><br><span class="line">        <span class="keyword">if</span> word <span class="keyword">in</span> wordfre:</span><br><span class="line">            wordfre[word]+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            wordfre[word]=<span class="number">1</span></span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;文档里共出现了%d个不同的单词&quot;</span>%<span class="built_in">len</span>(wordfre),<span class="string">&quot;统计如下：&quot;</span>)</span><br><span class="line">	<span class="built_in">print</span>(wordfre)</span><br><span class="line">	<span class="built_in">print</span>(<span class="built_in">sorted</span>(wordfre.items(), key=<span class="keyword">lambda</span> e:e[<span class="number">1</span>], reverse=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;出现次数最多的三个单词为：&quot;</span>)</span><br><span class="line">	wordl = []</span><br><span class="line">	<span class="keyword">for</span> wd, num <span class="keyword">in</span> wordfre.items():</span><br><span class="line">		wordl.append((num, wd))</span><br><span class="line">	wordl.sort(reverse=<span class="literal">True</span>)</span><br><span class="line">	<span class="keyword">for</span> wd <span class="keyword">in</span> wordl[:<span class="number">3</span>]:</span><br><span class="line">		<span class="built_in">print</span>(wd)</span><br><span class="line">	fp.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>上代码是使用字典存储字母次数。<br>一个关键点是：<code>dict.items()</code>会返回一个<strong>列表</strong>，列表里的元素是<strong>一个个元组</strong>。<br>所以我们如果要排序，可以直接使用<code>sorted(dict.items,key=lambda e:e[1])</code>以<strong>值为依据</strong>进行排序。结果返回一个新的列表。</p>
<h1 id="第三方库：单词处理"><a href="#第三方库：单词处理" class="headerlink" title="第三方库：单词处理"></a>第三方库：单词处理</h1><h2 id="jieba库"><a href="#jieba库" class="headerlink" title="jieba库"></a>jieba库</h2><blockquote>
<p>jieba是优秀的中文分词第三方库</p>
</blockquote>
<p>三种<strong>不同的模式</strong>：</p>
<ul>
<li>精确模式：把文本精确的切分开，不存在冗余单词</li>
<li>全模式：把文本中所有可能的词语都扫描出来，有冗余</li>
<li>搜索引擎模式：在精确模式基础上，对长词再次切分</li>
</ul>
<p><strong>常用的函数</strong>：</p>
<ul>
<li><code>jieba.cut(s)</code>:精确模式，返回一个可迭代的数据类型。</li>
<li><code>jieba.cut(s,cut_all=True)</code>:全模式，输出文本s中所有的可能单词</li>
<li><code>jieba.cut_for_search(s)</code>:搜索引擎模式，适合搜索引擎建立索引的分词结果</li>
<li><code>jieba.lcut(s)</code>:精确模式，返回一个列表，<strong>建议使用</strong></li>
<li><code>jieba.lcut(s,cut_all=True)</code>:全模式，返回一个列表，<strong>建议使用</strong></li>
<li><code>jieba.lcut_for_search(s)</code>:搜索引擎模式，返回一个列表，<strong>建议使用</strong></li>
<li><code>jieba.add_word(w)</code>:向分词词典中<strong>增加新词w</strong></li>
</ul>
<p>代码实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba <span class="keyword">as</span> j</span><br><span class="line"><span class="built_in">print</span>(j.lcut(<span class="string">&quot;中国是一个伟大的祖国&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(j.lcut(<span class="string">&quot;中国是一个伟大的祖国&quot;</span>, cut_all=<span class="literal">True</span>))</span><br><span class="line"><span class="built_in">print</span>(j.lcut_for_search(<span class="string">&quot;中国是一个伟大的祖国&quot;</span>))</span><br></pre></td></tr></table></figure>
<p><strong>看结果</strong>：<br><img src="https://gitee.com/qidangge/picgo/raw/master/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1647941379508.png"></p>
<h2 id="worldcloud库"><a href="#worldcloud库" class="headerlink" title="worldcloud库"></a>worldcloud库</h2><blockquote>
<p>wordcloud 库把词云当作一个WordCloud对象</p>
</blockquote>
<ul>
<li>wordcloud.WordCloud()代表一个文本对应的词云</li>
<li>可以根据文本中词语出现的频率等参数绘制词云</li>
<li>绘制词云的形状、尺寸和颜色均可设定</li>
<li>以WordCloud对象为基础，配置参数、加载文本、输出文件</li>
</ul>
<p><strong>具体参数如下</strong>：（配置对象参数）</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806558.png"></p>
<p><strong>输入方法</strong>：<br><code>w.generate(file)</code>:向词云对象里加载文本</p>
<p><strong>输出方法</strong>：<br><code>w.to_file(filename)</code>:将词云输出为文件</p>
<p><strong>一个实例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> jieba <span class="keyword">as</span> j</span><br><span class="line"><span class="keyword">import</span> wordcloud <span class="keyword">as</span> w</span><br><span class="line"></span><br><span class="line">txt = <span class="built_in">open</span>(<span class="string">&quot;./2022政府工作报告.txt&quot;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">txt1 = txt.read()</span><br><span class="line"></span><br><span class="line">list1 = j.lcut(txt1)</span><br><span class="line">txt2 =<span class="string">&quot; &quot;</span>.join(list1)</span><br><span class="line">w = w.WordCloud(font_path=<span class="string">&#x27;msyhbd.ttc&#x27;</span>)</span><br><span class="line">w.generate(txt2)</span><br><span class="line">w.to_file(<span class="string">&quot;2022.jpg&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806566.png"></p>
<p>使用<code>jieba库</code>分好词语后可以通过<code>join</code>进行连接,在进行词云。</p>
<h2 id="实训：三国演义词云"><a href="#实训：三国演义词云" class="headerlink" title="实训：三国演义词云"></a>实训：三国演义词云</h2><h1 id="读取csv文件"><a href="#读取csv文件" class="headerlink" title="读取csv文件"></a>读取csv文件</h1><p><strong>csv文件的格式</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806118.png"></p>
<ol>
<li>使用open函数进行csv文件的读取<br><strong>看代码</strong>：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.csv&quot;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fb:</span><br><span class="line">    ls = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> fb:</span><br><span class="line">        i = i.replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">        ls.append(i.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    <span class="built_in">print</span>(ls)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806152.png"></p>
<p><strong>注意点</strong>：<br>1、通过<code>for in</code> 一行行读取字符串，并<strong>去除换行符</strong>。<br>2、通过<code>split(&quot;,&quot;)</code>以逗号为分隔符进行字符串的分割，<strong>返回一个列表</strong>。</p>
<hr>
<ol start="2">
<li>使用csv模块进行：</li>
</ol>
<p><strong>看例子</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.csv&quot;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fb:</span><br><span class="line">    csver = csv.reader(fb)</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> csver:</span><br><span class="line">        <span class="built_in">print</span>(row)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806165.png"></p>
<ol start="3">
<li>使用csv模块进行写入：<br> <strong>看代码</strong>：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.csv&quot;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> csver:</span><br><span class="line">    <span class="comment"># 创建writer对象用于写入</span></span><br><span class="line">    csver_w = csv.writer(csver)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;b.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fb:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> fb.readlines():</span><br><span class="line">            line_list = line.strip(<span class="string">&quot;\n&quot;</span>).split(<span class="string">&quot; &quot;</span>)</span><br><span class="line">            csver_w.writerow(line_list)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;a.csv&quot;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> csver:</span><br><span class="line">    csver_r = csv.reader(csver)</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> csver_r:</span><br><span class="line">        <span class="built_in">print</span>(row)</span><br></pre></td></tr></table></figure>
<p>在使用<strong>open</strong>打开文件后再使用<strong>csv模块</strong>选择写入还是读取模式。</p>
<h1 id="序列化模块"><a href="#序列化模块" class="headerlink" title="序列化模块"></a>序列化模块</h1><blockquote>
<p>定义引入：</p>
</blockquote>
<ul>
<li><strong>序列化</strong>：把变量从内存变成可存储、可传输的过程。</li>
<li>序列化后的内容可以写入磁盘或者传输。</li>
<li><strong>反序列化</strong>：把序列化内容重新读入内存的过程。</li>
</ul>
<h2 id="模块：pickle"><a href="#模块：pickle" class="headerlink" title="模块：pickle"></a>模块：pickle</h2><blockquote>
<p>实现变量的序列化</p>
</blockquote>
<p><strong>基本操作：</strong></p>
<ul>
<li><code>p.dumps()</code>把任意对象序列化为一个bytes,然后可以把这个bytes写入文件夹。</li>
<li><code>p.dump()</code>把对象序列化后写入一个file-like Object。</li>
<li><code>p.loads()</code>将bytes反序列化出对象。</li>
<li><code>p.load()</code>将file-like Object 反序列化出对象</li>
</ul>
<p><strong>例子</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> pickle <span class="keyword">as</span> p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将字典序列化为一个bytes</span></span><br><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;a.txt&quot;</span>,<span class="string">&quot;rb&quot;</span>)</span><br><span class="line">mydict = <span class="built_in">dict</span>(name=<span class="string">&quot;xyq&quot;</span>, age=<span class="number">21</span>)</span><br><span class="line">pickle_1 = p.dumps(mydict,fp)</span><br><span class="line"><span class="built_in">print</span>(pickle_1)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>结果如下</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806166.png"></p>
<hr>
<p><strong>反序列化实例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle <span class="keyword">as</span> p</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将字典序列化并存储在c.txt</span></span><br><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;a.txt&quot;</span>,<span class="string">&quot;wb&quot;</span>)</span><br><span class="line">mydict = <span class="built_in">dict</span>(name=<span class="string">&quot;xyq&quot;</span>, age=<span class="number">21</span>)</span><br><span class="line">p.dump(mydict,fp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开c.txt，读取其中文件并反序列化为data</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;c.txt&#x27;</span>,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    data = p.load(fp)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure>

<h2 id="模块：json"><a href="#模块：json" class="headerlink" title="模块：json"></a>模块：json</h2><blockquote>
<p>定义介绍：</p>
</blockquote>
<p>json是现在流行的跨平台的<strong>数据交换格式</strong>。</p>
<p><strong>例如</strong>：jupyter配置文件就是json文件。</p>
<p>现在已经成为<strong>异构系统之间</strong>交换数据的<strong>事实标准</strong>。</p>
<p><strong>python数据类型和json类型对应关系</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806585.png"></p>
<blockquote>
<p>json模块介绍：</p>
</blockquote>
<p><strong>模式方法</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806562.png"></p>
<p><strong>注意</strong>：dumps是编码字符串，而dump是写入文件。前者有接收值，后者直接操作。&#x2F;&#x2F;字典或者列表可以转换。</p>
<hr>
<p><strong>代码实例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">dict1 = &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;xyq&quot;</span>, <span class="string">&quot;age&quot;</span>:<span class="number">12</span>&#125;</span><br><span class="line">json_str = json.dumps(dict1)</span><br><span class="line"><span class="built_in">print</span>(json_str)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(json_str))</span><br><span class="line"></span><br><span class="line">dict2 = json.loads(json_str)</span><br><span class="line"><span class="built_in">print</span>(dict2)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(dict2))</span><br></pre></td></tr></table></figure>
<p><strong>看结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806168.png"></p>
<p>也就是说，<code>json.dumps</code>将一个python的<strong>字典</strong>转换为了一个<strong>字符串</strong>，但是还是<strong>字典的样式</strong>。而后<code>json.loads</code>将json<strong>字符串</strong>转为了python<strong>字典</strong>。具体的转换原理<strong>见下实训</strong>。</p>
<h1 id="文件目录操作"><a href="#文件目录操作" class="headerlink" title="文件目录操作"></a>文件目录操作</h1><blockquote>
<p>思维导图：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806192.png"></p>
<h2 id="os模块和os-path"><a href="#os模块和os-path" class="headerlink" title="os模块和os.path"></a>os模块和os.path</h2><blockquote>
<p>这个模块是主要访问操作系统功能的模块</p>
</blockquote>
<blockquote>
<p>几个基本功能：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="built_in">print</span>(os.name)  <span class="comment"># 操作系统名称</span></span><br><span class="line"><span class="built_in">print</span>(os.stat(<span class="string">&quot;./b.txt&quot;</span>))  <span class="comment"># 返回文件属性</span></span><br><span class="line">os.rename(<span class="string">&quot;b.txt&quot;</span>, <span class="string">&quot;os2.txt&quot;</span>)  <span class="comment"># 对文件进行重命名</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(os.path.exists(<span class="string">&quot;./a.txt&quot;</span>))  <span class="comment"># 查看文件是否存在</span></span><br><span class="line"><span class="built_in">print</span>(os.path.isfile(<span class="string">&quot;os.txt&quot;</span>))   <span class="comment"># 查看是否为文件</span></span><br><span class="line"><span class="built_in">print</span>(os.path.split(<span class="string">&quot;os.txt&quot;</span>))    <span class="comment"># 分开文件和路径</span></span><br><span class="line"><span class="built_in">print</span>(os.path.splitext(<span class="string">&quot;os.txt&quot;</span>)) <span class="comment"># 分割文件名与扩展名</span></span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806215.png"></p>
<blockquote>
<p>与操作目录有关的功能：</p>
</blockquote>
<p><strong>创建目录</strong>：</p>
<ul>
<li><code>os.listdir(&quot;目录&quot;)</code>：列出当前目录的内容</li>
<li><code>os.makedir(&quot;./xyq&quot;)</code>：在指定位置创建一个目录</li>
<li><code>os.makedirs(&quot;./xyq/name&quot;)</code>：在指定位置创建多级目录</li>
</ul>
<p><strong>删除目录</strong>：</p>
<ul>
<li><code>os.rmdir(&quot;./xyq&quot;)</code>:删除目录，要求此目录为空</li>
<li><code>os.removedirs(&quot;./xyq/xyz&quot;)</code>:删除多级目录</li>
</ul>
<p><strong>判断目录</strong>：</p>
<ul>
<li><code>os.pathisdir(&quot;./a.txt&quot;)</code>:判断是否为目录</li>
</ul>
<h2 id="os模块实训"><a href="#os模块实训" class="headerlink" title="os模块实训"></a>os模块实训</h2><p>将一个文件file1重命名为file2（考虑健壮性）</p>
<p>代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, os.path</span><br><span class="line">file1 = <span class="built_in">input</span>(<span class="string">&quot;输入要重命名的文件：&quot;</span>)</span><br><span class="line">file2 = <span class="built_in">input</span>(<span class="string">&quot;输入重命名后的文件：&quot;</span>)</span><br><span class="line"></span><br><span class="line">file_list = os.listdir(<span class="string">&quot;.&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> file1 <span class="keyword">in</span> file_list:</span><br><span class="line">    <span class="keyword">while</span>(file2 <span class="keyword">in</span> file_list):</span><br><span class="line">        choice = <span class="built_in">input</span>(<span class="string">&quot;有重名，是否继续(Y/N):&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> choice == <span class="string">&quot;Y&quot;</span> <span class="keyword">or</span> choice == <span class="string">&quot;y&quot;</span>:</span><br><span class="line">            file2 = <span class="built_in">input</span>(<span class="string">&quot;输入新的名字：&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        os.rename(file1, file2)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;命名成功！&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;文件不存在。&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806238.png"></p>
<p><strong>几个注意点</strong>：<br>1、使用<code>os.listdir</code>获取当前目录的文件，返回一个<strong>列表</strong>。用于<strong>判断是否有重命名文件</strong>。<br>2、使用<code>while else </code>进行重复输入。else语句是当<strong>while语句顺利执行后</strong>执行。</p>
<h2 id="遍历目录的三种方式"><a href="#遍历目录的三种方式" class="headerlink" title="遍历目录的三种方式"></a>遍历目录的三种方式</h2><blockquote>
<p>输出目录下的所有文件和目录</p>
</blockquote>
<blockquote>
<p><strong>第一种方法</strong>：<code>os.walk()函数</code></p>
<blockquote>
<p>返回值是一个<strong>生成器</strong>。返回值是一个<strong>三元组</strong>。</p>
</blockquote>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806565.png"></p>
<p><strong>看一个例子</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806563.png"></p>
<p>可见，使用walk函数返回一个<strong>生成器</strong>，需要通过<code>next()</code>进行输出。<br>输出的格式为<strong>三元组</strong>：<code>当前目录，目录下的目录，目录下的文件</code>。</p>
<hr>
<p><strong>看一个例子：输出目录</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">visit</span>(<span class="params">path</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(path):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;目录不存在&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    list_dir = os.walk(path)</span><br><span class="line">    <span class="keyword">for</span> root, dir1 , file1 <span class="keyword">in</span> list_dir:</span><br><span class="line">        <span class="keyword">for</span> d <span class="keyword">in</span> dir1:</span><br><span class="line">            <span class="built_in">print</span>(os.path.join(root,d))</span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> file1:</span><br><span class="line">            <span class="built_in">print</span>(os.path.join(root, f))</span><br><span class="line"></span><br><span class="line">visit(<span class="string">&quot;c:\\demo&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806369.png"><br><strong>注意点</strong>：<br>1、使用<code>os.path.join()</code>输出根目录。<br>2、注意<code>walk</code>返回的元组的元素，其中第二、三个是<strong>列表</strong>，可以进行for in 。</p>
<hr>
<p><strong>一个例子：计算指定路径下文件字节数，除去指定的路径</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> join, getsize</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">visit</span>(<span class="params">path</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(path):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;目录不存在&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    list_dir = os.walk(path)</span><br><span class="line">    <span class="keyword">for</span> root, dir1 , file1 <span class="keyword">in</span> list_dir:</span><br><span class="line">        <span class="built_in">print</span>(root, <span class="string">&quot;consumes&quot;</span>, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">sum</span>([getsize(join(root, name)) <span class="keyword">for</span> name <span class="keyword">in</span> file1]), end = <span class="string">&quot; &quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;bytes in&quot;</span>, <span class="built_in">len</span>(file1), <span class="string">&quot;non-dir files&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;B&quot;</span> <span class="keyword">in</span> dir1:</span><br><span class="line">            dir1.remove(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">visit(<span class="string">&quot;c:\\demo&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806382.png"><br><strong>注意</strong>：<br>1、使用<code>os.path.getsize</code>获取文件的字节数。<br>2、使用到了<strong>列表生成器</strong>将多个文件的字节数放到列表。</p>
<hr>
<blockquote>
<p>第二个方法：深度遍历策略</p>
</blockquote>
<p><strong>看代码</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> join, isdir, isfile</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">visit</span>(<span class="params">path</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(path):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;目录不存在&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    list_dir = os.listdir(path)</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> list_dir:</span><br><span class="line">	   <span class="comment"># 必须先连接，才可以使用is方法判断类型</span></span><br><span class="line">        path1 = join(path, name)</span><br><span class="line">        <span class="keyword">if</span> isfile(path1):</span><br><span class="line">            <span class="built_in">print</span>(path1)</span><br><span class="line">        <span class="keyword">elif</span> isdir(path1):</span><br><span class="line">            <span class="built_in">print</span>(path1)</span><br><span class="line">            visit(path1)</span><br><span class="line"></span><br><span class="line">visit(<span class="string">&quot;c:\\demo&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>看结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806560.png"></p>
<p>深度优先遍历的关键在于<strong>如果发现目录就会直接进入</strong>，而不是输出别的文件。</p>
<blockquote>
<p>广度遍历策略：</p>
</blockquote>
<p><strong>看代码</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> join, isdir, isfile</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">visit</span>(<span class="params">path</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(path):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;目录不存在&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    dirs = [path]</span><br><span class="line">    <span class="keyword">while</span> dirs:</span><br><span class="line">        current = dirs.pop(<span class="number">0</span>)</span><br><span class="line">        list_dir = os.listdir(current)</span><br><span class="line">        <span class="keyword">for</span> name <span class="keyword">in</span> <span class="built_in">sorted</span>(list_dir):</span><br><span class="line">			<span class="comment"># 必须先连接，才可以使用is方法判断类型</span></span><br><span class="line">            path1 = join(current, name)</span><br><span class="line">            <span class="keyword">if</span> isfile(path1):</span><br><span class="line">                <span class="built_in">print</span>(path1)</span><br><span class="line">            <span class="keyword">elif</span> isdir(path1):</span><br><span class="line">                <span class="built_in">print</span>(path1)</span><br><span class="line">                dirs.append(path1)</span><br><span class="line"></span><br><span class="line">visit(<span class="string">&quot;c:\\demo&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>看结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806732.png"></p>
<p>广度优先的关键在于<strong>使用了队列</strong>（利用列表的方法进行模拟）。</p>
<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><blockquote>
<p>思维导图：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806733.png"></p>
<h2 id="Python中的异常类"><a href="#Python中的异常类" class="headerlink" title="Python中的异常类"></a>Python中的异常类</h2><blockquote>
<p>定义引入：</p>
</blockquote>
<ul>
<li><strong>语法错误</strong>：在解析代码时出现的错误。当代码不符合Python的语法规则是，会报错<code>SyntaxError</code>。</li>
<li><strong>运行时错误</strong>：语法正常，但是在运行时出现错误,但是是非致命的，即为异常。</li>
</ul>
<p><strong>什么是异常</strong>？异常是因为程序出错而在正常控制流以外采取的行为，当Python检测到一个错误时，解释器就会指出流无法进行。</p>
<blockquote>
<p>具体介绍：Python中的异常类</p>
</blockquote>
<p>python所有的错误都是从<code>BaseException类</code>派生的。常见的错误类型和继承关系如下：<br><a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3.8/library/exceptions.html">https://docs.python.org/zh-cn/3.8/library/exceptions.html</a></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806734.png"></p>
<h2 id="捕获和处理异常"><a href="#捕获和处理异常" class="headerlink" title="捕获和处理异常"></a>捕获和处理异常</h2><blockquote>
<p>为了提高程序的健壮性和人机交互的友好性，需要对异常进行捕获和处理。</p>
</blockquote>
<ol>
<li>在Python中，我们可以将那些在运行时可能会出现状况的代码放在<code>try代码块</code>中，在try代码块的后面可以跟上一个或多个<code>except</code>来捕获可能出现的异常状况。<br>例如在上面读取文件的过程中，文件找不到会引发<code>FileNotFoundError </code>,指定了未知的编码会引发<code>LookupError</code> ,而如果读取文件时无法按指定方式解码会引发<code>UnicodeDecodeErIor</code>，我们在<strong>try后面</strong>跟上了<strong>三个except</strong>分别处理这三种不同的异常状况。最后我们使用<code>finally代码块</code>来关闭打开的文件，释放掉程序中获取的外部资源，由于<code>finally块</code>的代码不论程序正常还是异常都会执行到(甚至是调用了sys模块的exit函数退出Python环境，finally块都会被执行，因为<code>exit函数</code>实质上是引发了SystemExit异常) ,因此我们通常把f inally块称为“<code>总是执行代码块</code>”，它最适合用来做释放外部资源的操作。</li>
<li>如果不愿意在finally代码块中关闭文件对象释放资源，也可以使用上下文语法，通过<code>with关键字</code>指定文件对象的上下文环境并在离开上下文环境时自动释放文件资源。</li>
</ol>
<hr>
<p><strong>语法格式</strong>：<code>try ...except [as ... ]...语句</code></p>
<ul>
<li><strong>try代码</strong>块放置可能出现异常的语句，<strong>except代码块</strong>中放置处理异常的语句。</li>
<li>通过<strong>as语句</strong>把异常对象保存在一个变量中。</li>
</ul>
<hr>
<blockquote>
<p>一个例子：（文件open)</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">try</span>: <span class="comment"># 下写被监控的语句</span></span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;d.txt&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> FileNotFoundError:  <span class="comment"># 异常处理语句</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;无法打开指定文件！&quot;</span>)</span><br><span class="line"><span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806735.png"></p>
<p><strong>注意</strong>：没有报错，而是输出我们的提示语句。</p>
<hr>
<blockquote>
<p>一个例子：else的使用</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        a = <span class="built_in">float</span>(<span class="built_in">input</span>(<span class="string">&quot;输入被除数：&quot;</span>))</span><br><span class="line">        b = <span class="built_in">float</span>(<span class="built_in">input</span>(<span class="string">&quot;输入除数：&quot;</span>))</span><br><span class="line">        c = a/b</span><br><span class="line">    <span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e1:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;除数不为0!&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(e1)</span><br><span class="line">    <span class="keyword">except</span> ValueError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;输入正确格式的数！&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806744.png"></p>
<p>else 的代码块是在未捕获到异常后执行的。</p>
<hr>
<blockquote>
<p>一个例子：含有<strong>finally语句</strong></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    infile = <span class="built_in">input</span>()</span><br><span class="line">    fb = <span class="built_in">open</span>(infile, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    line = fb.readlines()</span><br><span class="line">    <span class="built_in">print</span>(line)</span><br><span class="line"><span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;未找到文件&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> UnicodeError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;解码错误&quot;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>不论前面是否执行，最后都会执行finally代码块。</p>
<hr>
<blockquote>
<p>提醒：各个语句的执行顺序</p>
</blockquote>
<p>try except else finally <strong>混合使用的规则</strong>：</p>
<ul>
<li><strong>先后次序</strong>：<code>try &gt; except &gt; else &gt; finally</code></li>
<li><strong>try语句</strong>至少需要配对<strong>一个except 或者 finall</strong></li>
<li>如果有<strong>else</strong>必须要一个<strong>except</strong></li>
</ul>
<h2 id="raise语句"><a href="#raise语句" class="headerlink" title="raise语句"></a>raise语句</h2><blockquote>
<p>通过这个关键字可以引发抛出异常。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RaiseError</span>(<span class="title class_ inherited__">ValueError</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">a,b</span>):</span><br><span class="line">    <span class="keyword">if</span> b == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">raise</span> RaiseError(<span class="string">&quot;分母不可为零&quot;</span>)</span><br><span class="line"></span><br><span class="line">fun(<span class="number">3</span>,<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806745.png"></p>
<p>在使用前需要先定义一个<strong>RaiseError类。</strong></p>
<h2 id="排查异常和记录异常"><a href="#排查异常和记录异常" class="headerlink" title="排查异常和记录异常"></a>排查异常和记录异常</h2><blockquote>
<p>程序员不可能捕获所有的异常，一旦这些异常被解释器捕获，就会使得程序结束。<br>所以我们要学会使用<code>sys模块</code>和<code>logging模块</code>帮助我们记录排查异常。</p>
</blockquote>
<blockquote>
<p>sys模块的使用</p>
</blockquote>
<p>使用<code>sys.exc_info</code>获取最近引发的异常。特别适用于except代码块。<br>返回一个<strong>三元组</strong>：<code>(type,value/message,traceback)</code></p>
<p><strong>一个例子</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = <span class="number">3</span>/<span class="number">0</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">tuple</span> = sys.exc_info()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>)</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806746.png"></p>
<hr>
<blockquote>
<p>logging模块的使用</p>
</blockquote>
<p>帮助我们记录错误信息，还可以把错误信息记录到日志文件。（日志级别为ERROR)</p>
<p><strong>一个例子</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">s</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>/<span class="built_in">int</span>(s)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        fun(<span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e1:</span><br><span class="line">        logging.exception(e1)</span><br><span class="line"></span><br><span class="line">logging.error(<span class="string">&quot;下面是异常：&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>结果</strong>：<br><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806747.png"></p>
<h1 id="扩展积累"><a href="#扩展积累" class="headerlink" title="扩展积累"></a>扩展积累</h1><h2 id="实训作业"><a href="#实训作业" class="headerlink" title="实训作业"></a>实训作业</h2><ol>
<li>使用csv模块进行一列的读取</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">readcsv</span>():</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;book.csv&quot;</span>,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fb:</span><br><span class="line">        data = csv.reader(fb)</span><br><span class="line">        list1 = [row[<span class="number">0</span>] <span class="keyword">for</span> row <span class="keyword">in</span> data]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> list1:</span><br><span class="line">            <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    readcsv()</span><br></pre></td></tr></table></figure>
<p>使用列表生成式进行列的获取。每一次for in都是<strong>返回一个列表</strong>。</p>
<ol start="2">
<li>使用csv模块读取一行</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">readcsv</span>():</span><br><span class="line"></span><br><span class="line">	<span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;book.csv&quot;</span>,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fb:</span><br><span class="line">		data = csv.reader(fb)</span><br><span class="line">		<span class="keyword">for</span> i,row <span class="keyword">in</span> <span class="built_in">enumerate</span>(data):</span><br><span class="line">			<span class="keyword">if</span> i != <span class="number">0</span>:</span><br><span class="line">				<span class="built_in">print</span>(row)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">	readcsv()</span><br></pre></td></tr></table></figure>
<p>使用<code>emumerate方法</code>获取索引。</p>
<ol start="3">
<li>将csv文件导入字典</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">readcsv</span>():</span><br><span class="line"> <span class="comment">#        请在此处添加代码         #</span></span><br><span class="line"> <span class="comment"># *************begin************#</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;book.csv&quot;</span>,<span class="string">&#x27;r&#x27;</span>,encoding = <span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> fb:</span><br><span class="line">        list1 = []</span><br><span class="line">        list2 = []</span><br><span class="line">        data = csv.reader(fb)</span><br><span class="line">        <span class="keyword">for</span> i,low <span class="keyword">in</span> <span class="built_in">enumerate</span>(data):</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">                list1 = low</span><br><span class="line"></span><br><span class="line">                x = low[<span class="number">0</span>]</span><br><span class="line">                y = low[<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                dict1 = &#123;x:low[<span class="number">0</span>],y:low[<span class="number">1</span>]&#125;</span><br><span class="line">                list2.append(dict1)</span><br><span class="line">   </span><br><span class="line">        <span class="built_in">print</span>(list2)</span><br><span class="line"> <span class="comment"># **************end*************#</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    readcsv()</span><br></pre></td></tr></table></figure>

<p>有一个非常非常需要注意的地方：使用<code>dict1[xx] = xx</code>进行赋值时，这个值是存储在一个位置的，也就是说<strong>就算你在前面将这字典导入了列表，后面赋予新的值后原来列表里的值也会随之改变</strong>。所以只能新建字典。</p>
<ol start="4">
<li>素数导入文件</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_prime</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;判断素数的函数&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">assert</span> n &gt; <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> factor <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="built_in">int</span>(sqrt(n)) + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> n % factor == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span> <span class="keyword">if</span> n != <span class="number">1</span> <span class="keyword">else</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">store</span>():</span><br><span class="line">    files = [<span class="string">&quot;a.txt&quot;</span>,<span class="string">&quot;b.txt&quot;</span>,<span class="string">&quot;c.txt&quot;</span>]</span><br><span class="line">    fp = []</span><br><span class="line">    <span class="keyword">for</span> file1 <span class="keyword">in</span> files:</span><br><span class="line">        fp.append(<span class="built_in">open</span>(file1,<span class="string">&quot;w&quot;</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10000</span>):</span><br><span class="line">        <span class="keyword">if</span> i &lt;= <span class="number">99</span> <span class="keyword">and</span> is_prime(i):</span><br><span class="line">            i = <span class="built_in">str</span>(i)</span><br><span class="line">            fp[<span class="number">0</span>].write(i)</span><br><span class="line">            fp[<span class="number">0</span>].write(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">        <span class="keyword">elif</span> <span class="number">100</span>&lt;=i&lt;=<span class="number">999</span> <span class="keyword">and</span> is_prime(i):</span><br><span class="line">            i = <span class="built_in">str</span>(i)</span><br><span class="line">            fp[<span class="number">1</span>].write(i)</span><br><span class="line">            fp[<span class="number">1</span>].write(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">        <span class="keyword">elif</span> is_prime(i):</span><br><span class="line">            i = <span class="built_in">str</span>(i)             </span><br><span class="line">            fp[<span class="number">2</span>].write(i)</span><br><span class="line">            fp[<span class="number">2</span>].write(<span class="string">&quot;\n&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>注意点</strong>：<br>在写入文件时，需要保证<strong>写入内容为字符串</strong>，所以要使用<code>str()</code>进行转换。<br>可以使用<code>write(&quot;\n&quot;)</code>写入<strong>换行符</strong>。</p>
<ol start="5">
<li>将字符串转换为字典（与前面的csv文件变成字典类似）</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">name</span>):</span><br><span class="line"></span><br><span class="line">    fb = <span class="built_in">open</span>(name,<span class="string">&quot;r&quot;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    list1 = []</span><br><span class="line">    list2 = []</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fb:</span><br><span class="line">        list1.append(line.strip().split(<span class="string">&quot; &quot;</span>))</span><br><span class="line">    <span class="keyword">for</span> i,low <span class="keyword">in</span> <span class="built_in">enumerate</span>(list1):</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">            x = low[<span class="number">0</span>]</span><br><span class="line">            y = low[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dict1 = &#123;x:low[<span class="number">0</span>],y:low[<span class="number">1</span>]&#125;</span><br><span class="line">            list2.append(dict1)</span><br><span class="line">    <span class="built_in">print</span>(list2)</span><br><span class="line">    fb.close()</span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    name = <span class="built_in">input</span>()</span><br><span class="line">    main(name)</span><br></pre></td></tr></table></figure>
<p><strong>注意点</strong>：<br>1、使用<code>for i,low in enumerate(list1)</code>可以对列表中的元素进行索引后选择需要的行。<br>2、使用<code>line.strip().split(&quot; &quot;)</code>可以将每一行字符串变成一个列表。</p>
<ol start="6">
<li>json字符串的转换</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">全局标量定义来表示符合 JSON 所规定的数据类型</span></span><br><span class="line"><span class="string">（学生可以使用字典结构表示此结构）</span></span><br><span class="line"><span class="string">其中：</span></span><br><span class="line"><span class="string">BEGIN_OBJECT（&#123;）</span></span><br><span class="line"><span class="string">END_OBJECT（&#125;）</span></span><br><span class="line"><span class="string">BEGIN_ARRAY（[）</span></span><br><span class="line"><span class="string">END_ARRAY（]）</span></span><br><span class="line"><span class="string">NULL（null）</span></span><br><span class="line"><span class="string">NUMBER（数字）</span></span><br><span class="line"><span class="string">STRING（字符串）</span></span><br><span class="line"><span class="string">BOOLEAN（true/false）</span></span><br><span class="line"><span class="string">SEP_COLON（:）</span></span><br><span class="line"><span class="string">SEP_COMMA（,）</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Signal token</span></span><br><span class="line">BEGIN_OBJECT = <span class="number">1</span></span><br><span class="line">BEGIN_ARRAY = <span class="number">2</span></span><br><span class="line">END_OBJECT = <span class="number">4</span></span><br><span class="line">END_ARRAY = <span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># variable token</span></span><br><span class="line">NULL_TOKEN = <span class="number">16</span></span><br><span class="line">NUMBER_TOKEN = <span class="number">32</span></span><br><span class="line">STRING_TOKEN = <span class="number">64</span></span><br><span class="line">BOOL_TOKEN = <span class="number">128</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># separator token</span></span><br><span class="line">COLON_TOKEN = <span class="number">256</span></span><br><span class="line">COMMA_TOKEN = <span class="number">512</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># end signal</span></span><br><span class="line">END_JSON = <span class="number">65536</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># json index</span></span><br><span class="line">json_index = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">token_parse</span>(<span class="params">json_str: <span class="built_in">str</span>, json_index: <span class="built_in">int</span></span>) -&gt; (<span class="built_in">tuple</span>, <span class="built_in">int</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    完成词法解析，返回token</span></span><br><span class="line"><span class="string">    :param json_str: 输入的json字符串</span></span><br><span class="line"><span class="string">    :param json_index: json字符串的位置</span></span><br><span class="line"><span class="string">    :return: 返回已处理好的token和json字符串的位置</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">read_num</span>(<span class="params">json_index: <span class="built_in">int</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        处理数字</span></span><br><span class="line"><span class="string">        :param json_index: json字符串的位置</span></span><br><span class="line"><span class="string">        :return: 返回处理数字后的token序列</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment">##你的代码在这里##</span></span><br><span class="line">        rem = json_str[json_index: json_index + <span class="number">2</span>]</span><br><span class="line">        <span class="keyword">return</span>(NUMBER_TOKEN, rem), json_index + <span class="number">2</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">read_str</span>(<span class="params">json_index: <span class="built_in">int</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        处理字符串</span></span><br><span class="line"><span class="string">        :param json_index: json字符串的位置</span></span><br><span class="line"><span class="string">        :return: 返回处理字符串后的token序列</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment">##你的代码在这里##</span></span><br><span class="line">        k = <span class="number">0</span></span><br><span class="line">        num = json_index</span><br><span class="line">        <span class="keyword">while</span> json_str[num+<span class="number">1</span>] != <span class="string">&#x27;&quot;&#x27;</span>:</span><br><span class="line">            num += <span class="number">1</span></span><br><span class="line">            k += <span class="number">1</span></span><br><span class="line">        rem = json_str[json_index+<span class="number">1</span>: json_index + <span class="number">1</span> + k]</span><br><span class="line">        <span class="keyword">return</span>(STRING_TOKEN, rem), json_index + <span class="number">2</span> + k</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">read_null</span>():</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        处理null</span></span><br><span class="line"><span class="string">        :return: 返回处理null后的token序列</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        rem = json_str[json_index: json_index + <span class="number">4</span>]</span><br><span class="line">        <span class="keyword">return</span> (NULL_TOKEN, rem), json_index + <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">read_bool</span>(<span class="params">s: <span class="built_in">str</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        处理true，false</span></span><br><span class="line"><span class="string">        :param s: json字符串</span></span><br><span class="line"><span class="string">        :return: 返回处理true，false后的token序列</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> s == <span class="string">&#x27;t&#x27;</span>:</span><br><span class="line">            rem = json_str[json_index: json_index + <span class="number">4</span>]</span><br><span class="line">            <span class="keyword">return</span> (BOOL_TOKEN, rem), json_index + <span class="number">4</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            rem = json_str[json_index: json_index + <span class="number">5</span>]</span><br><span class="line">            <span class="keyword">return</span> (BOOL_TOKEN, rem), json_index + <span class="number">5</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> json_index == <span class="built_in">len</span>(json_str):</span><br><span class="line">        <span class="keyword">return</span> (END_JSON, <span class="literal">None</span>), json_index</span><br><span class="line">    <span class="keyword">elif</span> json_str[json_index] == <span class="string">&#x27;&#123;&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> (BEGIN_OBJECT, json_str[json_index]), json_index + <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> json_str[json_index] == <span class="string">&#x27;&#125;&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> (END_OBJECT, json_str[json_index]), json_index + <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> json_str[json_index] == <span class="string">&#x27;[&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> (BEGIN_ARRAY, json_str[json_index]), json_index + <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> json_str[json_index] == <span class="string">&#x27;]&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> (END_ARRAY, json_str[json_index]), json_index + <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> json_str[json_index] == <span class="string">&#x27;,&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> (COMMA_TOKEN, json_str[json_index]), json_index + <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> json_str[json_index] == <span class="string">&#x27;:&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> (COLON_TOKEN, json_str[json_index]), json_index + <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> json_str[json_index] == <span class="string">&#x27;n&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> read_null()</span><br><span class="line">    <span class="keyword">elif</span> json_str[json_index] == <span class="string">&#x27;t&#x27;</span> <span class="keyword">or</span> json_str[json_index] == <span class="string">&#x27;f&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> read_bool(json_str[json_index])</span><br><span class="line">    <span class="keyword">elif</span> json_str[json_index] == <span class="string">&#x27;&quot;&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> read_str(json_index)</span><br><span class="line">    <span class="keyword">if</span> json_str[json_index].isdigit():</span><br><span class="line">        <span class="keyword">return</span> read_num(json_index)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tokenizer</span>(<span class="params">json_str: <span class="built_in">str</span></span>) -&gt; <span class="built_in">list</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    生成token序列</span></span><br><span class="line"><span class="string">    :param json_str:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    json_index = <span class="number">0</span></span><br><span class="line">    tk, cur_index = token_parse(json_str, json_index)</span><br><span class="line">    token_list = []</span><br><span class="line">    generate_tokenlist(token_list, tk)</span><br><span class="line">    <span class="keyword">while</span> tk[<span class="number">0</span>] != END_JSON:</span><br><span class="line">        tk, cur_index = token_parse(json_str, cur_index)</span><br><span class="line">        generate_tokenlist(token_list, tk)</span><br><span class="line">    <span class="keyword">return</span> token_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_token</span>(<span class="params">tokentype: <span class="built_in">int</span>, tokenvalue: <span class="built_in">str</span></span>) -&gt; <span class="built_in">tuple</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    生成token结构</span></span><br><span class="line"><span class="string">    :param tokentype: token的类型</span></span><br><span class="line"><span class="string">    :param tokenvalue: token的值</span></span><br><span class="line"><span class="string">    :return: 返回token</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    token = (tokentype, tokenvalue)</span><br><span class="line">    <span class="keyword">return</span> token</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_tokenlist</span>(<span class="params">tokenlist: <span class="built_in">list</span>, token: <span class="built_in">tuple</span></span>) -&gt; <span class="built_in">list</span>:</span><br><span class="line">    tokenlist.append(token)</span><br><span class="line">    <span class="keyword">return</span> tokenlist</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_json</span>(<span class="params">tokenlist: <span class="built_in">list</span></span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_token</span>(<span class="params">expected: <span class="built_in">int</span>, actual: <span class="built_in">int</span></span>):</span><br><span class="line">        <span class="keyword">if</span> expected &amp; actual == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">&#x27;Unexpected Token at position %d&#x27;</span> % json_index)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse_json_array</span>():</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        处理array对象</span></span><br><span class="line"><span class="string">        :return: 处理json中的array对象</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">global</span> json_index</span><br><span class="line">        expected = BEGIN_ARRAY | END_ARRAY | BEGIN_OBJECT | END_OBJECT | NULL_TOKEN | NUMBER_TOKEN | BOOL_TOKEN | STRING_TOKEN</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> json_index != <span class="built_in">len</span>(tokenlist):</span><br><span class="line">            json_index += <span class="number">1</span></span><br><span class="line">            token = tokenlist[json_index]</span><br><span class="line">            <span class="comment"># token_type -&gt; TokenEnum</span></span><br><span class="line">            token_type = token[<span class="number">0</span>]</span><br><span class="line">            token_value = token[<span class="number">1</span>]</span><br><span class="line">            check_token(expected, token_type)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># check through each condition</span></span><br><span class="line">            <span class="keyword">if</span> token_type == BEGIN_OBJECT:</span><br><span class="line">                array.append(parse_json_object())</span><br><span class="line">                expected = COMMA_TOKEN | END_ARRAY</span><br><span class="line">            <span class="keyword">elif</span> token_type == BEGIN_ARRAY:</span><br><span class="line">                array.append(parse_json_array())</span><br><span class="line">                expected = COMMA_TOKEN | END_ARRAY</span><br><span class="line">            <span class="keyword">elif</span> token_type == END_ARRAY:</span><br><span class="line">                <span class="keyword">return</span> array</span><br><span class="line">            <span class="keyword">elif</span> token_type == NULL_TOKEN:</span><br><span class="line">                array.append(<span class="literal">None</span>)</span><br><span class="line">                expected = COMMA_TOKEN | END_ARRAY</span><br><span class="line">            <span class="keyword">elif</span> token_type == NUMBER_TOKEN:</span><br><span class="line">                array.append(<span class="built_in">int</span>(token_value))</span><br><span class="line">                expected = COMMA_TOKEN | END_ARRAY</span><br><span class="line">            <span class="keyword">elif</span> token_type == STRING_TOKEN:</span><br><span class="line">                <span class="comment"># print(&quot;array-------------array&quot;)</span></span><br><span class="line">                array.append(token_value)</span><br><span class="line">                expected = COMMA_TOKEN | END_ARRAY</span><br><span class="line">            <span class="keyword">elif</span> token_type == BOOL_TOKEN:</span><br><span class="line">                token_value = token_value.lower().capitalize()</span><br><span class="line">                array.append(&#123;<span class="string">&#x27;True&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;False&#x27;</span>: <span class="literal">False</span>&#125;[token_value])</span><br><span class="line">                expected = COMMA_TOKEN | END_ARRAY</span><br><span class="line">            <span class="keyword">elif</span> COMMA_TOKEN:</span><br><span class="line">                expected = BEGIN_ARRAY | BEGIN_OBJECT | STRING_TOKEN | BOOL_TOKEN | NULL_TOKEN | NUMBER_TOKEN</span><br><span class="line">            <span class="keyword">elif</span> END_JSON:</span><br><span class="line">                <span class="keyword">return</span> array</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">raise</span> Exception(<span class="string">&#x27;Unexpected Token at position %d&#x27;</span> % json_index)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse_json_object</span>():</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        处理json对象</span></span><br><span class="line"><span class="string">        :return:处理json中的json对象</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">global</span> json_index</span><br><span class="line">        expected = STRING_TOKEN | END_OBJECT</span><br><span class="line">        key = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">while</span> json_index != <span class="built_in">len</span>(tokenlist):</span><br><span class="line">            json_index += <span class="number">1</span></span><br><span class="line">            token = tokenlist[json_index]</span><br><span class="line">            token_type = token[<span class="number">0</span>]</span><br><span class="line">            token_value = token[<span class="number">1</span>]</span><br><span class="line">            <span class="comment"># print(&quot;expected: &quot;, expected, &quot;token_type: &quot;, token_type, &quot;token_value: &quot;, token_value)</span></span><br><span class="line">            check_token(expected, token_type)</span><br><span class="line">            <span class="keyword">if</span> token_type == BEGIN_OBJECT:</span><br><span class="line">                obj.update(&#123;key: parse_json_object()&#125;)</span><br><span class="line">                expected = COMMA_TOKEN | END_OBJECT</span><br><span class="line">            <span class="keyword">elif</span> token_type == END_OBJECT:</span><br><span class="line">                <span class="keyword">return</span> obj</span><br><span class="line">            <span class="keyword">elif</span> token_type == BEGIN_ARRAY:</span><br><span class="line">                <span class="comment"># print(&quot;join array&quot;)</span></span><br><span class="line">                obj.update(&#123;key: parse_json_array()&#125;)</span><br><span class="line">                expected = COMMA_TOKEN | END_OBJECT | STRING_TOKEN</span><br><span class="line">            <span class="keyword">elif</span> token_type == NULL_TOKEN:</span><br><span class="line">                obj.update(&#123;key: <span class="literal">None</span>&#125;)</span><br><span class="line">                expected = COMMA_TOKEN | END_OBJECT</span><br><span class="line">            <span class="keyword">elif</span> token_type == STRING_TOKEN:</span><br><span class="line">                pre_token = tokenlist[json_index - <span class="number">1</span>]</span><br><span class="line">                pre_token_value = pre_token[<span class="number">0</span>]</span><br><span class="line">                <span class="comment"># print(pre_token_value)</span></span><br><span class="line">                <span class="keyword">if</span> pre_token_value == COLON_TOKEN:</span><br><span class="line">                    value = token[<span class="number">1</span>]</span><br><span class="line">                    obj.update(&#123;key: value&#125;)</span><br><span class="line">                    <span class="comment">#      print(&quot;----------&quot;)</span></span><br><span class="line">                    expected = COMMA_TOKEN | END_OBJECT</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    key = token[<span class="number">1</span>]</span><br><span class="line">                    expected = COLON_TOKEN</span><br><span class="line">            <span class="comment">#     print(&quot;+++++++++&quot;)</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">elif</span> token_type == NUMBER_TOKEN:</span><br><span class="line">                obj.update(&#123;key: <span class="built_in">int</span>(token_value)&#125;)</span><br><span class="line">                expected = COMMA_TOKEN | END_OBJECT</span><br><span class="line">            <span class="keyword">elif</span> token_type == BOOL_TOKEN:</span><br><span class="line">                token_value = token_value.lower().capitalize()</span><br><span class="line">                obj.update(&#123;key: &#123;<span class="string">&#x27;True&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;False&#x27;</span>: <span class="literal">False</span>&#125;[token_value]&#125;)</span><br><span class="line">                expected = COMMA_TOKEN | END_OBJECT</span><br><span class="line">            <span class="keyword">elif</span> token_type == COLON_TOKEN:</span><br><span class="line">                expected = NULL_TOKEN | NUMBER_TOKEN | BOOL_TOKEN | STRING_TOKEN | BEGIN_ARRAY | BEGIN_OBJECT</span><br><span class="line">            <span class="keyword">elif</span> token_type == COMMA_TOKEN:</span><br><span class="line">                expected = STRING_TOKEN</span><br><span class="line">            <span class="keyword">elif</span> token_type == END_JSON:</span><br><span class="line">                <span class="keyword">return</span> obj</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">raise</span> Exception(<span class="string">&#x27;Unexpected Token at position %d&#x27;</span> % json_index)</span><br><span class="line"></span><br><span class="line">    array = []</span><br><span class="line">    obj = &#123;&#125;</span><br><span class="line">    <span class="keyword">global</span> json_index</span><br><span class="line">    <span class="keyword">if</span> tokenlist[<span class="number">0</span>][<span class="number">0</span>] == BEGIN_OBJECT:</span><br><span class="line">        <span class="keyword">return</span> parse_json_object()</span><br><span class="line">    <span class="keyword">elif</span> tokenlist[<span class="number">0</span>][<span class="number">0</span>] == BEGIN_ARRAY:</span><br><span class="line">        <span class="keyword">return</span> parse_json_array()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&#x27;Illegal Token at position %d&#x27;</span> % json_index)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    raw_data = <span class="built_in">input</span>()</span><br><span class="line">    jlist = tokenizer(raw_data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        jdict = parse_json(jlist)</span><br><span class="line">        <span class="built_in">print</span>(jdict)</span><br><span class="line">    <span class="keyword">except</span> BaseException <span class="keyword">as</span> result:</span><br><span class="line">        <span class="built_in">print</span>(result)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>具体解析：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">JSON 解析器从本质上来说就是根据 JSON 文法规则创建的状态机，输入是一个 JSON 字符串，输出是一个包含JSON各个部分的字典。一般来说，解析过程包括词法分析和语法分析两个阶段。词法分析阶段的目标是按照构词规则将 JSON 字符串解析成 Token 流，举个例子：</span><br><span class="line"></span><br><span class="line">比如有如下的 JSON 字符串：&#123;&quot;name&quot;:&quot;小明&quot;,&quot;age&quot;:14&#125;</span><br><span class="line">生成Token流为：</span><br><span class="line">[(1, &#x27;&#123;&#x27;)，(64, &#x27;name&#x27;)，(256, &#x27;:&#x27;)，(64, &#x27;小明&#x27;)，(512, &#x27;,&#x27;)，(64, &#x27;age&#x27;)，(256, &#x27;:&#x27;)，(32, 14)，(4, &#x27;&#125;&#x27;)，(65536, None)]</span><br><span class="line">可以看出字符串中的每一个部分，都用一个数字进行表示，其中这些数字分别代表不同含义，用来标识JSON字符串中不同的部分，例如：(1, &#x27;&#123;&#x27;)中‘1’表示JSON对象开始的部分，在程序中用BEGIN_OBJECT代表。</span><br><span class="line"></span><br><span class="line">通过词法分析阶段得到Token 流后，需要对Token 流进行语法分析。语法分析的目的是根据 JSON 文法检查上面 Token 序列所构成的 JSON 结构是否合法。比如 JSON 文法要求非空 JSON 对象以键值对的形式出现，不能是一些非法形式。比如：‘&#123;&quot;name&quot;:&quot;小明&quot;,&quot;age&quot;:14,’，（由于大括号没有封闭，所以结构非法）。这时候我们采用递归下降的方法逐一处理每一个Token，判断他们的结构是否合法，并组成字典结构。</span><br><span class="line"></span><br><span class="line">上文的TOKEN流最终成为如下的字典结构：</span><br><span class="line">&#123;&#x27;name&#x27;: &#x27;小明&#x27;, &#x27;age&#x27;: 14&#125;</span><br><span class="line"></span><br><span class="line">注意：输入的是JSON字符串，类型为str，输出为字典结构，类型为dict，看起来很像但并不一样</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：<br>输入的是一个字符串，而<strong>不是字典</strong>。我们要做的就是将这个字符串转换为对于的python格式。</p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><ol>
<li>写入文件</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806748.png"></p>
<ol start="2">
<li>读入文件</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806749.png"></p>
<ol start="3">
<li>文件指针：</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806789.png"></p>
<ol start="4">
<li>os模块</li>
</ol>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806804.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806826.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1648542806844.png"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://danggeovo.github.io/2023/04/10/python%E5%BA%94%E7%94%A8--excel/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="danggeOvO">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dangge の 小小世界">
      <meta itemprop="description" content="记录生活与学习!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | dangge の 小小世界">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/10/python%E5%BA%94%E7%94%A8--excel/" class="post-title-link" itemprop="url">python应用--excel</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-10 13:48:32" itemprop="dateCreated datePublished" datetime="2023-04-10T13:48:32+08:00">2023-04-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-08 18:15:56" itemprop="dateModified" datetime="2023-11-08T18:15:56+08:00">2023-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">【-基础知识-】编程语言学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/python%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">python学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>5.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>9 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>本文介绍以下使用python库实现对excel的读写。主要思路就是通过<strong>xlrd</strong>读取excel数据进行处理、通过<strong>openpyxl</strong>进行数据的写入。<br>（python有很多处理excel的库，这里只是记录其中一种方式。后面会系统学习pandas）</p>
<blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://www.jb51.net/article/165629.htm">https://www.jb51.net/article/165629.htm</a><br><a target="_blank" rel="noopener" href="https://www.jb51.net/article/205141.htm#_label0">https://www.jb51.net/article/205141.htm#_label0</a></p>
</blockquote>
</blockquote>
<h1 id="xlrd的使用"><a href="#xlrd的使用" class="headerlink" title="xlrd的使用"></a>xlrd的使用</h1><blockquote>
<ol>
<li>安装</li>
</ol>
</blockquote>
<p>在pycharm中的控制台输入：<code>pip install xlrd</code>即可</p>
<blockquote>
<ol start="2">
<li>操作流程</li>
</ol>
</blockquote>
<ol>
<li>导入模块</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import xlrd as xr</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>打开工作簿</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># filename是文件的路径名称</span></span><br><span class="line">workbook = xlrd.open_workbook(filename=<span class="string">r&#x27;C:\Users\Windows10\Desktop\xlsx文件.xlsx&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>获取需要操作的sheet表格（有三种方法）</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">通过索引获取：--------------</span><br><span class="line"><span class="comment"># 获取第一个sheet表格</span></span><br><span class="line">table = workbook.sheets()[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">通过sheet名称获取：---------</span><br><span class="line"><span class="comment"># 通过sheet名称获取</span></span><br><span class="line">table = workbook.sheet_by_name(sheet_name=<span class="string">&#x27;Sheet1&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>补充：获取excel所有sheel名称</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取工作薄中所有的sheet名称</span></span><br><span class="line">names = workbook.sheet_names()</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>行列操作</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 获取sheet中有效行数</span></span><br><span class="line">row = table.nrows</span><br><span class="line"><span class="built_in">print</span>(row)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取sheet中有效列数</span></span><br><span class="line">col = table.ncols</span><br><span class="line"><span class="built_in">print</span>(col)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回该行的有效单元格长度</span></span><br><span class="line">num = table.row_len(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># rowx表示是获取第几行的数据</span></span><br><span class="line"><span class="comment"># start_col表示从索引为多少开始，end_colx表示从索引为多少结束，</span></span><br><span class="line"><span class="comment"># end_colx为None表示结束没有限制</span></span><br><span class="line"><span class="comment"># 获取指定行中的数据并以列表的形式返回</span></span><br><span class="line">table_list = table.row_values(rowx=<span class="number">0</span>, start_colx=<span class="number">0</span>, end_colx=<span class="literal">None</span>)</span><br><span class="line"><span class="built_in">print</span>(table_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># colx表示是获取第几列的数据</span></span><br><span class="line"><span class="comment"># start_rowx表示从索引为多少开始，end_rowx表示从索引为多少结束，</span></span><br><span class="line"><span class="comment"># end_rowx为None表示结束没有限制</span></span><br><span class="line"><span class="comment"># 获取指定列中的数据并以列表的形式返回</span></span><br><span class="line">table_list = table.col_values(colx=<span class="number">0</span>, start_rowx=<span class="number">0</span>, end_rowx=<span class="literal">None</span>)</span><br><span class="line"><span class="built_in">print</span>(table_list)</span><br><span class="line"></span><br><span class="line"><span class="comment">#返回由该列中所有的单元格对象组成的列表</span></span><br><span class="line"><span class="built_in">print</span>(table.row(<span class="number">0</span>)) </span><br><span class="line"><span class="comment">#返回由该行中所有的单元格对象组成的列表</span></span><br><span class="line"><span class="built_in">print</span>(table.row_slice(<span class="number">0</span>)) </span><br><span class="line"><span class="comment">#返回由该行中所有单元格的数据类型组成的列表</span></span><br><span class="line"><span class="built_in">print</span>(table.row_types(<span class="number">0</span>, start_colx=<span class="number">0</span>, end_colx=<span class="literal">None</span>)) </span><br><span class="line"></span><br><span class="line"><span class="comment">#返回由该列中所有的单元格对象组成的列表</span></span><br><span class="line"><span class="built_in">print</span>(table.col(<span class="number">0</span>, start_rowx=<span class="number">0</span>, end_rowx=<span class="literal">None</span>)) </span><br><span class="line"><span class="comment">#返回由该列中所有的单元格对象组成的列表</span></span><br><span class="line"><span class="built_in">print</span>(table.col_slice(<span class="number">0</span>, start_rowx=<span class="number">0</span>, end_rowx=<span class="literal">None</span>)) </span><br><span class="line"><span class="comment">#返回由该列中所有单元格的数据类型组成的列表</span></span><br><span class="line"><span class="built_in">print</span>(table.col_types(<span class="number">0</span>, start_rowx=<span class="number">0</span>, end_rowx=<span class="literal">None</span>)) </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>单元格操作</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 获取指定单元格内的值</span></span><br><span class="line">value = table.cell_value(rowx=<span class="number">0</span>, colx=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(value)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取单元格内的组成对象和数据</span></span><br><span class="line">value = table.cell(rowx=<span class="number">0</span>, colx=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(value)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取单元格的数据类型</span></span><br><span class="line"><span class="comment"># python读取excel中单元格的内容返回的有5种类型。ctype : 0 empty,1 string, 2 number, 3 date, 4 boolean, 5 error。即date的ctype=3，这时需要使用xlrd的xldate_as_tuple来处理为date格式，先判断表格的ctype=3时xldate才能开始操作。</span></span><br><span class="line">value = table.cell_type(rowx=<span class="number">0</span>, colx=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(value)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="openpyxl的使用"><a href="#openpyxl的使用" class="headerlink" title="openpyxl的使用"></a>openpyxl的使用</h1><h2 id="特点概述"><a href="#特点概述" class="headerlink" title="特点概述"></a>特点概述</h2><blockquote>
<p>openpyxl（可读写excel表）专门处理Excel2007及以上版本产生的xlsx文件，xls和xlsx之间转换容易 注意：如果文字编码是“gb2312” 读取后就会显示乱码，请先转成Unicode。</p>
</blockquote>
<ol>
<li><p>起始值：1，1</p>
</li>
<li><p>openpyxl 支持直接横纵坐标访问，如A1,B2..</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ws[<span class="string">&#x27;A4&#x27;</span>] = <span class="number">4</span> <span class="comment">#直接赋值</span></span><br></pre></td></tr></table></figure>
<h2 id="具体操作"><a href="#具体操作" class="headerlink" title="具体操作"></a>具体操作</h2><blockquote>
<p>先理清openpyxl的操作对象</p>
</blockquote>
<ul>
<li><code>workbook</code>： 工作簿，一个excel文件包含多个sheet。</li>
<li><code>sheet</code>：工作表，一个workbook有多个，表名识别，如“sheet1”,“sheet2”等。</li>
<li><code>cell</code>： 单元格，存储数据对象</li>
</ul>
<ol>
<li>新建表</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wb = Workbook(encoding=<span class="string">&#x27;UTF-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用_active_sheet_index属性, 默认会设置0，也就是第一个worksheet。</span></span><br><span class="line">ws = wb.active</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建worksheets，通过 openpyxl.workbook.Workbook.create_sheet() 方法：</span></span><br><span class="line">ws = wb.create_sheet(<span class="string">&quot;Mysheet&quot;</span>) <span class="comment">#插入到最后(default)</span></span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line"> ws = wb.create_sheet(<span class="string">&quot;Mysheet&quot;</span>, <span class="number">0</span>) <span class="comment">#插入到最开始的位置</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 创建的sheet的名称会自动创建，按照sheet，sheet1，sheet2自动增长，通过title属性可以修改其名称</span></span><br><span class="line">ws.title = <span class="string">&quot;New Title&quot;</span></span><br><span class="line">ws = wb.create_sheet(title=<span class="string">&quot;Pip&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>注：也可以打开已有的excel文件</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xfile = openpyxl.load_workbook(<span class="string">&#x27;D:\\Tencent Files\\95239002\\聚类求和.xlsx&#x27;</span>)</span><br><span class="line">sheet = xfile.get_sheet_by_name(<span class="string">&quot;总的数据&quot;</span>)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>单元格赋值</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设定单元格的值，三种方式</span></span><br><span class="line">sheet.cell(row=<span class="number">2</span>,column=<span class="number">5</span>).value=<span class="number">99</span></span><br><span class="line">sheet.cell(row=<span class="number">3</span>,column=<span class="number">5</span>,value=<span class="number">100</span>)</span><br><span class="line">ws[<span class="string">&#x27;A4&#x27;</span>] = <span class="number">4</span> <span class="comment">#write</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>逐行写</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ws.append(iterable)</span><br><span class="line"><span class="comment">#添加一行到当前sheet的最底部（即逐行追加从第一行开始） iterable必须是list,tuple,dict,range,generator类型的。 1,如果是list,将list从头到尾顺序添加。 2，如果是dict,按照相应的键添加相应的键值。</span></span><br><span class="line">ws.append([‘This <span class="keyword">is</span> A1<span class="string">&#x27;, ‘This is B1&#x27;</span>, ‘This <span class="keyword">is</span> C1<span class="string">&#x27;])</span></span><br><span class="line"><span class="string">ws.append(&#123;‘A&#x27;</span> : ‘This <span class="keyword">is</span> A1<span class="string">&#x27;, ‘C&#x27;</span> : ‘This <span class="keyword">is</span> C1<span class="string">&#x27;&#125;)</span></span><br><span class="line"><span class="string">ws.append(&#123;1 : ‘This is A1&#x27;</span>, <span class="number">3</span> : ‘This <span class="keyword">is</span> C1<span class="string">&#x27;&#125;)</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>读表操作</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#打开文件：</span></span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook</span><br><span class="line">excel=load_workbook(<span class="string">&#x27;E:/test.xlsx&#x27;</span>)</span><br><span class="line"><span class="comment">#获取sheet：</span></span><br><span class="line">table = excel.get_sheet_by_name(<span class="string">&#x27;Sheet1&#x27;</span>)  <span class="comment">#通过表名获取 </span></span><br><span class="line"><span class="comment">#获取行数和列数：</span></span><br><span class="line">rows=table.max_row  <span class="comment">#获取行数</span></span><br><span class="line">cols=table.max_column  <span class="comment">#获取列数</span></span><br><span class="line"><span class="comment">#获取单元格值：</span></span><br><span class="line">Data=table.cell(row=row,column=col).value <span class="comment">#获取表格内容，是从第一行第一列是从1开始的，注意不要丢掉 .value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#通过名字</span></span><br><span class="line">  ws = wb[<span class="string">&quot;frequency&quot;</span>] </span><br><span class="line">  <span class="comment">#等同于 ws2 = wb.get_sheet_by_name(&#x27;frequency&#x27;)</span></span><br><span class="line">  <span class="comment">#不知道名字用index</span></span><br><span class="line">  sheet_names = wb.get_sheet_names()</span><br><span class="line">  ws = wb.get_sheet_by_name(sheet_names[index])<span class="comment"># index为0为第一张表 </span></span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">  ws =wb.active</span><br><span class="line">  <span class="comment"># 等同于 ws = wb.get_active_sheet() #通过_active_sheet_index设定读取的表，默认0读第一个表</span></span><br><span class="line">  <span class="comment">#活动表表名</span></span><br><span class="line">  wb.get_active_sheet().title</span><br><span class="line">  </span><br><span class="line"><span class="comment">#逐行读</span></span><br><span class="line">    ws.iter_rows(range_string=<span class="literal">None</span>, row_offset=<span class="number">0</span>, column_offset=<span class="number">0</span>): <span class="built_in">range</span>-string(string)-单元格的范围：例如(<span class="string">&#x27;A1:C4&#x27;</span>) row_offset-添加行 column_offset-添加列 </span><br><span class="line">  <span class="comment"># 返回一个生成器, 注意取值时要用value,例如：</span></span><br><span class="line">  <span class="keyword">for</span> row <span class="keyword">in</span> ws.iter_rows(<span class="string">&#x27;A1:C2&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> cell <span class="keyword">in</span> row:</span><br><span class="line">      <span class="built_in">print</span> cell</span><br><span class="line">  <span class="comment">#读指定行、指定列:</span></span><br><span class="line">  rows=ws.rows<span class="comment">#row是可迭代的 </span></span><br><span class="line">  columns=ws.columns<span class="comment">#column是可迭代的</span></span><br><span class="line">  <span class="comment">#打印第n行数据 </span></span><br><span class="line">  <span class="built_in">print</span> rows[n]<span class="comment">#不需要用.value </span></span><br><span class="line">  <span class="built_in">print</span> columns[n]<span class="comment">#不需要用.value</span></span><br></pre></td></tr></table></figure>

<h1 id="具体例子：聚类求和"><a href="#具体例子：聚类求和" class="headerlink" title="具体例子：聚类求和"></a>具体例子：聚类求和</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xlrd <span class="keyword">as</span> xr</span><br><span class="line"><span class="keyword">import</span> openpyxl</span><br><span class="line">xlsx = xr.open_workbook(<span class="string">&quot;D:\\Tencent Files\\95239002\\聚类求和.xlsx&quot;</span>)</span><br><span class="line">ret1 = xlsx.sheets()[<span class="number">0</span>]</span><br><span class="line">sheet1_col1 = ret1.col_values(<span class="number">0</span>)</span><br><span class="line">sheet1_col2 = ret1.col_values(<span class="number">1</span>)</span><br><span class="line">sheet1_col3 = [<span class="string">&quot;result&quot;</span>]</span><br><span class="line">i, j = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">k = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">if</span> j&lt;<span class="built_in">len</span>(sheet1_col2) <span class="keyword">and</span> sheet1_col2[i]==sheet1_col2[j]:</span><br><span class="line">        k+=<span class="number">1</span></span><br><span class="line">        j+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">if</span> k==<span class="number">1</span>:</span><br><span class="line">        sheet1_col3.append(<span class="built_in">round</span>(sheet1_col1[i], <span class="number">6</span>))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        sheet1_col3.append(<span class="built_in">round</span>(<span class="built_in">sum</span>(sheet1_col1[i:j]), <span class="number">6</span>))</span><br><span class="line">        <span class="keyword">for</span> m <span class="keyword">in</span> <span class="built_in">range</span>(k-<span class="number">1</span>):</span><br><span class="line">            sheet1_col3.append(<span class="string">&quot;same&quot;</span>)</span><br><span class="line">        k = <span class="number">1</span></span><br><span class="line">    i = j</span><br><span class="line">    j = i+<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> j&gt;=<span class="built_in">len</span>(sheet1_col2):</span><br><span class="line">        sheet1_col3.append(<span class="built_in">round</span>(sheet1_col1[i], <span class="number">6</span>))</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(sheet1_col3)</span><br><span class="line"></span><br><span class="line">xfile = openpyxl.load_workbook(<span class="string">&#x27;D:\\Tencent Files\\95239002\\聚类求和.xlsx&#x27;</span>)</span><br><span class="line">sheet = xfile.get_sheet_by_name(<span class="string">&quot;总的数据&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(sheet1_col3)+<span class="number">1</span>):</span><br><span class="line">    sheet.cell(i, <span class="number">3</span>, sheet1_col3[i-<span class="number">1</span>])</span><br><span class="line">xfile.save(<span class="string">&quot;聚类求和3.xlsx&quot;</span>)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://danggeovo.github.io/2023/04/06/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF-%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E4%B8%8E%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="danggeOvO">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dangge の 小小世界">
      <meta itemprop="description" content="记录生活与学习!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | dangge の 小小世界">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/04/06/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF-%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E4%B8%8E%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F/" class="post-title-link" itemprop="url">信息搜集与漏洞扫描</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-04-06 13:48:32" itemprop="dateCreated datePublished" datetime="2023-04-06T13:48:32+08:00">2023-04-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-08 18:00:19" itemprop="dateModified" datetime="2023-11-08T18:00:19+08:00">2023-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86-%E3%80%91%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">【-专业知识-】渗透测试</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E4%B8%93%E4%B8%9A%E7%9F%A5%E8%AF%86-%E3%80%91%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/%E8%AF%BE%E7%A8%8B%E8%AE%B0%E5%BD%95/" itemprop="url" rel="index"><span itemprop="name">课程记录</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>6.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>12 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p><strong>写在最前面</strong>：本次实践的主要内容包括 主机存活探测、端口扫描、scapy编程、漏洞扫描等，每种内容涉及一种或几种技术。<br><strong>记录只是形式，学会才是目的</strong>！</p>
</blockquote>
<p>下面是大纲：</p>
<ul>
<li><a href="#%E4%B8%BB%E6%9C%BA%E6%8E%A2%E6%B5%8B">主机探测</a><ul>
<li><a href="#ping%E4%B8%8Ettl">ping与TTL</a><ul>
<li><a href="#%E5%AE%9E%E8%B7%B5%E8%BF%87%E7%A8%8B">实践过程</a></li>
<li><a href="#%E7%9F%A5%E8%AF%86%E8%A1%A5%E5%85%85">知识补充</a></li>
</ul>
</li>
<li><a href="#arping%E4%BD%BF%E7%94%A8">arping使用</a><ul>
<li><a href="#%E5%AE%9E%E8%B7%B5%E8%BF%87%E7%A8%8B">实践过程</a></li>
<li><a href="#arping%E6%8C%87%E4%BB%A4%E6%89%A9%E5%B1%95">arping指令扩展</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F">端口扫描</a><ul>
<li><a href="#%E5%AE%9E%E8%B7%B5%E8%BF%87%E7%A8%8B">实践过程</a></li>
<li><a href="#nmap%E6%8C%87%E4%BB%A4%E6%89%A9%E5%B1%95">nmap指令扩展</a></li>
</ul>
</li>
<li><a href="#scapy%E7%BC%96%E7%A8%8B">scapy编程</a><ul>
<li><a href="#%E5%AE%9E%E8%B7%B5%E8%BF%87%E7%A8%8B">实践过程</a></li>
<li><a href="#scapy%E6%89%A9%E5%B1%95">scapy扩展</a></li>
</ul>
</li>
</ul>
<h1 id="主机探测"><a href="#主机探测" class="headerlink" title="主机探测"></a>主机探测</h1><h2 id="ping与TTL"><a href="#ping与TTL" class="headerlink" title="ping与TTL"></a>ping与TTL</h2><h3 id="实践过程"><a href="#实践过程" class="headerlink" title="实践过程"></a>实践过程</h3><blockquote>
<p><strong>实践要求</strong>：主机A开启命令行，对B进行ping探测，根据B的回复，可以确定主机A和B的连通情况，还可以根据回复数据包的TTL值对操作系统进行猜测。</p>
</blockquote>
<p>下面是<strong>具体的实施过程</strong>：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680778312520.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680778328290.png"></p>
<p>如上图所示，在未开启防火墙的情况下主机A对主机B进行ping扫描，得到返回信息。</p>
<p>回复数据包的TTL值：   <code>64</code>     ，B运行的操作系统可能为：   <code>LINUX</code>    。</p>
<h3 id="知识补充"><a href="#知识补充" class="headerlink" title="知识补充"></a>知识补充</h3><ol>
<li><strong>Kali Linux 防火墙指令</strong></li>
</ol>
<table>
<thead>
<tr>
<th>指令</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>Apt-get install ufw</td>
<td>安装防火墙</td>
</tr>
<tr>
<td>Systemctl status ufw</td>
<td>查看防火墙状态</td>
</tr>
<tr>
<td>Ufw disable</td>
<td>关闭防火墙</td>
</tr>
<tr>
<td>Ufw enable</td>
<td>开启防火墙</td>
</tr>
<tr>
<td>Ufw status</td>
<td>查看防火墙开启情况</td>
</tr>
<tr>
<td>Ufw version</td>
<td>查看防火墙版本</td>
</tr>
<tr>
<td>Ufw default deny</td>
<td>拒绝所有服务</td>
</tr>
<tr>
<td>Ufw default allow</td>
<td>允许所有服务</td>
</tr>
</tbody></table>
<ol start="2">
<li><strong>TTL与系统类型判断</strong></li>
</ol>
<p><code>TTL（Time To Live，生存时间）</code>是IP协议包中的一个值，当我们使用Ping命令进行网络连通测试或者是测试网速的时候，本地计算机会向目的主机发送数据包，但是有的数据包会因为一些特殊的原因不能正常传送到目的主机，如果没有设置TTL值的话，数据包会一直在网络上面传送，浪费网络资源。数据包在传送的时候至少会经过一个以上的路由器，<strong>当数据包经过一个路由器的时候，TTL就会自动减1，如果减到0了还是没有传送到目的主机，那么这个数据包就会自动丢失</strong>，这时路由器会发送一个ICMP报文给最初的发送者。<br>不同的操作系统的默认TTL值是不同的， 所以我们<strong>可以通过TTL值来判断主机的操作系统</strong>，但是当用户修改了TTL值的时候，就会误导我们的判断，所以这种判断方式也不一定准确。</p>
<p><strong>注</strong>：通过TTL判断操作系统类型是十分不准确的，需要使用更加可靠和精准的方法，比如使用指纹识别技术或者其他的技术手段。这些方法可以通过分析网络协议、使用的服务、传输的数据包结构等来确定操作系统类型。</p>
<ol start="3">
<li><strong>设置防火墙以避免Ping扫描</strong></li>
</ol>
<p>可以使用Kali Linux自带的防火墙工具ufw来防御ping扫描。ufw是一种简单的防火墙工具，它允许在Linux上轻松配置防火墙规则。ufw默认情况下已经安装在Kali Linux中，您可以使用以下命令启用它：<code>sudo ufw enable</code>。然后，您可以使用以下命令来阻止ping扫描：<code>sudo ufw deny icmp</code>。这将禁止所有ICMP流量，包括ping扫描。</p>
<h2 id="arping使用"><a href="#arping使用" class="headerlink" title="arping使用"></a>arping使用</h2><h3 id="实践过程-1"><a href="#实践过程-1" class="headerlink" title="实践过程"></a>实践过程</h3><blockquote>
<p> arping是一个在LAN中<strong>使用ARP地址解析协议发现目标主机的工具</strong>。arping工具测试特定IP地址在网络中是否在线。该命令只能在本地局域网内运行，无法跨越路由器和网关，常用的选项为arping -c。Wireshark抓包分析该工具的工作原理。</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680779156049.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680779168906.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680779188634.png"></p>
<p>如图所示，通过wirshark抓包，可以得到arping指令下的网络数据包情况。通过分析具体的协议字段可以看出：这个工具<strong>通过广播的方式发送ARP请求报文</strong>。当探测主机（192.168.72.129）接收到ARP请求包后会向报文中的目的地址<strong>发送ARP响应报文</strong>。<br><strong>综上所述</strong>：arping命令是一个用于测试和管理局域网的工具，它可以通过向本网段下所有主机发起arp请求，然后看收到响应的消息的mac地址是否是我们需要的mac地址，如果是，那么这个ip就是该网卡绑定的ip了。同时如何收到响应包也就说明该主机存活。</p>
<blockquote>
<p>分析并回答：<strong>在同一子网中判断目标主机存活性，ping和arping谁更具优势？</strong><br>当需要在同一子网中确定主机是否存活时，使用arping命令有以下优势：</p>
</blockquote>
<ul>
<li><strong>更快的响应时间</strong>：在同一子网中，目标主机的MAC地址可以从ARP缓存中获取，而无需使用IP地址进行寻址。因此，arping命令可以直接向目标主机发送ARP请求，并根据目标主机是否响应来判断其是否存活。相比之下，ping命令需要发送ICMP数据包并等待回复，这可能会花费更多的时间，并且目标主机可能会过滤掉ICMP数据包。</li>
<li><strong>不会被目标主机屏蔽</strong>：一些主机可能会过滤掉ICMP数据包，从而使ping命令无法检测到其存活状态。相比之下，arping命令发送的是ARP请求，不会被目标主机屏蔽。</li>
<li>更精确的诊断：在一些网络环境下，目标主机的ICMP回复可能会被路由器或防火墙拦截，从而导致ping命令误判目标主机的状态。而arping命令只与目标主机进行通信，因此能够提供更精确的诊断结果。</li>
<li><strong>可以检测到MAC地址变更</strong>：如果目标主机的MAC地址发生变化，arping命令可以检测到这一变化，并更新本地ARP缓存中的MAC地址。而ping命令无法检测到MAC地址的变更，因为它只依赖IP地址进行通信。</li>
</ul>
<p>综上所述，当需要在同一子网中快速确定主机是否存活时，arping命令是一种更可靠、更精确、更快速的工具。</p>
<h3 id="arping指令扩展"><a href="#arping指令扩展" class="headerlink" title="arping指令扩展"></a>arping指令扩展</h3><p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680779337097.png"></p>
<p><strong>参数释义：</strong></p>
<table>
<thead>
<tr>
<th>-A：</th>
</tr>
</thead>
<tbody><tr>
<td>与-U参数类似，但是使用的是ARP REPLY包而非ARP REQUEST包。</td>
</tr>
<tr>
<td>-b：</td>
</tr>
<tr>
<td>发送以太网广播帧，arping在开始时使用广播地址，在收到回复后使用unicast单播地址。</td>
</tr>
<tr>
<td>-c：</td>
</tr>
<tr>
<td>发送指定的count个ARP REQUEST包后停止。如果指定了-w参数，则会等待相同数量的ARP REPLY包，直到超时为止。</td>
</tr>
<tr>
<td>-D：</td>
</tr>
<tr>
<td>重复地址探测模式，即，Duplicate address detection mode (DAD)，用来检测有没有IP地址冲突，如果没有IP冲突则返回0。</td>
</tr>
<tr>
<td>-f：</td>
</tr>
<tr>
<td>收到第一个响应包后退出。</td>
</tr>
<tr>
<td>-h：</td>
</tr>
<tr>
<td>显示帮助页。</td>
</tr>
<tr>
<td>-I：</td>
</tr>
<tr>
<td>用来发送ARP REQUEST包的网络设备的名称。</td>
</tr>
<tr>
<td>-q：</td>
</tr>
<tr>
<td>quite模式，不显示输出。</td>
</tr>
<tr>
<td>-U：</td>
</tr>
<tr>
<td>无理由的（强制的）ARP模式去更新别的主机上的ARP CACHE列表中的本机的信息，不需要响应。</td>
</tr>
<tr>
<td>-V：</td>
</tr>
<tr>
<td>显示arping的版本号。</td>
</tr>
<tr>
<td>-w：</td>
</tr>
<tr>
<td>指定一个超时时间，单位为秒，arping在到达指定时间后退出，无论期间发送或接收了多少包。在这种情况下，arping在发送完指定的count（-c）个包后并不会停止，而是等待到超时或发送的count个包都进行了回应后才会退出。</td>
</tr>
<tr>
<td>-s：设置发送ARP包的IP资源地址，如果为空，则按如下方式处理：</td>
</tr>
<tr>
<td>1、DAD模式（-D）设置为0.0.0.0；</td>
</tr>
<tr>
<td>2、Unsolicited模式（-U）设置为目标地址；</td>
</tr>
<tr>
<td>3、其它方式，从路由表计算。</td>
</tr>
</tbody></table>
<p><strong>操作实例：</strong></p>
<ul>
<li>用于检验目标主机是否存活：<code>arping 192.168.72.129 -c 1</code></li>
<li>查看某个IP是否被不同的MAC占用: <code>arping -d 192.168.72.159</code></li>
</ul>
<h1 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h1><p>这里进行端口扫描使用的工具是nmap，这是一个功能强大的扫描工具。</p>
<h2 id="实践过程-2"><a href="#实践过程-2" class="headerlink" title="实践过程"></a>实践过程</h2><blockquote>
<p><strong>对活动主机进行端口扫描</strong></p>
</blockquote>
<p>主机A使用Nmap工具对主机B进行TCP端口同步扫描（范围1-150）：<br>Nmap命令：<code>nmap -sS -p 1-150 192.168.72.129</code></p>
<ul>
<li>补充1：-sS 表示<strong>TCP SYN扫描</strong></li>
<li>补充2：<strong>TCP端口同步扫描就是TCP SYN扫描</strong>。它是一种半开放扫描，通过向目标服务器的端口发送一个请求连接的SYN包，如果目标端口开放，则服务器会向扫描器返回一个SYN&#x2F;ACK包，否则会返回一个RST包。</li>
</ul>
<blockquote>
<p><strong>对主机B进行UDP端口扫描（</strong>范围是110-140）：</p>
</blockquote>
<p>Nmap命令： <code>nmap -sU -p 110-140 192.168.72.129</code></p>
<ul>
<li><strong>补充</strong>：-sU表示扫描UDP端口，-p:指定端口范围</li>
</ul>
<blockquote>
<p><strong>对活动主机操作系统进行探测</strong></p>
</blockquote>
<p>主机A对主机B进行TCP&#x2F;IP指纹特征扫描:<br>Nmap命令：<code>nmap -O 192.168.72.129</code></p>
<blockquote>
<p><strong>对活动主机运行服务进行探测</strong></p>
</blockquote>
<p>Nmap命令：<code>nmap -sV 192.168.72.129</code></p>
<blockquote>
<p>主机A使用Nmap命令对主机B进行<strong>IP协议探测</strong>：</p>
</blockquote>
<p>Nmap命令：<code>nmap -sO 192.168.72.129</code></p>
<h2 id="nmap指令扩展"><a href="#nmap指令扩展" class="headerlink" title="nmap指令扩展"></a>nmap指令扩展</h2><table>
<thead>
<tr>
<th>参数(区分大小写)</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>-sT</td>
<td>TCP connect()扫描，这种方式会在目标主机的日志中记录大批连接请求和错误信息。</td>
</tr>
<tr>
<td>-sS</td>
<td>半开扫描，很少有系统能把它记入系统日志。不过，需要Root权限。</td>
</tr>
<tr>
<td>-sF  -sN</td>
<td>秘密FIN数据包扫描、Xmas Tree、Null扫描模式</td>
</tr>
<tr>
<td>-sP</td>
<td>ping扫描，Nmap在扫描端口时，默认都会使用ping扫描，只有主机存活，Nmap才会继续扫描。</td>
</tr>
<tr>
<td>-sU</td>
<td>UDP扫描，但UDP扫描是不可靠的</td>
</tr>
<tr>
<td>-sA</td>
<td>这项高级的扫描方法通常用来穿过防火墙的规则集</td>
</tr>
<tr>
<td>-sV</td>
<td>探测端口服务版本</td>
</tr>
<tr>
<td>-Pn</td>
<td>扫描之前不需要用ping命令，有些防火墙禁止ping命令。可以使用此选项进行扫描</td>
</tr>
<tr>
<td>-v</td>
<td>显示扫描过程，推荐使用</td>
</tr>
<tr>
<td>-h</td>
<td>帮助选项，是最清楚的帮助文档</td>
</tr>
<tr>
<td>-p</td>
<td>指定端口，如“1-65535、1433、135、22、80”等</td>
</tr>
<tr>
<td>-O</td>
<td>启用远程操作系统检测，存在误报</td>
</tr>
<tr>
<td>-A</td>
<td>全面系统检测、启用脚本检测、扫描等</td>
</tr>
<tr>
<td>-oN&#x2F;-oX&#x2F;-oG</td>
<td>将报告写入文件，分别是正常、XML、grepable 三种格式</td>
</tr>
<tr>
<td>-T4</td>
<td>针对TCP端口禁止动态扫描延迟超过10ms</td>
</tr>
<tr>
<td>-iL</td>
<td>读取主机列表，例如，“-iL C:\ip.txt”</td>
</tr>
</tbody></table>
<p>Nmap使用时的<strong>注意事项</strong>：</p>
<ul>
<li>nmap扫描会产生大量的网络流量，可能会影响网络性能。</li>
<li>nmap扫描可能会被防火墙或入侵检测系统检测到，因此需要谨慎使用。</li>
<li>nmap扫描可能会被误认为是攻击行为，因此需要获得授权后再使用。</li>
<li>nmap扫描可能会泄露网络拓扑结构和主机信息，因此需要谨慎使用</li>
</ul>
<h1 id="scapy编程"><a href="#scapy编程" class="headerlink" title="scapy编程"></a>scapy编程</h1><p>Scapy是Python中<strong>构造网络数据包的模块</strong>，它可以完成绝大多数工具所能完成的功能，例如：扫描，网络发现，跟踪路由，探测，攻击等。</p>
<h2 id="实践过程-3"><a href="#实践过程-3" class="headerlink" title="实践过程"></a>实践过程</h2><p><code>send、sendp、sr、sr1</code> 发送数据包函数使用。可以通过python导入此库也可以在命令行直接输入指令。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680779974688.png"></p>
<blockquote>
<p><strong>send函数</strong>工作在第三层，只发送数据包:</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680780010120.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680780018263.png"></p>
<blockquote>
<p><strong>sendp函数</strong>工作在第二层，只发送数据包:</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680780048958.png"></p>
<blockquote>
<p><strong>sr()函数</strong>用来发送数据包和接收响应:</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680780075374.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680780084105.png"></p>
<blockquote>
<p>构造数据包来实现<strong>TCP SYN端口扫描</strong>：</p>
</blockquote>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680780133940.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680780144735.png"></p>
<blockquote>
<p><strong>模拟三次握手实现TCP连接</strong>:</p>
</blockquote>
<p><strong>注</strong>：<a target="_blank" rel="noopener" href="https://www.osgeo.cn/scapy/usage.html#syn-scans">官方文档有这个实例</a></p>
<p><strong>代码如下</strong>：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680780176675.png"></p>
<p><strong>运行效果</strong>：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680780196894.png"></p>
<p><strong>注意事项</strong>：</p>
<ol>
<li>要理清三次握手是seq与ack值的变化，ack的值是seq+1,也是期望收到的下一个包的seq值。seq随机生成初始值，而后在之后的发送中递增1</li>
<li>进行三次握手要保证目标机器开启了Apache服务，win下通过phpstudy开启，kali可以通过指令开启：<code>service apache2 start</code></li>
<li>如果用于测试的主机为LINUX，需要关闭RST：<code>iptables -A OUTPUT -p tcp --tcp-flags RST RST -j DROP</code></li>
</ol>
<h2 id="scapy扩展"><a href="#scapy扩展" class="headerlink" title="scapy扩展"></a>scapy扩展</h2><p>一定要看<strong>官方文档</strong>：<a target="_blank" rel="noopener" href="https://www.osgeo.cn/scapy/introduction.html">https://www.osgeo.cn/scapy/introduction.html</a></p>
<p>这里主要就<strong>上述使用到的知识</strong>进行扩展：</p>
<blockquote>
<p> <strong>数据包构造</strong>：</p>
</blockquote>
<p>	Scapy数据包的创建与网络中的分层方法一致。<br>	数据包的基本构建块是一层，而整个数据包则是通过将各个层堆叠在一起而构建的。<br>	scapy通过在TCP &#x2F; IP的不同层上为每个协议定义数据包头，然后按顺序堆叠这些层，来构造数据包。</p>
<p>可以通过<strong>show</strong>显示详细的包头：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1680780697670.png"></p>
<blockquote>
<p><strong>send函数</strong>：</p>
</blockquote>
<table>
<thead>
<tr>
<th>scapy.sendrecv.send(x, iface&#x3D;None,**kargs)</th>
</tr>
</thead>
<tbody><tr>
<td>功能：在第三层发送数据包</td>
</tr>
<tr>
<td>参数：</td>
</tr>
<tr>
<td>x – 数据包</td>
</tr>
<tr>
<td>inter – 两个数据包之间的时间（以秒为单位）（默认值为0）</td>
</tr>
<tr>
<td>loop – send packet indefinitely (default 0)</td>
</tr>
<tr>
<td>count – 要发送的数据包数（默认无&#x3D;1）</td>
</tr>
<tr>
<td>verbose – 详细模式（默认无&#x3D;conf.详细)</td>
</tr>
<tr>
<td>realtime – 在发送下一个包之前，请检查是否已发送了一个包</td>
</tr>
<tr>
<td>return_packets – 返回发送的数据包</td>
</tr>
<tr>
<td>socket – 要使用的套接字（默认为conf.L3socket（kargs））</td>
</tr>
<tr>
<td>iface – 发送数据包的接口</td>
</tr>
<tr>
<td>monitor – （不在linux上）以监视模式发送</td>
</tr>
<tr>
<td>返回值：无</td>
</tr>
<tr>
<td>源代码链接：<a target="_blank" rel="noopener" href="https://www.osgeo.cn/scapy/api/scapy.sendrecv.html#scapy.sendrecv.send">https://www.osgeo.cn/scapy/api/scapy.sendrecv.html#scapy.sendrecv.send</a></td>
</tr>
</tbody></table>
<blockquote>
<p><strong>sendp函数</strong>：</p>
</blockquote>
<table>
<thead>
<tr>
<th>scapy.sendrecv.sendp(x, iface&#x3D;None, iface_hint&#x3D;None, socket&#x3D;None, **kargs)</th>
</tr>
</thead>
<tbody><tr>
<td>功能：在第二层发送数据包</td>
</tr>
<tr>
<td>参数：</td>
</tr>
<tr>
<td>x – 数据包</td>
</tr>
<tr>
<td>inter – 两个数据包之间的时间（以秒为单位）（默认值为0）</td>
</tr>
<tr>
<td>loop – send packet indefinitely (default 0)</td>
</tr>
<tr>
<td>count – 要发送的数据包数（默认无&#x3D;1）</td>
</tr>
<tr>
<td>verbose – 详细模式（默认无&#x3D;conf.详细)</td>
</tr>
<tr>
<td>realtime – 在发送下一个包之前，请检查是否已发送了一个包</td>
</tr>
<tr>
<td>return_packets – 返回发送的数据包</td>
</tr>
<tr>
<td>socket – 要使用的套接字（默认为conf.L3socket（kargs））</td>
</tr>
<tr>
<td>iface – 发送数据包的接口</td>
</tr>
<tr>
<td>monitor – （不在linux上）以监视模式发送</td>
</tr>
<tr>
<td>返回值：无</td>
</tr>
<tr>
<td>源代码：<a target="_blank" rel="noopener" href="https://github.com/secdev/scapy/blob/master/scapy/sendrecv.py#L443-L474">https://github.com/secdev/scapy/blob/master/scapy/sendrecv.py#L443-L474</a></td>
</tr>
</tbody></table>
<blockquote>
<p><strong>sr函数</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>scapy.sendrecv.sr(x, promisc&#x3D;None, filter&#x3D;None, iface&#x3D;None, nofilter&#x3D;0, *args, **kargs)</th>
</tr>
</thead>
<tbody><tr>
<td>功能：在第三层发送和接收数据包</td>
</tr>
<tr>
<td>参数：</td>
</tr>
<tr>
<td>pks – 发送&#x2F;接收数据包的SuperSocket实例</td>
</tr>
<tr>
<td>pkt – 要发送的数据包</td>
</tr>
<tr>
<td>rcv_pks – 如果设置，则将使用而不是pks来接收数据包。数据包仍将通过pks发送</td>
</tr>
<tr>
<td>nofilter – 输入1以避免使用BPF过滤器</td>
</tr>
<tr>
<td>retry – 如果为正数，则重发未应答数据包的次数（如果为负数），当没有更多的数据包被应答时重试多少次</td>
</tr>
<tr>
<td>timeout – 最后一个数据包发送后要等待多长时间</td>
</tr>
<tr>
<td>verbose – 设置详细级别</td>
</tr>
<tr>
<td>multi – 是否接受同一刺激的多个答案</td>
</tr>
<tr>
<td>prebuild – 在开始发送数据包之前，先预构建这些包。当发电机作为数据包传递时自动启用</td>
</tr>
<tr>
<td>sr（）返回两个列表，第一个列表包含响应的，第二个列表包含未响应的</td>
</tr>
<tr>
<td>源代码：<a target="_blank" rel="noopener" href="https://github.com/secdev/scapy/blob/master/scapy/sendrecv.py#L606-L623">https://github.com/secdev/scapy/blob/master/scapy/sendrecv.py#L606-L623</a></td>
</tr>
</tbody></table>
<blockquote>
<p><strong>sr1函数</strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>scapy.sendrecv.sr1(x, promisc&#x3D;None, filter&#x3D;None, iface&#x3D;None, nofilter&#x3D;0, *args, **kargs)</th>
</tr>
</thead>
<tbody><tr>
<td>功能：在第三层发送和接收数据包，只返回一个答案</td>
</tr>
<tr>
<td>参数：</td>
</tr>
<tr>
<td>pks – 发送&#x2F;接收数据包的SuperSocket实例</td>
</tr>
<tr>
<td>pkt – 要发送的数据包</td>
</tr>
<tr>
<td>rcv_pks – 如果设置，则将使用而不是pks来接收数据包。数据包仍将通过pks发送</td>
</tr>
<tr>
<td>nofilter – 输入1以避免使用BPF过滤器</td>
</tr>
<tr>
<td>retry – 如果为正数，则重发未应答数据包的次数（如果为负数），当没有更多的数据包被应答时重试多少次</td>
</tr>
<tr>
<td>timeout – 最后一个数据包发送后要等待多长时间</td>
</tr>
<tr>
<td>verbose – 设置详细级别</td>
</tr>
<tr>
<td>multi – 是否接受同一刺激的多个答案</td>
</tr>
<tr>
<td>prebuild – 在开始发送数据包之前，先预构建这些包。当发电机作为数据包传递时自动启用</td>
</tr>
<tr>
<td>sr（）返回一个列表，列表包含响应的</td>
</tr>
<tr>
<td>源代码：<a target="_blank" rel="noopener" href="https://github.com/secdev/scapy/blob/master/scapy/sendrecv.py#L606-L623">https://github.com/secdev/scapy/blob/master/scapy/sendrecv.py#L606-L623</a></td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://danggeovo.github.io/2023/03/30/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E4%B9%8B%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="danggeOvO">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dangge の 小小世界">
      <meta itemprop="description" content="记录生活与学习!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | dangge の 小小世界">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/03/30/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E4%B9%8B%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">机器学习算法之支持向量机算法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-03-30 13:26:32" itemprop="dateCreated datePublished" datetime="2023-03-30T13:26:32+08:00">2023-03-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-11-08 17:53:08" itemprop="dateModified" datetime="2023-11-08T17:53:08+08:00">2023-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" itemprop="url" rel="index"><span itemprop="name">【-基础知识-】人工智能</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E3%80%90-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-%E3%80%91%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">机器学习算法</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>7 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p><strong>写在最前面</strong>：本文会介绍SVM的相关知识，参考：<a target="_blank" rel="noopener" href="https://github.com/NLP-LOVE/ML-NLP/blob/master/Machine%20Learning/4.%20SVM/4.%20SVM.md">https://github.com/NLP-LOVE/ML-NLP/blob/master/Machine%20Learning/4.%20SVM/4.%20SVM.md</a></p>
</blockquote>
<h1 id="SVM介绍"><a href="#SVM介绍" class="headerlink" title="SVM介绍"></a>SVM介绍</h1><h2 id="SVM要解决什么问题？"><a href="#SVM要解决什么问题？" class="headerlink" title="SVM要解决什么问题？"></a>SVM要解决什么问题？</h2><p>下面用一个天使与魔鬼的故事介绍一下SVM到底是要解决什么问题：</p>
<p>传说魔鬼和天使玩了一个游戏，魔鬼在桌上放了两种颜色的球。魔鬼让天使用一根木棍将它们分开。这对天使来说，似乎太容易了。天使不假思索地一摆，便完成了任务。魔鬼又加入了更多的球。随着球的增多，似乎有的球不能再被原来的木棍正确分开，如下图所示。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1679140940037.png"></p>
<p>SVM实际上是在为天使<strong>找到木棒的最佳放置位置</strong>，使得两边的球都离分隔它们的木棒足够远。依照SVM为天使选择的木棒位置，魔鬼即使按刚才的方式继续加入新球，木棒也能很好地将两类不同的球分开。</p>
<p>看到天使已经很好地解决了用木棒线性分球的问题，魔鬼又给了天使一个新的挑战，如下图所示。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1679140984354.png"></p>
<p>按照这种球的摆法，世界上貌似没有一根木棒可以将它们 完美分开。但天使毕竟有法力，他一拍桌子，便让这些球飞到了空中，然后凭借 念力抓起一张纸片，插在了两类球的中间。从魔鬼的角度看这些 球，则像是被一条曲线完美的切开了。</p>
<p>后来，“无聊”的科学家们把这些<strong>球称为“数据”</strong>，把<strong>木棍称为“分类面”</strong>，找到<strong>最 大间隔的木棒位置的过程称为“优化”</strong>，拍桌子让球飞到空中的<strong>念力叫“核映射”</strong>，在 空中分隔球的<strong>纸片称为“分类超平面”</strong>。这便是SVM的童话故事。</p>
<p><strong>注</strong>：上述标黑的地方都是SVM涉及到的一些术语，我们后面会具体介绍。不过从上故事可以看出SVM要解决的就是一个二分类的问题，同时对于非线性平面引入了核映射来进行特征升维。</p>
<h2 id="理解SVM：第一层"><a href="#理解SVM：第一层" class="headerlink" title="理解SVM：第一层"></a>理解SVM：第一层</h2><blockquote>
<p><strong>支持向量机</strong>，因其英文名为support vector machine，故一般简称SVM，通俗来讲，它是一种<strong>二类分类模型</strong>，其基本模型定义为<strong>特征空间上的间隔最大的线性分类器</strong>，其学习策略便是<strong>间隔最大化</strong>，最终可转化为一个<strong>凸二次规划问题</strong>的求解。</p>
</blockquote>
<p><strong>线性分类器</strong>：给定一些数据点，它们分别属于两个不同的类，现在要找到一个线性分类器把这些数据分成两类。如果用x表示数据点，用y表示类别（y可以取1或者0，分别代表两个不同的类），一个线性分类器的学习目标便是要在n维的数据空间中找到一个超平面（hyper plane），这个超平面的方程可以表示为（ wT中的T代表转置）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$W^T+b$</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这个超平面可以用<strong>分类函数</strong> <code>!$f(x) = X^T+b$</code>表示，当<strong>f(x) 等于0</strong>的时候，x便是位于超平面上的点，而f(x)大于0的点对应 y&#x3D;1 的数据点，f(x)小于0的点对应y&#x3D;-1的点。</p>
<h3 id="函数间隔与几何间隔"><a href="#函数间隔与几何间隔" class="headerlink" title="函数间隔与几何间隔"></a>函数间隔与几何间隔</h3><p>在超平面<code>wx+b=0</code>确定的情况下，<code>|wx+b|</code>能够表示点x到距离超平面的远近，而通过观察wx+b的符号与类标记y的符号是否一致可判断分类是否正确，所以，可以用<code>(y(w*x+b))</code>的正负性来判定或表示分类的正确性。于此，我们便引出了<strong>函数间隔</strong>（functional margin）的概念。</p>
<p>函数间隔公式：<code>!$γ = y(W^T+b) = y(f(x))$</code></p>
<p>而超平面(w，b)关于数据集T中所有样本点(xi，yi)的函数间隔最小值（其中，x是特征，y是结果标签，i表示第i个样本），便为超平面(w, b)关于训练数据集T的函数间隔：<code>!$γ  = minγ i(i=1,...n)$</code></p>
<p>但这样定义的函数间隔有问题，即如果成比例的改变w和b（如将它们改成2w和2b），则函数间隔的值f(x)却变成了原来的2倍（虽然此时超平面没有改变），所以只有函数间隔还远远不够。</p>
<p>几何间隔：</p>
<p>事实上，我们可以对法向量w加些约束条件，从而引出真正定义点到超平面的距离–几何间隔（geometrical margin）的概念。假定对于一个点 x ，令其垂直投影到超平面上的对应点为 x0 ，w 是垂直于超平面的一个向量，<code>!$\gamma$</code>为样本x到超平面的距离，如下图所示：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1679142633863.png"></p>
<p>从上述函数间隔和几何间隔的定义可以看出：<strong>几何间隔就是函数间隔除以||w||<strong>，而且</strong>函数间隔</strong>y*(wx+b) &#x3D; y*f(x)<strong>实际上就是|f(x)|<strong>，只是人为定义的一个间隔度量，而</strong>几何间隔</strong>|f(x)|&#x2F;||w||才是直观上的<strong>点到超平面的距离</strong>。<br>\</p>
<h3 id="最大间隔分类器的定义"><a href="#最大间隔分类器的定义" class="headerlink" title="最大间隔分类器的定义"></a>最大间隔分类器的定义</h3><p>对一个数据点进行分类，当超平面离数据点的“间隔”越大，分类的确信度（confidence）也越大。所以，为了使得分类的确信度尽量高，需要让所选择的超平面能够最大化这个“间隔”值。这个间隔就是下图中的Gap的一半。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1679142732656.png"></p>
<p>通过由前面的分析可知：函数间隔不适合用来最大化间隔值，因为在超平面固定以后，可以等比例地缩放w的长度和b的值，这样可以使得<code>!$f(x) = X^T+b$</code>的值任意大，亦即函数间隔可以在超平面保持不变的情况下被取得任意大。但几何间隔因为除上了w，使得在缩放w和b的时候几何间隔的值是不会改变的，它只随着超平面的变动而变动，因此，这是更加合适的一个间隔。换言之，这里要找的最大间隔分类超平面中的**“间隔”指的是几何间隔。</p>
<p>如下图所示，中间的实线便是寻找到的最优超平面（Optimal Hyper Plane），其到两条虚线边界的距离相等，这个距离便是几何间隔，两条虚线间隔边界之间的距离等于2倍几何间隔，而<strong>虚线间隔边界上的点则是支持向量</strong>。由于这些支持向量刚好在虚线间隔边界上，所以它们满足 <code>!$y(W^T+b) = 1$</code>，对于所有不是支持向量的点，则显然有 <code>!$y(W^T+b) &gt; 1$</code>。</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1679142863596.png"></p>
<p><strong>注</strong>：到这里SVM第一层的<strong>基本原理</strong>便已经介绍完了，其优化过程就是<strong>求解最大间隔</strong>的过程，并通过求得的超平面实现数据的分类。</p>
<h2 id="深度SVM：第二层"><a href="#深度SVM：第二层" class="headerlink" title="深度SVM：第二层"></a>深度SVM：第二层</h2><p>事实上，大部分时候数据<strong>并不是线性可分</strong>的，这个时候满足这样条件的超平面就根本不存在。在上文中，我们已经了解到了SVM处理线性可分的情况，那对于非线性的数据SVM咋处理呢？对于非线性的情况，SVM 的处理方法是<strong>选择一个核函数 κ(⋅,⋅) ，通过将数据映射到高维空间</strong>，来解决在原始空间中线性不可分的问题。</p>
<p>具体来说，在线性不可分的情况下，支持向量机首先<strong>在低维空间中完成计算</strong>，然后<strong>通过核函数将输入空间映射到高维特征空间</strong>，最终<strong>在高维特征空间中构造出最优分离超平面</strong>，从而把平面上本身不好分的非线性数据分开。如图所示，一堆数据在二维空间无法划分，从而映射到三维空间里划分：</p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1679143200873.png"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/1679143220495.png"></p>
<p>通常人们会从一些<strong>常用的核函数</strong>中选择（根据问题和数据的不同，选择不同的参数，实际上就是得到了不同的核函数），例如：<code>多项式核、高斯核、线性核</code>。</p>
<p>读者可能还是没明白核函数到底是个什么东西？我再简要概括下，即以下三点：</p>
<ul>
<li>实际中，我们会经常遇到<strong>线性不可分</strong>的样例，此时，我们的常用做法是<strong>把样例特征映射到高维空间</strong>中去(映射到高维空间后，相关特征便被分开了，也就达到了分类的目的)；</li>
<li>但进一步，如果凡是遇到线性不可分的样例，一律映射到高维空间，那么这个维度大小是会高到可怕的。那咋办呢？</li>
<li>此时，核函数就隆重登场了，核函数的价值在于它虽然也是将特征进行从低维到高维的转换，但<strong>核函数绝就绝在它事先在低维上进行计算</strong>，而将实质上的分类效果表现在了高维上，避免了直接在高维空间中的复杂计算。</li>
</ul>
<p>如果数据中出现了离群点outliers，那么就可以使用松弛变量来解决。</p>
<p>不准确的说，SVM它本质上即是一个<strong>分类方法</strong>，用 <code>w^T+b</code> 定义分类函数，于是求w、b，为<strong>寻最大间隔</strong>，引出<code>1/2||w||^2</code>，继而引入<strong>拉格朗日因子</strong>，化为对拉格朗日乘子a的求解（求解过程中会涉及到一系列最优化或凸二次规划等问题），如此，求w.b与求a等价，而a的求解可以用一种快速学习算法SMO，至于核函数，是为<strong>处理非线性情况</strong>，若直接映射到高维计算恐<strong>维度爆炸</strong>，故在<strong>低维计算，等效高维表现</strong>。</p>
<h1 id="SVM的一些问题"><a href="#SVM的一些问题" class="headerlink" title="SVM的一些问题"></a>SVM的一些问题</h1><ul>
<li><p>是否存在一组参数使SVM训练误差为0？</p>
<ul>
<li>答：存在</li>
</ul>
</li>
<li><p>训练误差为0的SVM分类器一定存在吗？</p>
<ul>
<li>答：一定存在</li>
</ul>
</li>
<li><p><strong>加入松弛变量的SVM的训练误差可以为0吗</strong>？</p>
<ul>
<li><strong>答</strong>：使用SMO算法训练的线性分类器并不一定能得到训练误差为0的模型。这是由于我们的优化目标改变了，并<strong>不再是使训练误差最小</strong>。</li>
</ul>
</li>
<li><p><strong>带核的SVM为什么能分类非线性问题?</strong></p>
<ul>
<li><strong>答</strong>：核函数的本质是<strong>两个函数的內积</strong>，通过核函数将其<strong>隐射到高维空间</strong>，在高维空间非线性问题转化为线性问题, SVM得到超平面是高维空间的线性分类平面。其分类结果也视为低维空间的非线性分类结果, 因而带核的SVM就能分类非线性问题。</li>
</ul>
</li>
<li><p><strong>如何选择核函数</strong>？</p>
<ul>
<li>如果特征的<strong>数量大到和样本数量差不多</strong>，则选用LR或者线性核的SVM；</li>
<li>如果<strong>特征的数量小</strong>，<strong>样本的数量正常</strong>，则选用SVM+高斯核函数；</li>
<li>如果<strong>特征的数量小</strong>，而<strong>样本的数量很大</strong>，则需要手工添加一些特征从而变成第一种情况。</li>
</ul>
</li>
</ul>
<h1 id="LR和SVM的联系与区别"><a href="#LR和SVM的联系与区别" class="headerlink" title="LR和SVM的联系与区别"></a>LR和SVM的联系与区别</h1><h2 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h2><ul>
<li>都是<strong>线性分类器</strong>。本质上都是求一个<strong>最佳分类超平面</strong>。</li>
<li>都是<strong>监督学习</strong>算法。</li>
<li>都是<strong>判别模型</strong>。判别模型不关心数据是怎么生成的，它只关心信号之间的差别，然后用差别来简单对给定的一个信号进行分类。常见的判别模型有：KNN、SVM、LR，常见的生成模型有：朴素贝叶斯，隐马尔可夫模型。</li>
</ul>
<h2 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h2><ul>
<li>LR是参数模型，<strong>svm是非参数模型</strong>，linear和rbf则是针对数据线性可分和不可分的区别；</li>
<li>从目标函数来看，区别在于逻辑回归采用的是logistical loss，SVM采用的是hinge loss，这两个损失函数的目的都是增加对分类影响较大的数据点的权重，减少与分类关系较小的数据点的权重。</li>
<li>SVM的处理方法是只考虑support vectors，也就是和分类最相关的少数点，去学习分类器。而逻辑回归通过非线性映射，大大减小了离分类平面较远的点的权重，相对提升了与分类最相关的数据点的权重。</li>
<li><strong>逻辑回归</strong>相对来说<strong>模型更简单</strong>，好理解，特别是大规模线性分类时比较方便。而SVM的理解和优化相对来说复杂一些，SVM转化为对偶问题后,分类只需要计算与少数几个支持向量的距离,这个在进行复杂核函数计算时优势很明显,能够大大简化模型和计算。</li>
<li>logic 能做的 svm能做，但可能在准确率上有问题，<strong>svm能做的logic有的做不了</strong>。</li>
</ul>
<h1 id="我的笔记"><a href="#我的笔记" class="headerlink" title="我的笔记"></a>我的笔记</h1><p><strong>参考链接</strong>：<a target="_blank" rel="noopener" href="https://blog.csdn.net/v_july_v/article/detail">https://blog.csdn.net/v_july_v/article/detail</a></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/SVM_202303301755_26706_1.jpg" alt="SVM_202303301755_26706 1"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/SVM_202303301755_26706_2.jpg" alt="SVM_202303301755_26706 2"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/SVM_202303301755_26706_3.jpg" alt="SVM_202303301755_26706 3"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/SVM_202303301755_26706_4.jpg" alt="SVM_202303301755_26706 4"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/SVM_202303301755_26706_5.jpg" alt="SVM_202303301755_26706 5"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/SVM_202303301755_26706_6.jpg" alt="SVM_202303301755_26706 6"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/SVM_202303301755_26706_7.jpg" alt="SVM_202303301755_26706 7"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/SVM_202303301755_26706_8.jpg" alt="SVM_202303301755_26706 8"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/SVM_202303301755_26706_9.jpg" alt="SVM_202303301755_26706 9"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/SVM_202303301755_26706_10.jpg" alt="SVM_202303301755_26706 10"></p>
<p><img src="https://images-blogs-1310566801.cos.ap-guangzhou.myqcloud.com/%E5%B0%8F%E4%B9%A6%E5%8C%A0/SVM_202303301755_26706_11.jpg" alt="SVM_202303301755_26706 11"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/sy/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/sy/">1</a><a class="page-number" href="/sy/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/sy/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/sy/page/6/">6</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/sy/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">danggeOvO</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">337k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">10:13</span>
  </span>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  <script src="/js/third-party/pace.js"></script>


  





</body>
</html>
